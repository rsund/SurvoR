SURVO84ED 74 550    74 S60                                                *SAVE EDQW71                                                              *VFEDIT?                                                                  *The FEDIT operation   written by Markku Korhonen (HUCC)                  *                                                                         *The function of the FEDIT operation is to display values in a SURVO      *84C data file on forms. The old values can be edited or new values       *can be entered in the data file, too.                                    *                                                                         *Further information:                                                     * 1 = Introduction                                                        * 2 = Fields on forms                                                     * 3 = Options in the FEDIT operation                                      * 4 = Validity checks of field values (FEDIT and MFEDIT)                  * 5 = Designing the forms in FEDIT                                        * 6 = Conditional forms                                                   * 7 = The FEDIT keyboard                                                  * 8 = Transformations in FEDIT and MFEDIT                                 *                                                                         * D = More on data analysis                                               * E = More information on SURVO 84 EDITOR                                 *                                                                         %1=VFINTRO  2=VFIELDS  3=VFOPTS  4=VMVALCHK? @                            %5=VFRMDSG  6=VCONDF   7=VFKEYS  8=VMTRANSF? D=STATIS? E=EDITOR?@         *                                                                         *@SELECT                                                                  *                                                                         *VFINTRO?                                                                 *Introduction                                                             *                                                                         *The function of the FEDIT operation is to display values in a SURVO      *84C data file on forms. The old values can be edited or new values       *can be entered in the data file, too. The size of a form is not limited  *by the size of the screen. Several forms may correspond to one obser-    *vation in the Survo data file. One can set conditions for displaying a   *form. If the conditions are not met, then the form is skipped. When      *new values are entered then FEDIT automatically checks that the val-     *ues are not in contradiction with the type of field. Additional validity *checks may be defined, e.g. by listing valid values for some fields.     *                                                                         *The following example clarifies the idea of the form design. A ques-     *tionnaire starts as follows:  @C                                         *                                                                         *                                                                         *  Company: .....................................................         *  Contact person: ..............................................         *  Address: ......................................................        *  Telefon: ................   Telefax: ...............                   *                                                                         *  etc ...                                                                *                                                                         *The questionnaire is completed by assigning each field to a variable in  *the data file:                                                           *                                                                         *                                                                         *  Company: &Company                                                      *  Contact person: &Contname                                              *  Address: &Address                                                      *  Telephone: &Tel                Telefax: &Fax                           *                                                                         *  etc ...                                                                *         @C                                                              *The form of the FEDIT operation is                                       *                                                                         *FEDIT <Survo data file>,<form file>                                      *<options>                                                                *                                                                         *The SURVO 84C data file                                                  *                                                                         *If the Survo data file exists, then FEDIT uses it. If the Survo data     *file does not exist, then FEDIT creates a new one by using the infor-    *mation in the form file.                                                 *                                                                         *The form file                                                            *                                                                         *The form file is an ASCII text file. Its maximum record length is 253    *characters. The form file can be created, for example, by the SAVEP      *operation of SURVO 84C. If the form file does not exist, then a de-      *fault form file can be created on the basis of the information on va-    *riables saved in the SURVO data file.  @C                                *Options                                                                  *                                                                         *The option CAPS equates the lowercase letters with capitals. Other       *options are needed very rarely, e.g. for increasing the maximum number   *of selection fields.                                                     *                                                                         *Fields on the forms                                                      *                                                                         *Two types of fields may exist on forms:                                  *(1) Standard fields.                                                     *(2) Selection fields.                                                    *                                                                         *The size of a form                                                       *                                                                         *If the form file exists, then FEDIT estimates the number of columns and  *rows needed on the basis of the information given by the form file. The  *form having the maximum width defines the width used for all forms.      *However, at least 50 columns are used. The length of a form may vary.    *                                                                         *   M = More information on FEDIT operation                               %M=VFEDIT @                                                               *@SELECT                                                                  *                                                                         *VFIELDS?                                                                 *Fields on forms: There are two kind of fields that may exist on forms:   *                                                                         *  (1) standard fields and                                                *  (2) selection fields.                                                  *                                                                         *In standard fields, each field corresponds to a variable in a Survo      *data file. The desired value of the variable is written on the field.    *The field length is defined by the type of the variable.                 *                                                                         *In the case of selection fields, the alternatives for values of a        *(group of) variable(s) are written on the form. The user selects one or  *more of the alternatives by pressing the Return key. The number of       *selections in a selection group equals to the number of variables in     *the Survo data file assigned to this selection group. Free selection     *fields may be used for those situations where all possible choices       *cannot be written out.                                                   *                                                                         *   M = More information on FEDIT operation                               %M=VFEDIT @                                                               *@SELECT                                                                  *                                                                         *VFOPTS?                                                                  (Options in the FEDIT operation                                           *                                                                         *The option FIRSTOBS defines the starting observation. By default,        *FEDIT assumes that new observations will be entered.                     *                                                                         *If the form file doesn't exist or the program fails to estimate the      *form width, the maximum size of a form may be given by the MAXCOLS       *and MAXROWS options. MAXCOLS defines the number of the ordinary          *columns in a form (max. 253). If the form file does not exist, then      *the default size is 78. Two additional cxolumns are needed for the       *frame. The maximum number of the ordinary rows in the form is given      *by the MAXROWS option. If the form file does not exist, then the         *default is 60 rows. The values given by the options MAXCOLS and MAXROWS  *must meet the requirement:                                               *      (maxcols+3)*(maxrows+2) < 32766  @C                                *The option CAPS defines the default behaviour when small letters are     *entered. If CAPS=1 is stated, then lower case letters are changed to     *capital ones if not otherwise stated in the RESTR statement.             *                                                                         *By the option INTDEF one can define the default display length of the    *integer variable in the form. This default value can be overridden for   *given variables by an INT statement. @C                                  *The program estimates the maximum number of selection groups in one      *form. If the form file does not exist, then the default maximum number   *of selection groups is 50. The user may give this maximum value by the   *option MAXGROUPS. The option MAXCHOICES can be used to define            *the maximum number of alternatives in one selection group (default 50).  *                                                                         *The maximum number of standard fields plus the number of selection       *fields in selection groups is 300. This upper limit cannot be increased. *The FEDIT operation can be used with Survo data files having 1200 va-    *riables at most!                                                         *                                                                         *   M = More information on FEDIT operation                               %M=VFEDIT @                                                               *@SELECT                                                                  *                                                                         *VFRMDSG?                                                                 *Designing forms in FEDIT                                                 *                                                                         *The form definitions are given by the form file. The SURVO 84C editor    *can be used to create it (use the SAVEP operation). FEDIT is able        *to generate a default form file if all necessary variables are already   *defined in the Survo data file. Then you can load (use LOADP) the        *created file in the edit field for further editing.                      *                                                                         *The principle is that the forms are written in the form file as they     *should be displayed to the user. The program adds frames around the      *form. The fields on forms are denoted in a predetermined way. Besides    *the definition of the ordinary form, conditions for displaying the form  *as well field checks may be defined. These functions require additional  *statements before or after the ordinary form. The structure of the       *definitions is the following (obligatory statements are shown by bold    *letters):  @C                                                            *FORM(the name of the form):                                              *COND: <conditions for the usage of this form>                            *ENCOND;                                                                  *STRING: <names and lengths of string variables>;                         *REAL: <names and display lengths of real variables>;                     *INT: <names and display lengths of integer variables>;                   *SELECT:                                                                  *   < definition of variables corresponding each (multi)selection group>  *ENDSELECT;                                                               *TEXT:                                                                    *      <definition of the ordinary form>                                  *ENDTEXT;                                                                 *RESTR:                                                                   *      <definition of valid variable values>                              *ENDRESTR;                                                                *ENDFORM;                                                                 *                                                                         *FORM(the name of the next form):                                         *...                                                                      *ENDFORM;                                                                 *..                                                                       *ENDOFFILE;  @C                                                           *An example with one form only:                                           *                                                                         *FORM(Flats):                                                             *STRING: City(9),Subcity(12),Seller(16),Sauna(1),Type(8),Kitchen(2);      *REAL: Area(5), Dist1(5), Dist2(5);                                       *TEXT:                                                                    *                                                                         * City: &City                                                             * Subsection: &Subcity                                                    * Type of the flat: &Type      Number of rooms: &Rooms                    * Kitchen/Kitchenette (K/KN): &Kitchen                                    * Sauna (S=yes/E=no): &Sauna                                              * Area of the flat: &Area                                                 * Selling price: &Price                                                   * Debt: &Debt              Completion year of the flat: &Year             * Seller: &Seller                                                         * Distance from centre of Helsinki to nearest railway station: &Dist1     * Distance from flat to nearest railway station: &Dist2                   *ENDTEXT;                                                                 *ENDFORM;                                                                 *ENDOFFILE;  @C                                                           *STRING and REAL statements are necessary only if the Survo data file     *does not exist. The maximum length of a field (in characters) is given   *in parentheses after the corresponding variable name. The values of va-  *riables Area, Dist1 and Dist2 may have decimals, so they are declared    *as real variables. The numbers in parentheses concern the field length   *in the form. If the corresponding variable does not exist in the Survo   *data file, then it is created as a 4 byte numeric variable. For string   *variables, the given lengths are used if the variable is a new one. The  *display length of integer variables can be defined by the INT state-     *ments in the same way. New integer variables are created as one or       *two byte variables depending on the given length.                        *                                                                         *New variables (not existing in the Survo data file) not mentioned in     *STRING, REAL or INT statements are assumed to be integers and two        *bytes are reserved for each of them in the Survo data file (however,     *if the default display length of an integer variable is defined to be    *one by the option INTDEF, then only one byte is reserved). For old       *variables,  the information saved in the Survo data file is used  to de- *fine the field length.  @C                                               *The ordinary form is defined by the lines between the key words TEXT     *and ENDTEXT. The left margin of a standard field is given by the         *character & followed by the variable name. The length of the field is    *defined by the length of the variable. A one byte numeric variable may   *vary between 0 and 254, so a field length of 3 is used for it. Corre-    *spondingly for a two byte numeric variable a field length of 6 is used   *(values from -32768 to 32766). For real types of numeric variables a     *default field of length 7 (4 byte variable) or 14 (8 byte variable) is   *used. The field length of a string variable is the maximum length of     *the variable defined in the Survo data file if the length is not given   *in the STRING statement.     @C                                          *A form with selection fields:                                            *                                                                         *FORM(F3):                                                                *STRING: Dmost1(12),Dmost2(12),Dmost3(12);                                aSELECT:  @F1 3 TO Dmost1,Dmost2,Dmost3;                                  *ENDSELECT;                                                               *TEXT:                                                                    * 3. Which are the three most important export countries for your company?*    Select the countries in the order of importance:                     *                                                                         a    @F1<Sweden>          @F1<Norway>                                     a    @F1<Denamrk>         @F1<Germany>                                    a    @F1<England>         @F1<France>                                     a    @F1<Russia>          @F1<Italy>                                      a    @F1<Spain>           @F1<?>                                          a    @F1<Japan>           @F1<?>                                          a    @F1<United States>   @F1<?>                                          *                                                                         *ENDTEXT;                                                                 *ENDFORM;                                                                 *ENDOFFILE;  @C                                                           *                                                                         *If the form includes selection fields, then a SELECT statement is        *needed to declare the names for the variables, where the selected        *values will be saved. The statement starts with a symbol of the          aselection group. The symbol must start with the character @ and it must  *be a short name. A form may involve several groups of selection fields.  *Therefore, the groups are identified by a symbol. The name of the        *selection group is followed by the number of selections allowed. In the  *example, the user may choose 3 countries. The selections are saved in    *the order they have been done. The SELECT statement ends with the        *key word ENDSELECT.                                                      *                                                                         *In the TEXT statement, a selection field starts with the symbol of the   *corresponding selection group and the corresponding value to be saved    *is given between the characters < and >.   Free selection fields are     *given by <?>. The field length of a selection field is defined by the    *type of the corresponding variable.                                      *                                                                         *M = More information on FEDIT operation                                  %M=VFEDIT   @                                                             *@SELECT                                                                  *VCONDF?                                                                  *Conditional forms                                                        *                                                                         *The conditions for displaying a form are defined by logical statements   *given between COND and ENDCOND statements. Logical statments have        *the structure:                                                           *                                                                         *<logical statement> AND <logical statement> AND ...;                     *         or                                                              *<logical statement> OR <logical statement> OR ...;                       *                                                                         *Examples:                                                                *                                                                         *COND:  City='HELSINKI'  ENDCOND;                                         *COND:  Year=1991 AND Rooms>3  ENDCOND;                                   *COND:  City <> 'ESPOO' AND Area<=90  ENDCOND;                            *COND:  Vble1>=Vble2  OR  Vble1=0  ENDCOND;   @C                          *The relational operators in the COND statements are:                     *                                                                         *>   "greater than"                                                       *>=  "greater than or equal to"                                           *=   "equal to"                                                           *<=  "less than or equal to"                                              *<   "less than"                                                          *<>  "not equal"                                                          *!=       -"-                                                             *                                                                         *M = More information on FEDIT operation                                  %M=VFEDIT   @                                                             *@SELECT                                                                  *                                                                         *VFKEYS?                                                                  *The FEDIT keyboard                                                       *                                                                         *The cursor moves from one field to another field on a form from left     *to right and from top to bottom. However, the fields belonging to the    *same selection group are passed before other fields. The location of     *the first field in a selection group defines the order of that group     *compared to other fields or groups.                                      *                                                                         *The following list summarizes the special keys used in FEDIT. Note       *that some keys have slightly different meanings in standard and selec-   *tion fields.                                                             *                                                                         *Cursor Right  Standard fields: Moves the cursor one character to the     *              rigth in the field or to the next field if the right       *              margin of the field is exceeded.                           *              Selection fields: Moves the cursor to the next             *              selection field.                                           *Cursor Down   Moves the cursor to the next standard or selection         *              field in the form. @C                                      *Cursor Left   Standard fields: Moves the cursor one character to the     *              left in the field, or to the previous field if the left    *              margin of the field is exceeded.                           *              Selection fields: Moves the cursor to the previous         *              selection field.                                           *Cursor up     Moves the cursor to the previous field in the form.        *                                                                         *PgDn          The cursor is moved down by "one page" in the form, to the *              next form or to the next observation. If selection fields  *              in one group extend over several pages, moving is done     *              done within the same group.                                *PgUp          The cursor is moved up by "one page" in the same form or   *              to the previous form. If the cursor is on the first page   *              of the first form, then PgUp moves the cursor in the first *              form of the previous observation. If the cursor is in a    *              "long" selection group, moving is done within the same     *              group.  @C                                                 *Ctrl PgDn     The cursor is moved to the first form of the next          *              observation.                                               *Ctrl PgUp     The cursor is moved to the first form of the previous      *              observation.                                               *                                                                         *HOME          The cursor is moved to the first field on the current form.*END           The cursor is moved to that last field on the current form.*                                                                         *INS           Insert/overwrite mode toggle.                              *DEL           Standard fields: Deletes character at the cursor.          *              Selection fields: Deletes the selection at the cursor. All *              lower order selections are deleted too. E.g. if the first  *              selection is deleted, then all other selections will be    *              deleted, too.                                              *ESC           Interrupts the selection in one group (without             *              entering the maximum number of selections).                *                                                                         *BACKSPACE     First the character to the left of the cursor is erased    *              and then the cursor is moved one character to the left.    *                @C                                                       *ALT F5        Searches for a value of the variable indicated by the      *              cursor or moves to the given observation defined           *              by its sequence number. An old search may be repeat-       *              ed by using the Cursor Up key (the last 9 searches are     *              saved).                                                    *ALT F9        Inserts observations after the current observation.        *ALT F10       Deletes observations including the current observation.    *F2 - P        The current form is copied in the edit field.              *F1            Help for keys. The content of the help window depends      *              on the type of the field indicated by the cursor.          *F8            Exit                                                       *                                                                         *M = More information on FEDIT operation                                  %M=VFEDIT   @                                                             *@SELECT                                                                  *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         *                                                                         Shadows                                                                     7777777777777777777                                                      111111111111                                                           +  (                                                                      -                  1                                                      .           1                                                             /           1                                                             1                                                                   )     6  (                                                                      8                  1                                                      9           1                                                             :             1                                                           <                                                                   )     C  111111111111111111111111111                                            I  111 1111 1111                                                          P  1111111                                                                V  1111111111111111111                                                    \  111111111111111111111                                                  h  111111111111111                                                        j    1111111111111111111                                                  k    111 1111111111111111                                                 m     666666666666666                                                     q                 6666666666666666                                        s                                           666666                        u                                                        1111             ~  111111111111111111111111111111                                         €             11111111                                                    …                       1111111                                           ‰         1111111                                                                      1111                                                        ‘                111111                                                   —         111111111             1111111111                                ¤  111111111111111111111111                                               ´  111111111111111111111111111                                            ½  11111                                                                  ¿  11111111                                                               Ã  111111111                                                              Å  11111                                                                  Ç  11111111111                                                            É  1111111111                                                             ß  111111     1111                                                        â          6666  66666     66666                                          ç                                                            111          ò                                                                  1111   ó      1111111                       66666666 66666                       ô            1                                                                                  666666666 666666         111111                                                                              1            8     11111111111111111111                                               G 111111111111111111                                                     S               666666666666666                                          V               6666666666666666                                         Z               666666666666666                                          ]               6666666666666666                                         g                                       6666                             END                                                                       