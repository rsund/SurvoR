SURVO84ED 73 440    73 S60                                               *SAVE c:\e\q\EDQW7                                                       *VMFEDIT?                                                                *The MFEDIT operation   written by Markku Korhonen (HUCC)                *                                                                        *Editing and displaying several Survo data files at a time               *                                                                        *Further information:                                                    * 1 = Introduction, assignements for Survo data files                    * 2 = Fields on forms                                                    * 3 = Options in the MFEDIT operation                                    * 4 = Validity checks of field values (FEDIT and MFEDIT)                 * 5 = Designing the forms in MFEDIT                                      * 6 = Transformations in MFEDIT                                          * 7 = The MFEDIT keyboard                                                * 8 = Protection of (old) observations                                   *                                                                        * D = More on data analysis                                              * E = More information on SURVO 84 EDITOR                                *                                                                        %1=VMFINTRO 2=VMFIELDS 3=VMFOPTS 4=VMVALCHK 5=VMFRMDSG @                 %6=VMTRANSF 7=VMFKEYS? 8=VMFPROT D=STATIS?   E=EDITOR? @                 *@SELECT                                                                 *                                                                        *VMFINTRO?                                                               *Introduction                                                            *                                                                        *With the MFEDIT operation you may display and edit several SURVO 84C    *data files at a time. The condition for the operation is that there     *must be a relation between those data files. The relation is            *indicated by key variables.                                             * In the MFEDIT operation, information is displayed, edited and entered  *on forms in the same way as in the FEDIT operation. In MFEDIT each      *form may be divided into subforms. Different files may be assigned to   *subforms. The size of a form is not limited to the size of the          *screen. For instance, one may design a form which has 120 rows and      *100 columns.                                                            * Further, the user may have a set of forms which are displayed one at   *a time. When new values are entered, MFEDIT automatically checks that   *the values are not in contradiction with the type of the field.         *Additional validity checks may be defined, e.g. by listing valid        *values for some fields. @C                                              *                                                                        *The form of the MFEDIT operation is                                     *                                                                        *MFEDIT <form file>                                                      *FILE1=<Survo data file>(<list of keys>)                                 *FILE2=<Survo data file>(<list of keys>)                                 *...                                                                     *<options>                                                               *                                                                        *THE FORM FILE                                                           *The forms are defined by a separate ASCII file. Their maximum record    *length is 253 characters. Each form may be divided into subforms.       *Usually, each Survo data file has its one subform and within one        *subform, only variables of one data file are referred to. You can use   *the SURVO 84C editor to create and edit it (unlike FEDIT, MFEDIT        *cannot create a default form file). @C                                  *                                                                        *SURVO DATA FILES                                                        *Survo data files must be given in the order defined by their hie-       *rarchy (if such exists). All data files must exist; MFEDIT cannot       *create them. After the name of the data file the keys defining the      *relation between files are given in parentheses in such an order        *that the primary keys are given first.                                  *                                                                        *By default, the program expects that the corresponding keys have the    *same names in different files; otherwise the correspondency must be     *given. If that is not the case, then the correspondency is defined      *by giving both names separated by a vertical bar in either of the       *files (the name existing in that file must be given first), e.g.        *                                                                        *MFEDIT federat.txt                                                      *FILE1=Society(Scode|Society)                                            *FILE2=Persons(Personid)                                                 *FILE3=Members(Society,Personid)  @C                                     *Up to 7 assignments can be given to MFEDIT by the FILEn specifica-      *tions. Each assignment may refer to different files or some of them     *may refer to the same file. Up to 10 different key variables can        *exist in these assignments.                                             *                                                                        *By default, the program assumes that last file (given by FILE3 in the   *example) is of primary interest, here named as a target file. During    *the session, the target file can be changed by pressing the F4 key.     *                                                                        *OPTIONS                                                                 *With various options the user may specify the order in which the        *observations are shown, the preliminary work of the program, the size   *of the forms and some other limits of the program. One can also de-     *fine that lowercase letters should be changed to capital letters.  @C   *Fields on forms                                                         *                                                                        *Like FEDIT there are two kind of fields that may exist on forms:        *  (1) standard fields and                                               *  (2) selection fields.                                                 *                                                                        *   M = More information on MFEDIT operation                             %M=VMFEDIT @                                                             *@SELECT                                                                 *                                                                        *VMFIELDS?                                                               *Fields on forms: Two kind of fields may exist on forms:                 *                                                                        *  (1) standard fields and                                               *  (2) selection fields.                                                 *                                                                        *In standard fields, each field corresponds to a variable in a Survo     *data file. The desired value of the variable is written on the field.   *The field length is defined by the type of the variable.                *                                                                        *In the case of selection fields, the alternatives for values of a       *(group of) variable(s) are written on the form. The user selects one    *or more of the alternatives by pressing the Return key. The number of   *selections in a selection group equals to the number of variables in    *the Survo data file assigned to this selection group. Free selection    *fields may be used for those situations where all possible choices      *cannot be written out.                                                  *                                                                        *   M = More information on MFEDIT operation                             %M=VMFEDIT @                                                             *@SELECT                                                                 *                                                                        *VMFOPTS?                                                                *Options in the MFEDIT operation                                         *                                                                        *ORDER   If ORDER=ORIG is specified, then the observations in            *        the target file are displayed in the original order. During     *        the session, the user can switch back to the sorted order       *        by pressing F6 (if the sorted keys have been saved before).     *                                                                        *OPTIONS If OPTIONS=NOSORT is specified, then the key values are         *        are neither copied nor sorted in the memory. It follows         *        that the observations in the target file are displayed          *        in the original order only.                                     *                                                                        *CAPS    The default behaviour for changing the small letters @C         *MAXCOLS Maximum number of columns in the forms (49<maxcols<254)         *        (default: found maximum length; option rarely needed)           *MAXROWS Maximum number of rows in the forms (default: found             *        maximum number of rows; option rarely needed)                   *MAXCHOICES  Maximum number of selections in one group (default 50)      *                                                                        *SELECTGROUPS  IF SELECTGROUPS=ROWPAIR is specified and if several       *         selection groups (with a single selection) are located         *         one after the other then after the selection the cursor        *         is moved to the choice of the next group located in            *         the same row (if exists) - not to the first choice.            *                                                                        *         IF SELECTGROUPS=PAIRED is specified then the cursor is         *         moved to the choice of the next group having the same          *         order number (not necessarily in the same row).                *                                                                        *         For multi-selection groups SELECTGROUPS has no effect!         *                                                                        *   M = More information on MFEDIT operation                             %M=VMFEDIT @                                                             *@SELECT                                                                 *                                                                        *VMVALCHK?                                                               *Validity checks of field values (FEDIT and MFEDIT)                      *                                                                        *Validity checks for the entered values may be defined by RESTR          *statements in the form file.                                            *                                                                        *  For numeric variables, the minimum and maximum values or              *  a list of valid values may be given.                                  *                                                                        *  For string variables, only a list of valid strings can be given.      *                                                                        *Each RESTR statement ends with a ENDRESTR statement. These              *statements are placed after the ENDTEXT statement. @C                   *Examples:                                                               *                                                                        *RESTR:  MIN(vble1,vble2,vble3)=0;                                       *        MAX(vble1,vble2)=99; MAX(vble3)=999;                            *        vble4=0,1,2                                                     *        vble5=0(1)9                                                     *        vble6='AGFA','FUJI','KODAK';                                    *ENDRESTR;  @C                                                           *With one MIN or MAX definition, several variables having the same       *minimum (maximum) value may be given. Note that the string values       *are given in apostrophes. If the values of a numeric variable are       *equally spaced then an abbreviated notation may be used, e.g. the       *specification 0(1)9 yields the same as 0,1,2, ..., 9.                   *                                                                        *If validity checks are defined for a field and the type value does      *not fill the given conditions, an error message is given. Only valid    *values are written into the data file.                                  *                                                                        *The CAPS specification may be used to alter the default behaviour for   *each variable separately while small letters are entered. The default   *behaviour for all variables may be given by the CAPS option of the      *FEDIT or MFEDIT operation. Example:                                     *                                                                        *RESTR  CAPS(vble6,vble7,vble8)=Y   ENDRESTR;                            *                                                                        *The given value Y defines that for the three variables entered          *lowercase letters are transformed to capital letters. If the user       *had given the FEDIT option CAPS=1 in the edit field, then he might      *define for some variables that no transformation should be done.        *In that case, the letter N would be used instead of Y.                  *                                                                        *   F = More information on FEDIT operation                              *   M = More information on MFEDIT operation                             %F=VFEDIT?   M=VMFEDIT?  @                                               *@SELECT                                                                 *                                                                        *VMFRMDSG?                                                               *Designing the forms in MFEDIT                                           *                                                                        *The form definitions are given in MFEDIT by a separate ASCII file,      *a form file. The form is divided into subforms which are indicated      *by the SUBFORM and ENDSUBFORM statements. The structure of the form     *file in MFEDIT is the following:                                        *                                                                        *FORM(name of the form):                                                 *SUBFORM(name of subform): FILE <name of data file><protection opt>;     *SELECT:                                                                 *   < definition of variables corresponding to each                      *     (multi)selection group >                                           *ENDSELECT;                                                              *TRANSF:   <definition of automatic transformations>                     *ENDTRANSF;                                                              *TEXT:                                                                   *      <definition of the ordinary form>                                 *ENDTEXT;                                                                *RESTR:                                                                  *      <definition of valid variable values>                             *ENDRESTR;                                                               *ENDSUBFORM  @C                                                          *                                                                        *SUBFORM(name of 2. subform):  FILE <name of data file>;                 *  ....                                                                  *ENDSUBFORM                                                              *...                                                                     *ENDFORM;                                                                *FORM(name of the next form):                                            *...                                                                     *ENDFORM;                                                                *ENDOFFILE;                                                              *                                                                        *The form file in the following example consists of one form             *with two subforms: @C                                                   *                                                                        *FORM(F1):                                                               *SUBFORM(Customer)  FILE Customer;                                       *TEXT:                                                                   *  Customer I.D.: &Customid                                              *  First name: &Fname                                                    *  Last name:  &Lname                                                    *  Street: &Street                                                       *  Postal code: &Postcode    City: &City                                 *  Country: &Country                                                     *ENDTEXT;                                                                *ENDSUBFORM;                                                             *SUBFORM(Delivery)  FILE Delivery;                                       *TEXT:                                                                   *  Product code: &Prodcode            Customer code: &Customid           *  Date of delivery, Year: &Year  Month: &Month  Day: &Day               *  # of items deliverd: &Nofitems   Unit price: &Unitprce                *ENDTEXT;                                                                *ENDSUBFORM;                                                             *ENDFORM;                                                                *ENDOFFILE; @C                                                           *Each subform definition starts with SUBFORM keyword followed by a       *short name (maximum 8 characters) in parentheses. Next, the name of     *the Survo data file or logical reference (FILE1, FILE2 ...) is given    *by the FILE statement. The file (or logical) name may be followed       *by a protection option.  Each SUBFORM statement generates the           *upper border of the subform. The border consists of the name of         *the Survo data file, the current record sequenece number, the form      *and the subform names. The middle part of the border is reserved        *for certain status information (e.g. which file is the target file).    *                                                                        *Instead of the file name given in the FILE statement, the               *corresponding logical name (FILE1, FILE2) may be given. If the same     *data file is assigned to several forms, then logical names must be      *used for linking the subforms to the right FILEn specifications. @C     *The contents of the subform are defined by the lines between the key    *words TEXT and ENDTEXT:                                                 *                                                                        *    The left margin of a standard field is given by the character       *    & followed by the variable name. The length of the field is         *    defined by the length of the variable:                              *                                                                        *      1 byte numeric variable - field length is 3                       *      2         "                      "        6                       *      4 byte real type numeric variable - field length is 7             *      8         "                                 "      14             *      string variables - field length is the maximum length of          *      the variable defined in the Survo data file. @C                   *                                                                        *By default fields in a form refer to the Survo data file given by       *the FILE statement. However, a standard field may refer to another      *file too. In that case the logical file reference must be given         *after the variable name in parenthesis, e.g.                            *                                                                        *    &price(F1)    or   &price(FILE1)                                    *                                                                        *   If the subform includes selection fields, then a SELECT statement    *   is needed to declare the symbols of the selection groups, the        *   number of selections allowed and the names of variables, where       *   the selected values will be saved, e.g. (on the next page) @C        *FORM(F1):                                                               *SUBFORM(Persons)  FILE Persons;                                         *TEXT:                                                                   *  PERSON FORM:                                                          *  Person I.D.: &Personid                                                *  Family name: &Name1                                                   *  First name:  &Name2                                                   *  Street: &Street                                                       *  Postal code: &Postcode       City: &City                              *ENDTEXT;                                                                *ENDSUBFORM;  @C                                                         *SUBFORM(exhibits)  FILE exhibits;                                       aSELECT @1 1 TO Classif;  ENDSELECT;                                     *TEXT:                                                                   *  EXHIBITS                                                              *  Person I.D.: &Personid       Exhibit code: &Exhibcde                  *  Title of the exhibit: &Exhtitle                                       *                                                                        *  The classification of the exhibit:                                    a  @1<Traditional>    @1<Postal History>  @1<Postal Stationery>          a  @1<Aerophilately>  @1<Thematic>        @1<Maximaphily>                *  The 1st subclassification: &Subcl1                                    *  The 2nd subclassification: &Subcl2                                    *ENDTEXT;                                                                *ENDSUBFORM;  @C                                                         *SUBFORM(Particip)     FILE particip;                                    aSELECT @2 1 TO Class; @3 1 TO Prize; @4 1 TO Specprze; ENDSELECT;       *TEXT:                                                                   *  Participations to exhibits                                            *  Person I.D.: &Personid    Exhibit code: &Exhibcde                     *  Date of exhibition (yy-mm-dd): &Date                                  *  Exhibition name: &Exhname                                             a  Class:  @2<Champion>   @2<Competitive>                                *  Prize awarded:                                                        a   @3<LargeGold>   @3<Gold>   @3<LargeVermeil>  @3<Vermeil>             a   @3<LargeSilver> @3<Silver> @3<SilverBronze>  @3<Bronze>  @3<None>    a  Special Prize: @4<None>  @4<Special>  @4<Felicitat>                   *ENDTEXT;                                                                *ENDSUBFORM;                                                             *                                                                        *In the TEXT statement, a selection field starts with the symbol         *of the corresponding selection group (defined in SELECT statement)      *and the corresponding value to be saved is given between the            *characters < and >.  @C                                                 *Free selection fields are given by <?>. The field length of a           *selection field is defined by the type of the corresponding variable.   *                                                                        *Validity cehecks for field values may be defined by RESTR statements.   *                                                                        *M = More information on MFEDIT operation                                %M=VMFEDIT   @                                                           *@SELECT                                                                 *                                                                        *VMTRANSF?                                                               *Numerical transformations in FEDIT or MFEDIT may be defined by the      *TRANSF statement, which is placed before the TEXT statement. An example:*                                                                        *TRANSF: Newvbl1=(Score1-Score2)^2/(Score3-Score4)^2;                    *        Logsum=LOG(Price1+Price2+Price3); ENDTRANSF;                    *                                                                        *Note that each transformation ends with a semicolon. These              *transformation may involve besides arithemitic operations the           *following mathematical functions ABS, SQRT, EXP and LOG. If a           *variable used in arithmetic operations or in mathematical functions     *has a missing value then the resulting value is always missing. The     *missing values are handled differentely by the special functions MAX,   *MIN, SUM, MEAN and DEV, e.g. the statement                              *                                                                        *     Newvbl2=MEAN(Score1,Score2,Score3,Score4);                         *                                                                        *computes mean of the non-missing values of the four variables. @C       *A transformation may be conditioned by an if-then-else statement,       *e.g.                                                                    *                                                                        *TRANSF: If Price1>Price2 and Price3>Price4                              *           then X1=Price1+Price3 else X1=Price2+Price4;                 *          If City="HELSINKI" or City="Espoo"                            *           then Cityarea=1 else Cityarea=0;  ENDTRANSF;                 *                                                                        *For numeric variables the following six conditional operators are       *available:                                                              *                                                                        *  >    "greater than"                                                   *  >=   "greater than or equal to"                                       *  =    "equal to"                                                       *  <=   "less than or equal to"                                          *  <    "less than"                                                      *  <>   "not equal"  @C                                                  *                                                                        *String variables may be used in the conditional expression too (but     *not in the ordinary transformation statement). For string variables     *only the operators "equal" and "not equal" are available. Several       *conditions can be joined either by AND or OR operators but both types   *must not be used in the same if statement. The then and else parts      *may involve one transformation statement only.                          *                                                                        *To indicate missing values in transformations the symbol MISSING may    *be used, e.g.                                                           *                                                                        *TRANSF if Dpros=MISSING then Dpros=0;                                   *       if Treatmnt<1 then Treatmnt=MISSING; ENDTRANSF;                  *                                                                        *     By default, MFEDIT assumes that the variables used                 *     in transformatios refer to the default file of that subform.       *     Variables in other files may be referred by giving the logi-       *     cal file reference in brackets, e.g.                               *                                                                        *     TRANSF: Totprice=Nofitems*Unitprce[F2];  ENDTRANSF;  @C            *The defined transformations are computed for the current observations   *just before the form is shown on the screen and each time any of the    *fields on the form is changed. Therefore, the transformations must be   *such that they can be performed several times without getting wrong     *results. A necessary condition is that the left-hand and righthand      *sides of transformation equations have no common variable. The prog-    *ram does not check this feature!                                        *                                                                        *   F = More information on FEDIT operation                              *   M = More information on MFEDIT operation                             %F=VFEDIT?   M=VMFEDIT?  @                                               *@SELECT                                                                 *                                                                        *VMFPROT?                                                                *Earlier written observations may be protected against changes by        *mistake by adding the key word PROTECTED after file name in the         *FILE statement, e.g.                                                    *    FILE FILE1 PROTECTED;                                               *A given number of observations may be protected by stating the          *number of protected observations after the keyword:                     *    FILE FILE1 PROTECTED 266;                                           *At this moment the state of protection cannot be changed during         *the MFEDIT session.                                                     *                                                                        *M = More information on MFEDIT operation                                %M=VMFEDIT   @                                                           *@SELECT                                                                 *                                                                        *                                                                        *                                                                        Shadows                                                                    111111111111111111111                                                   111111111111                                                          I                     11111111                                           Z  111111111111111                                                       ]    1111111111111111111                                                 ^    111 1111111111111111                                                e  111111111111111                                                       g    1111111111111111111                                                 h    111 1111111111111111                                                j     666666666666666                                                    n                 6666666666666666                                       p                                              666666                    r                                                        1111            {  11111111111111111111111111111111                                                                          1111111111111111                    Ÿ  11111111111111111111111111111111                                      Ð  11111111111111111111111111111                                         ×  1111                                                                  Ø  1111111                                                               ß  11111                                                                 á  11111111                                                              å  1111111111                                                            ç  1111111                                                               ë  11111111                                                              ì  1111                                                                  î  1111111                                                               ï  1111111111                                                                           111111111111                                                                    1111111111111111                                    1                                                                 +                            1111111111111111                           ; 111111                   1111111111                                   B   111           1                                                     e 1111111111111111111111111                                             f 111111                                                                END                                                                      