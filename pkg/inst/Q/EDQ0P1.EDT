SURVO84ED 81 320    81 S20                                                       *SAVE EDQ0P1                                                                     *LOAD EDQ0P2                                                                     *                                                                                *PS?                                                                             *Printing and plotting on PostScript printers                                    *  I = General information                                                       *  D = PS.DEV driver                                                             *  F = Fonts                                                                     *  T = Correct alignment of text and tables                                      *  C = Characters in the control column                                          *  O = PostScript code in a print list                                           *  S = Special features                                                          *  A = Graphics (PLOT)                                                           *  K = Colors in PostScript printing/plotting                                    *  E = Encapsulated PostScript files                                             *  U = Altering the plotting unit (step)                                        C*  e = Printing of Euro (monetary unit) symbol                                  C*                                                                                *  V = Kirjoittimen valinta                                                      *  J = Selecting the PostScript printer                                          *  P = More information on PRINT operation                                       *  G = More information on PLOT operation                                        %I=GEN D=PSDR F=PSFONTS T=PSPRO? C=CCHAR O=PSCODE?                               %S=PSSPEC? A=PSPLOT? K=PSCOLOR E=EPSFILE? V=PS_KIRJ? J=SEL U=PSUNIT? e=EURO      %P=PRINT? G=PLOT?                                                                *@SELECT                                                                         *                                                                                *GEN?                                                                            *Survo supports PostScript printers in all forms of PRINT, PLOT and              *HISTO operations. The interface in Survo enables all the features               *provided by PostScript language to be employed in applications.                 *The user has no need to master the PostScript language, since all the           *functions and specifications related to printing and plotting have been         *converted to common notations used in Survo.                                    *However, in very demanding applications familiarity with PostScript             *programming may be useful.                                                      *The standard device driver is PS.DEV in the <Survo>\U\SYS directory.            *                                                                                *In PLOT and HISTO operations, a DEVICE specification of the form                *DEVICE=PS   (immediate plotting)                                                *or                                                                              *DEVICE=PS,<filename.PS>  (making a PostScript file)                             *must be supplied. The default driver is PS.DEV but it can be changed            *by giving in SURVO.APU ps_dev=<filename.DEV>.                                   *In PRINT operations, either                                                     *  - include PS.DEV                                                              *should be given as the first line in the print list or                          *the default driver has to be given in the SURVO.APU file in the                 *form print_dev=PS.DEV .                                                         *@C                                                                              *Complete documents are usually generated by a large PRINT scheme                *containing references to text chapters located in edit files and                *text files. Pictures made by PLOT operations and saved as PostScript            *files are included in those documents by - picture control lines.               *Text and pictures can be rescaled and rotated in the final output.              *The entire document produced by PRINT can be saved in a PostScript              *file, too (by PRINT L1,L2 TO <file.PS>).                                        *                                                                                *Since PostScript files are device-independent, the user can make drafts         *of the documents on small laser printers. After these test printouts the        *final document may be produced on a high-quality typesetter on the basis        *of the same PostScript file.                                                    *@G EE                                                                           *EE?                                                                             *  P = More information on PostScript printing/plotting                          %P=PS                                                                            *@SELECT                                                                         *                                                                                *PSDR?                                                                           *The PS.DEV driver in the <Survo>\U\SYS directory defines all the control        *words available for printing and plotting on PostScript printers.               *Thus all control words in brackets (like [LANDSCAPE] for 90 degree              *rotation) are defined in the beginning of PS.DEV by using other                 *control words or directly in PostScript code. At the end of this                *driver all the PostScript words and programs needed are listed.                 *                                                                                *You can view this driver by SHOW <Survo>\U\SYS\PS.DEV or print it on paper      *(provided that your Survo installation includes the PostScript option)          *by                                                                              * 11 *PRINT 12,13                                                                * 12 - [Courier(8)][line_spacing(8)]                                             * 13 - text <Survo>\U\SYS\PS.DEV                                                 *                                                                                *Supplementary PostScript drivers (to be used in connection with PS.DEV)         *are                                                                             *GCHAR.DV2    for graphic characters (drawing boxes around the text),            *MATH.DV2     for mathematical symbols,                                          *PSFONTS.DV2  for additional PostScript fonts.                                   *                                                                                *@G EE                                                                           *                                                                                *PSFONTS?                                                                        *Certain standard PostScript fonts with all possible font sizes are defined      *in PS.DEV and available by control words                                        * [TIMES(x)]     Times-Roman, x point text, x can have any positive value.       * [TIMESB(x)]    Times-Bold        [TIMESI(x)]    Times-Italic                   * [TIMESBI(x)]   Times-BoldItalic                                                * [SWISS(x)]     Helvetica         [SWISSB(x)]    Helvetica-Bold                 * [SWISSO(x)]    Helvetica-Oblique [SWISSBO(x)]   Helvetiva-BoldOblique          * [COURIER(x)]   Courier           [COURIERB(x)]  Courier-Bold                   * [COURIERO(x)]  Courier-Oblique   [COURIERBO(x)] Courier-BoldOblique            * [ZAPF(x)]      ZapfChancery-MediumItalic                                       * [ZAPFD]        ZapfDingbats (size according to last font selection)            * [SYMBOL]       Symbol       (size according to last font selection)            *More fonts can be defined similarly (see PS.DEV).                               *The shadow values 1=Bold and 6=Italic (or Oblique) determine the actual         *PostScript font according to the last font type selected.                       *                                                                                *  F = Additional fonts in PSFONTS.DV2                                           *  T = Adjusting lines according to current font                                 *  P = More information on PostScript printing/plotting                          %F=PSDV2 T=PSPRO? P=PS                                                           *@SELECT                                                                         *                                                                                *PSDV2?                                                                          *Additional PostScript fonts (available in most PS printers) become              *available by giving the control line                                            *    - include PSFONTS.DV2                                                       *in the PRINT list. This provides following fonts:                               * [Bookman(x)]   Bookman-Light         [Bookmand(x)]  Bookman-Demi               * [Bookmani(x)]  Bookman-LightItalic   [Bookmandi(x)] Bookman-DemiItalic         * [AvantGarde(x)] AvantGarde-Book      [AvantGardeBO(x)] AvantGarde-BookOblique  * [AvantGardeD(x)] AvantGarde-Demi     [AvantGardeDO(x)] AvantGarde-DemiOblique  * [NewCS(x)]   NewCenturySchlbk-Roman  [NewCSB(x)]  NewCenturySchlbk-Bold        * [NewCSI(x)]  NewCenturySchlbk-Italic [NewCSBI(x)] NewCenturySchlbk-BodItalic   * [Palatino(x)]  Palatino-Roman        [PalatinoB(x)] Palatino-Bold              * [PalatinoI(x)] Palatino-Italic       [PalatinoBI(x)] Palatino-BoldItalic       * [Swiss-Narrow(x)] Helvetica-Narrow   [SwissNB(x)]   Helvetica-Narrow-Bold      * [SwissNO(x)] Helvetica-Narrow-Oblique                                          * [SwissNBO(x)] Helvetica-Narrow-BoldOblique                                     *@G EE                                                                           *                                                                                *CCHAR?                                                                          *On PostScript printers the characters in the control column have                *following functions in the PRINT operation:                                     *Char.                                                                           *   -   a control line of control words in brackets [] and/or PostScript code.   *   /   start of a new page                                                      *   (   conditional start of a new page. If the chapter or the table             *       ending to a line with a ')' in the control column does not fit           *       in the current page (by using current line spacing), a new page          *       is started.                                                              *   T   tab line indicating positions of columns (See PSPRO?)                    *   U   suppresses temporarily the effect of a 'T' line and trimming.            *   C   line is to be centered according to current line width set by            *       a - [trim()] control word.                                               *   R   text to be moved to the right end of the line                            *   r   as R, but only for odd-numbered pages.                                   *   V   extends the line to full width set by - [trim()].                        *                                                                                *                                        (Continued on the next page)            *@C                                                                              *Characters in the control column (continued)                                    *Char.                                                                           *   <   start of first column in multiple column text output                     *   =   start of next column                                                     *   >   start of last column                                                     *   &   followed by an integer n, outputs n empty lines.                         *   %   followed by number x, moves next line down by extra x dmm.               *                                                                                *@G EE                                                                           *                                                                                *PSCOLOR?                                                                        *The Survo PostScript driver and the PRINT/PLOT operations support               *the CMYK (Cyan-Magenta-Yellow-Black) four color model.                          *The same color options can be used also in screen plotting since               C*[color(C,M,Y,K)] control code is available in GPLOT (from ver. 2.18).          C*In GPLOT, CMYK codes are converted to the RGB system (see COLORSYS?)           C*                                                                                *The fundamental control code for text and line colors is                        *   [color(C,M,Y,K)] where the parameters are in the interval (0,1)              *and give the intensities of the color components. 1 means full color.           *Certain basic colors are readily defined by means of this code in               *PS.DEV (and in CRT16.DEV for GPLOT). For example, in PS.DEV we have             *   define [GREEN] [color(1,0,1,0)]                                              *For other predefined colors, see PS.DEV (or CRT16.DEV in GPLOT).                *Example:  HEADER=[Swiss(24)][RED],Sample_of_100_observations                    *          XLABEL=[color(1,0.5,1,0)],Green                                       *                                                                                *A color chart of various CMYK colors is obtained as a PostScript file          C*by activating the sucro command                                                C*/COLORMAP-PRINT                                                                C*@C                                                                              *Fills in the SHADING specification can be extended to (additional)              *colors by using negative SHADING values -1,-2,-3,...                            *Each of them must be specified by a specification of the form                   *   FILL(-i)=C,M,Y,K    (obsolete form [FILL-i]=C,M,Y,K)                         *where i=-1,-2,-3,.. and C,M,Y,K are intensities from 0 to 1.                    *These negative fill values are also available in FRAMES specifications.         *                                                                                *A new better alternative is to use COLOR(n) specifications instead of          C*FILL(-n). (Example on the next page)                                           C*@C                                                                              *Example:                                                                        *...................                                                             *   DATA DATA1                                                                   *   Color C1 C2 C3 C4                                                            *   _      1  1  1  1                                                            *                                                                                *   PLOT DATA1 / DEVICE=PS,TEST.PS TYPE=%PIE                                     */GS-PDF TEST.PS                                                                 *   SHADING=1,2,3,4                                                              *   COLOR(1)=0,0,0,0 COLOR(2)=1,0,0,0 COLOR(3)=0,1,1,0 COLOR(4)=1,1,1,1          *   SIZE=1000,1000 XDIV=150,700,150 YDIV=150,700,150                             *   FRAMES=F F=100,100,800,800,5 COLOR(5)=0,0.4,0.7,0                            *............................                                                    *To provide compatibility with monochromatic PostScript devices,                 *the SHADING values from 0 to 9  (or from 0 to <shademax> given                  *by SHADEMAX=<shademax>) still give various intensities of gray                  *from white to black (in PLOT)                                                   *provided that no COLOR(n) specifications are given.                            C*@C                                                                              *In plotting families of curves, the COLOR_CHANGE specification is               *available as in GPLOT (see COLORCH?)                                            *The various colors are selected by COLOR(n) specifications,                     *i=1,2,...                                                                       *                                                                                *@G EE                                                                           *                                                                                *EURO?                                                                           *The symbol of Euro (European monetary unit) is represented in                   Sthe edit field by e (i.e. e with shadow character E).                           *The Survo PostScript driver PS.DEV outputs this character                       *as the Euro symbol.                                                             *If in certain applications the shadow `E' has been reserved for other           *purposes, it can be replaced by another character, say `y', by giving           *the following control lines in the PRINT list                                   *                                                                                *- [%euro_shadow=y]                                                              *- shadow y: [EURO0] [EURO][NORMAL]                                              *                                                                                *In exchange of different currencies Euro is represented by EUR.                 *For example (EUR:FIM)=5.94573                                                   *For the Finnish users:                                                         C*Pehmonapistosta l”ytyy uusi e-nappi, jolla voi muuntaa euroja markoiksi         *ja markkoja euroiksi hyvin helposti:                                            *Kirjoitetaan esim. 120 mk                                                       *ja kohdistimen ollessa mk:n per„ss„ (mk_) n„p„ytet„„n hiirell„ e-nappia.        *T„ll”in jatkoksi ilmestyy 120 mk (20.18 e) eli sama summa euroina.              *Vastaavasti muunnetaan esim. 20 e (118.91 mk).                                  *@G EE                                                                           *                                                                                *COLORSYS?                                                                       *The basic color system in Survo is CMYK (C=Cyan, M=Magenta, Y=Yellow,           *K=blacK) with intensities of each color component from 0 to 1.                  *It is supported in PostScript.                                                  *For example, (0,0,0,0) is white and (1,1,1,0) or (0,0,0,1) is black.            *(0,0,0,k) with 0<k<=1 is always safer for various shades of gray.               *On the screen the RGB (R=Red, G=Green, B=Blue) system is used.                  *There is no unique correspondence between these two color systems.              *More information e.g. from                                                      *http://dx.sheridan.com/advisor/cmyk_color.html                                  *                                                                                *Survo provides 3 different conversion rules selected by a RGB                   *specification.                                                                  *By default (RGB=1), in screen graphics of Survo the CMYK colors are             *converted to RGB by formulas                                                    *R=int(255*(1-min(1,C+K))),                                                      *G=int(255*(1-min(1,M+K))),                                                      *B=int(255*(1-min(1,Y+K))).                                                      *                                                                                *When Ghostscript is used for conversion of Survo PostScript files               *to the PDF format, the colors are exactly the same on the screen                *as the colors in GPLOT graphs created by this default setting (RGB=1).          *@C                                                                              *Surprisingly a complete match has not attained when Adobe Distiller             *is used for PS -> PDF conversion.                                               *                                                                                *Approximate matching occurs by using either RGB=2 or RGB=3 in GPLOT.            *                                                                                *For RGB=2 in GPLOT, the conversion formulas are                                 *R=int(255*(1-C)*(1-K)),                                                         *G=int(255*(1-M)*(1-K)),                                                         *B=int(255*(1-Y)*(1-K))                                                          *                                                                                *and for RGB=3 (default before ver. 1.28 of SURVO MM) they are                   *R=int(255*(1-(C+K)/s),                                                          *G=int(255*(1-(M+K)/s),                                                          *B=int(255*(1-(Y+K)/s)                                                           *where s=min(1,K+max(C,M,Y).                                                     *                                                                                *@END                                                                            *                                                                                *SEL?                                                                            *                                                                                *PostScript printer is selected in the file SURVO.APU by the line                *                                                                                *printer="Windows name of PostScript printer"                                    *For example,  printer="HP LaserJet 4M Plus"                                     *                                                                                *Default setting is printer=LPT1:                                                *which is usually valid for a PostScript printer directly connected              *to the computer.                                                                *                                                                                *The names of available printers can be listed in the edit field                 *simply by the command                                                           *INDEX /PRINTERS,END+2                                                           *                                                                                *Temporarily, the PostScript printer can be selected by giving the               *PRINT command in the form                                                       *                                                                                *PRINT L1,L2 TO "Windows name of PostScript printer"                             *                                                                                *@G EE                                                                           *                                                                                *                                                                                *                                                                                *................................................................................*                                                                                *                                                                                *PLOT Y(X)=A*X                                                                   *X=[line_width(30)],0(10)10                                                      *A=1(1)3                                                                         *COLOR_CHANGE=A                                                                  *COLOR(1)=1,0,1,0                                                                *COLOR(2)=0,1,1,0.3                                                              *COLOR(1)=0,0,1,0.5                                                              *DEVICE=PS,K.PS                                                                  */GS-PDF K.PS                                                                    *                                                                                Shadows                                                                          Þ                    E                                                           END                                                                              