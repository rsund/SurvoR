SURVO 84C SUCROS@  11@TEHT98       225@TEHT1       1323@TEHT2       3260@TEHT3       6905@TEHT4       7899@TEHT5      12751@TEHT6      20350@TEHT7      29926@TULOSTUS   31925@PSPLOT     32889@OPASTUS    33706@TÿüüTXS@TtC2@Ta1@büTIN1@C0@@@GS1@T!1@C0@@!T!1@CSURVOESI@;SUR-SAVE0@&üüüBSYSTEM SAVE€üBRESIZE€üBSOFTKEYS OFF€üBGPLOT /LAYOUT SUR_G1.SYS€üüBCD <Survo>\TUT€üi3hB>COPY TEHT98.TXT @3TEHT.TXT€üB>COPY ESITYS98.EDT @3ESITYS98.EDT€üBCD @3€üTXS1@LlBüLOAD ESITYS98,1,21,50€TXVD@LlTp                  Paina ENTER-nappia valinnan j„lkeen!@TXK@i2TKC3000@@1@1@LLTJ2@0@1@2@3@4@5@6@7@O@o@V@v@P@p@@GV0@GV1@GV2@GV3@GV4@GV5@GV6@GV7@GV0@GV0@GVV@GVV@GVP@GVP@GVD@TXV0@Tp@Ta-1@TL*-OPASTUS@TXV1@Tp@Ta-1@TL*-TEHT1@TXV2@Tp@Ta-1@TL*-TEHT2@TXV3@Tp@Ta-1@TL*-TEHT3@TXV4@Tp@Ta-1@TL*-TEHT4@TXV5@Tp@Ta-1@TL*-TEHT5@TXV6@Tp@Ta-1@TL*-TEHT6@TXV7@Tp@Ta-1@TL*-TEHT7@TXVV@BGPLOT /DEL ALL€üBSOFTKEYS€üBSYSTEM RESTORE€ü0oi2^BCD =€BLOAD @2START€Tp@T!1@C(menustart)@Ta-1@TLV@TXVP@Tp@üBGPLOT /DEL ALL€üBSOFTKEYS€üBSYSTEM RESTORE€üT!1@CSURVOESI@;SUR-RESTORETa-1@TLGE@TXE@Tÿ Teht„vien valinta                        S.Mustonen, 1998 (31.3.1998)



 SURVO 98-ikkunan j„ljittely ym.: (1.3.2001/SM)


















TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €>DEL *.SVO€ü>DEL *.DAF€üINIT 1000,100€   µµµµ Teht„v„ 1: Aineistojen siirto Ta-1@TW30@SHOW TEHT.TXT / Etsit„„n ensimm„inen teht„v„!TW20@TD2@€L2,7 TD0@DATAFIND TEHT.TXT,CUR+1 / Etsit„„n kaikki datataulukot!TW30@Tp        Tutkitaan taulukkoja ja talletetaan datatiedostoiksi.@TD2@€€TD0@X    TD2@€TD0@TW10@TW10@SHOW TEHT.DAF,46TD2@€TD0@TW20@TW10@TW10@56TD2@€TD0@KYMMENTD2@€TD0@±14107TD2@€TD0@KYMMEN2€±16158TD2@€TD0@RYHMAT1€±18311TD2@€TD0@RYHMAT2€±20787TD2@€TD0@NUORET€±221390TD2@€TD0@EXP2 €Tp        Katsellaan datatiedostoja!@FILE SHOW XTD2@€²TD0@FILE SHOW KYMMENTD2@€²TD0@±29º2TD2@€²TD0@FILE SHOW RYHMAT1TD2@€²TD0@±31º2TD2@€²TD0@FILE SHOW NUORETTD2@€²TD0@/ Lis„tt„v„ selv„kieliset muuttujien nimet!TW20@FILE SHOW EXP2TD2@€²TD0@Tp@.±Tp        Liitet„„n pitk„t muuttujanimet NUORET-tiedostoon.@SHOW TEHT.TXT / Etsit„„n nimet!TD2@€L111,149TD0@TW20@TD2@¹¹TD0@TW10@ºTD2@¹TD0@TW20@FILE STATUS NUORET / Poimitaan muuttujalista!TD2@€TD0@TD2@¹TD0@TW20@FILE UPDATE NUORET / P„ivitet„„n nimet (ylt„ kopioituina)!TD2@€TD0@TW10@Tp@FILE SHOW NUORETTD2@€²TD0@TW10@Kaikki perusaineistot siirretty Survon datatiedostoiksi!/ESITYS98-TULOSTUS Teht„v„ 1: Aineistojen siirtoüTp        Paina ENTER! (tai keskeyt„ napilla .)@TVC600@_.@@GE@Ta1@FILE DEL TEHT.DAF€Ta-1@T!1@C2@TL*-TEHT98@TXE@Tp@Tÿ


TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €üINIT 1000,100€   µµµµ Teht„v„ 2: Aineiston hallintaa Ta-1@TW30@SHOW TEHT.TXT / Etsit„„n toinen teht„v„!TW20@TD2@€L7,23TD0@.±TW100@Luodaan uusi XX-tiedosto lopullista aineistoa varten:TW10@Tarvitaan 1+160 muuttujaa ja 3+160 tavua kutakin havaintoa kohti.TW10@Tehd„„n t„m„ X-tiedoston rakenteen pohjalta:TW10@FILE STATUS XTD2@€TD0@CREATE XX,163,161TD2@€TD0@TW10@FILE SHOW XXTD2@€²TD0@FILE COPY X TO XXTD2@€TD0@FILE SHOW XXTD2@€²TD0@.±Kopioidaan X-aineistoa rinnakkain riitt„v„n monta kertaa seuraavasti:TW20@Poistetaan aluksi "Havainto" aktiivisten muuttujien joukosta:TW10@TD2@-²TD0@Rinnakkainkopiointi on helpointa TRANSFORM-komennolla n„in:TW10@TRANSFORM XX BY X AS A:1 / X-muuttujat kopioidaan AX-muuttujiksi.TD2@€TD0@Nyt XX-tiedostossa on 2 X-aineistoa rinnakkain:TW10@FILE SHOW XXTD2@€²TD0@Jatketaan samalla tavalla luomalla BX-muuttujat:TW10@TRANSFORM XX BY X AS B:1TD2@€TD0@Nyt XX-tiedostossa on 4 X-aineistoa rinnakkain:TW10@FILE SHOW XXTD2@€²TD0@Tehd„„n sama viel„ kahdesti:TW10@TRANSFORM XX BY X AS C:1TD2@€TD0@TRANSFORM XX BY X AS D:1TD2@€TD0@Nyt XX-tiedossa on vaaditut 16 X-aineistoa rinnakkain:TW10@FILE STATUS XXTD2@€TD0@TW10@SCRATCH TW10@€Palautetaan "Havainto" aktiiviseksi muuttujaksi:TW10@TD2@A²TD0@.±Jotta saataisiin havaintojen m„„r„ 128-kertaiseksi,TW10@k„ytet„„n FILE COPY -komentoa toistuvasti n„in:TW10@FILE DEL XX2         / Tyhjennet„„n aputiedosto XX2TD2@€TD0@FILE COPY XX TO XX2  / Kopioidaan XX2:een XXTD2@€TD0@FILE COPY XX TO XX2  / Kopioidaan XX uudelleen (havaintoja nyt 2*40)TD2@€TD0@FILE DEL XX3         / Tyhjennet„„n toinen aputiedosto XX3TD2@€TD0@FILE COPY XX2 TO XX3 / Kopioidaan XX2 XX3:eenTD2@€TD0@FILE COPY XX2 TO XX3 / Kopioidaan XX2 uudelleen (havaintoja nyt 4*40)TD2@€TD0@FILE DEL XX2         / Jatketaan samaan tyyliinTD2@€TD0@FILE COPY XX3 TO XX2Ta1@FILE COPY XX3 TO XX2 / Havaintoja nyt 8*40FILE DEL XX3FILE COPY XX2 TO XX3FILE COPY XX2 TO XX3 / Havaintoja 16*40FILE DEL XX2FILE COPY XX3 TO XX2FILE COPY XX3 TO XX2 / Havaintoja 32*40FILE DEL XX3FILE COPY XX2 TO XX3FILE COPY XX2 TO XX3 / Havaintoja 64*40FILE DEL XX2FILE COPY XX3 TO XX2FILE COPY XX3 TO XX2 / Havaintoja lopullinen m„„r„ eli 128*40=5120FILE DEL XX3Ta-1@TW30@TD2@€TD0@.±Lopullinen 160 muuttujan ja 5120 havainnon aineisto on tiedostossa XX2:TW10@FILE SHOW XX2TD2@€²TD0@Ennen tunnuslukujen laskentaa poistetaan "Havainto" aktiivistenmuuttujien joukosta:TW10@TD2@-²TD0@Lasketaan korrelaatiot (ja mitataan aikaa)TW10@TIMECORR XX2 / PRIND=0 RESULTS=0TIMEüTp        Computing correlations...@TD2@€TD0@Tp@/TDIFF€Wi1wµAikaa kului keskiarvojen, hajontojen ja korrelaatiokertoimienµlaskentaan #1 sekuntia.TW20@Katsellaan tulostiedostoja:TW10@/MATSHOW MSN.MTa-1@TD2@€€TD0@Tb0@/MATSHOW CORR.MTD2@€Ta1@€TD0@Tb0@TW10@µLopullisen aineiston XX2 tiedostokoko onTW10@INDEX XX2.SVO,CUR+1TD2@€TD0@Ta1@WWWWi2wint(@2/10000+0.5)/100=€ i2wBTa-1@µeli siis noin #2 megatavua.TW10@Jos tiedosto XX2.SVO tiivistet„„n ZIP-muotoiseksi, aineisto mahtuu86 kilotavuun./ESITYS98-TULOSTUS Teht„v„ 2: Aineiston hallintaaüTp        Paina ENTER! (tai keskeyt„ napilla .)@TVC600@_.@@GE@Ta1@FILE DEL XX*.SVO€FILE DEL *.M€Ta-1@T!1@C3@TL*-TEHT98@TXE@Tp@Tÿ


TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €üINIT 1000,100€   µµµµ Teht„v„ 3: Ep„lineaarinen regressiomalli Ta-1@TW30@SHOW TEHT.TXT / Etsit„„n kolmas teht„v„!TD2@€L70,80TD0@Survossa ep„lineaarista estimointia tehd„„n yleisell„ ESTIMATE-operaatiolla.TW10@Ep„lineaarinen malli kuvataan n„in:TW10@MODEL Malli1TD2@±10TD0@TW10@TW10@TW10@Parametrien alkuarvot annetaan luettelonaTW10@TD2@±12TD0@TW10@TW10@Varsinainen mallin estimointi tapahtuu (ottamalla samalla aikaa):TW10@TIMEESTIMATE EXP2,Malli1,CUR+4 / METHOD=M (Modified Newton method) PRIND=0TW10@TIMEüTp        Estimating parameters...@TD2@€TD0@Tp@/TDIFFTD2@€TD0@Wi1wµAikaa kului estimointiin #1 sekuntia.TW30@/ESITYS98-TULOSTUS Teht„v„ 3: Ep„lineaarinen regressiomalliüTp        Paina ENTER! (tai keskeyt„ napilla .)@TVC600@_.@@GE@T!1@C4@TL*-TEHT98@TXE@Tp@Tÿ


TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €üINIT 1000,100€   µµµµ Teht„v„ 4: Puuttuvan tiedon ongelma Ta-1@TW30@SHOW TEHT.TXT / Etsit„„n nelj„s teht„v„!TD2@€L80,92TD0@üAineiston KYMMEN faktorianalyysiTW10@Valitaan muuttujat:TW10@FILE ACT KYMMENTD2@€-²TD0@TW10@CORR KYMMEN / Lasketaan korrelaatiotTD2@€TD0@FACTA CORR.M,4 / Suurimman uskottavuuden faktorointiTD2@€TD0@ROTATE FACT.M,4,CUR+1 / Varimax-rotaatioTD2@€TD0@TW30@Kopioidaan rotatoitu faktorimatriisi AFACT.M matriisitiedostoon A:TW20@MAT A=AFACT.MTD2@€TD0@.±üPuuttuvia tietoja sis„lt„v„n KYMMEN2-aineiston k„sittelyTW10@Valitaan ensin analysoitavat muuttujat:TW10@FILE ACT KYMMEN2TD2@€-²TD0@TW10@Puuttuvat tiedot voivat aiheuttaa harhaa korrelaatioiden estimoinnissa.TW10@Kokeillaan eri keinoja.TW10@Aloitetaan tavallisella CORR-operaatiolla,TW5@ joka ottaa lukuun vaint„ydelliset havainnot:TW10@CORR KYMMEN2,CUR+1TD2@€TD0@TW30@C= i1w=SCRATCH TW10@€TW10@Korrelaatiot on siis laskettu vain T=1@C48@-@1@= t„ydellisest„ havainnosta.TW20@Tehd„„n faktorianalyysi n„iden korrelaatioiden (CORR.M) pohjalta.TW10@FACTA CORR.M,4 / ML-faktorointiTD2@€TD0@ROTATE FACT.M,4,CUR+1 / Varimax-rotaatioTD2@€TD0@TW30@TW10@Talletetaan t„m„ rotatoitu faktorimatriisi AFACT.M tiedostoon P1:TW10@MAT P1=AFACT.MTD2@€TD0@TW10@.±TW10@Tuloksen P1 vertaamisessa "oikeaan" faktorimatriisiin Ans. symmetrinen faktorianalyysi (Procrusteen menetelm„) onparas keino.TW20@Etsit„„n siis sellainen ortogonaalinen 4x4-matriisi L, jokaminimoi residuaalimatriisin E=P1*L-A alkioitten neli”summan.TW20@Survossa t„m„ tapahtuu sukrokomennolla /TRAN-SYMMETR.TW10@T>CA@/TRAN-SYMMETR P1,ATD2@€TD0@T<CA@Tb0@TW20@TD2@€TD0@TW30@Transformaatiomatriisi osoittaa faktorien vastaavan hyvin toisiaan.TW20@On kuitenkin t„rke„mp„„ tarkastella residuaalimatriisia E.MTW10@ jaerityisesti kokonaisresiduaalia (matriisin alkioiden neli”summaa).TW20@N„m„ tiedot saa mukavimmin esille seuraavalla komennollaTW10@MATRUN SUM2 E.MTD2@€TD0@TW30@WWWWWi1wKokonaisresiduaali on siis t„ss„ tapauksessa = .TW50@.±üKun aineistossa on puuttuvia tietoja, Survossa kannattaa yleens„k„ytt„„ CORRMV-operaatiota, jolla on eri optioita.TW50@Katsotaan, miten onnistutaan, kun korrelaatiot lasketaan kaikistamahdollisista muuttujapareista.TW30@CORRMV KYMMEN2 / METHOD=PAIRWISETD2@€TD0@FACTA CORR.M,4 / ML-faktorointiTD2@€TD0@ROTATE FACT.M,4,CUR+1 / Varimax-rotaatioTD2@€TD0@TW30@TW10@MAT P2=AFACT.M / Kopioidaan rotatoitu faktorimatriisi tiedostoon P2.TD2@€TD0@TW10@Verrataan t„t„ tulosta j„lleen alkuper„iseen.TW10@T>CA@/TRAN-SYMMETR P2,ATD2@€TD0@T<CA@Tb0@TW20@TD2@€TD0@TW20@Faktorien vastaavuus L-matriisin suhteen on hyv„.TW20@Miten on residuaalimatriisin laita?TW10@MATRUN SUM2 E.MTD2@€TD0@WWWWWi2wKokonaisresiduaali on nyt @2 eli huomattavasti pienempi kuinaikaisempi t„ydellisten havaintojen perusteella saatu = .TW50@.±üTW10@Ta1@Kokeillaanpa korrelaatioiden estimoinnissa viel„ er„„nlaistaEM-algoritmia. Siin„ puuttuvat havaintoarvot korvataan aluksiao. muuttujan keskiarvolla. Sen j„lkeen n„it„ "imputointeja"parannetaan iteratiivisesti. Jokaista puuttuvaa arvoaennustetaan lineaarisella regressiolla siten, ett„ aina kaikkimuut muuttujat ovat selitt„jin„.Iterointi on nopeaa, sill„ kullakin kierroksella tarvitseek„„nt„„ vain yhden kerran kaikkien muuttujien korrelaatiomatriisi.K„„nteismatriisista saadaan luetuksi kaikki tarvittava tieto.CORRMV soveltaa t„t„ menettely„ oletusarvoisesti.Ta-1@Tp        Paina ENTER!@TVC1200@_@@Tp@CORRMV KYMMEN2TD2@€TD0@FACTA CORR.M,4 / ML-faktorointiTD2@€TD0@ROTATE FACT.M,4,CUR+1 / Varimax-rotaatioTD2@€TD0@MAT P3=AFACT.M / P3 on rotatoitu faktorimatriisi.TD2@€TD0@T>CA@/TRAN-SYMMETR P3,ATD2@€TD0@T<CA@Tb0@TD2@€TD0@TW10@Faktorien vastaavuus on hyv„.TW30@Tutkitaan j„lleen residuaalimatriisia E.M:TW10@MATRUN SUM2 E.MTD2@€TD0@WWWWWi3wTW30@Kokonaisresiduaali on nyt @3 eli hieman viel„ pienempi kuinparittaisista korrelaatioista laskettu @2 ja olennaisestipienempi kuin t„ydellisist„ havainnoista saatu = ./ESITYS98-TULOSTUS Teht„v„ 4: Puuttuvan tiedon ongelmaüTp        Paina ENTER! (tai keskeyt„ napilla .)@TVC600@_.@@GE@Ta1@FILE DEL *.M€FILE DEL *.MAT€Ta-1@T!1@C5@TL*-TEHT98@TXE@Tp@Tÿ





TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €üFILE REDUCE NUORET 39€üINIT 1000,100,100€   µµµµ Teht„v„ 5: Erotteluanalyysi Ta-1@TW30@SHOW TEHT.TXT / Etsit„„n viides teht„v„!TD2@€L92,109TD0@.±TW50@FILE ACT NUORET / Valitaan muuttujatTD2@€-²TD0@TW20@Lasketaan ryhmitt„in (EOS=13, KOK=3, VIH=6) keskiarvot, hajonnat jakorrelaatiot.TW20@üTW10@CORR NUORET / IND=VOTENOW,13TD2@€TD0@MAT R_EOS=CORR.M / R_EOS on ryhm„n EOS korrelaatiomatriisi.TD2@€TD0@MAT M_EOS=MSN.M  / M_EOS on vastaava keskiarvojen ja hajontojen matr.TD2@€TD0@.±CORR NUORET / IND=VOTENOW,3TD2@€TD0@MAT R_KOK=CORR.M / R_KOK on ryhm„n KOK korrelaatiomatriisi.TD2@€TD0@MAT M_KOK=MSN.M  / M_KOK on vastaava keskiarvojen ja hajontojen matr.TD2@€TD0@.±CORR NUORET / IND=VOTENOW,6TD2@€TD0@MAT R_VIH=CORR.M / R_VIH on ryhm„n VIH korrelaatiomatriisi.TD2@€TD0@MAT M_VIH=MSN.M  / M_VIH on vastaava keskiarvojen ja hajontojen matr.TD2@€TD0@.±üTehd„„n erotteluanalyysi seuraavasti:TW10@CORR=R_EOS,R_KOK,R_VIHTW10@MSN=M_EOS,M_KOK,M_VIHTW10@/DISCRITD2@€TD0@Tb0@TW50@TW10@Saatiin kaksi vahvaa erottelumuuttujaa.TW10@Lasketaan niiden arvot LINCO-operaatiolla muuttujiksi D1 ja D2.TW10@LINCO NUORET,DISCRL.M(D1,D2)TD2@€TD0@.±TW10@Piirret„„n havaintopisteet erotteluavaruuteen.TW10@T„t„ varten katsotaan ensin muuttujien D1 ja D2 vaihteluv„lit.TW10@STAT NUORET,CUR+1 / VARS=D1,D2 RESULTS=0TD2@€TD0@µ            µ            µ             µ            TW20@.±üATW10@ XSCALE=0(1)6 YSCALE=-3.5:_,-3(1)4,4.5:_ MODE=VGATW10@ XDIV=2,20,1 YDIV=1,10,1 XLABEL=  YLABEL=TW10@ HEADER=Ryhm„t_EOS,_KOK_ja_VIH_erotteluavaruudessaTW10@  WAIT=10TW10@ CONTOUR=0.01,0.5 (puolet ryhm„n havainnoista hajontaellipsin sis„„n)TW10@Ryhm„t piirret„„n kerrostaen: OUTFILE=ATW10@GPLOT NUORET,D1,D2 / POINT=[RED][Swiss(6)],E IND=VOTENOW,13ü@!T!1@CEROT1.PS@T!2@C1500@T!3@C1200@T!4@C0@;*-PSPLOT0@&üTD2@€TD0@GPLOT NUORET,D1,D2 / POINT=[BLUE][Swiss(6)],K IND=VOTENOW,3 INFILE=Aü@!T!1@CEROT2.PS@T!2@C1500@T!3@C1200@T!4@C0@;*-PSPLOT0@&üTD2@€TD0@GPLOT NUORET,D1,D2 / POINT=[GREEN][Swiss(6)],V IND=VOTENOW,6 INFILE=Aü@!T!1@CEROT3.PS@T!2@C1500@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@D1 saa suuria arvoja KOK-ryhm„ss„ ja pieni„ EOS-ryhm„ss„.TW10@D2 vuorostaan erottaa VIH-ryhm„n (suuret arvot) muista ryhmist„.TW10@Tarkastetaan t„m„ viel„ kuvasta:TW10@GPLOT FILE A / WAIT=60TD2@€TD0@.±üTutkitaan t„m„n tulkinnan varassa erottelumuuttujien ja alkuper„isten muuttujien korrelaatiomatriisia DISCRXR.M .LIMITS=-0.6,-0.3,-0.2,0.2,0.3,0.6,1TW10@SHADOWS=8,7,1,0,1,7,8TW10@LOADM DISCRXR.M,12.123,CUR+1TD2@€TD0@TW10@Tarkastelujen helpottamiseksi poimitaan taulukon viereenmuuttujien selitykset:TW10@FILE STATUS NUORETTD2@€TD0@TD2@¹¹TD0@TW10@TD2@¹TD0@TW10@TD2@¹TD0@SCRATCH TD2@€TD0@Korrelaatiot voi lajitella suuruutensa mukaan kumman sarakkeensuhteen tahansa.TW10@ Tehd„„n n„in sek„ D1:n ett„ D2:n suhteen:üTW10@TW20@XTW10@TW10@SORT X,CUR-2,CUR-1,STW10@TW10@111111TW10@TD2@€TD0@Muistaen, ett„ D1 erottelee ryhmi„ KOK ja EOS, n„hd„„n siis, ett„kokoomuslaisten "aatemaailmaa" kuvaavat l„hinn„ ominaisuudetTW10@TD2@¹¹TD0@TW10@TD2@¹TD0@TW10@TD2@¹TD0@TW10@TW10@ja vailla puoluekantaa olevia ominaisuudetTW10@TD2@¹¹TD0@TW10@TD2@¹TD0@TW10@TD2@¹TD0@TW30@TW10@Vastaavasti lajittelemalla D2:n suhteenTW10@TW10@       TW10@TD2@€TD0@TW30@TD2@¹¹TD0@TW10@TD2@¹TD0@TW10@TW10@"vihreille" ominaisia asenteita ovatTW10@TD2@¹TD0@TW10@TW10@ja n„ille vastakkaisia (EOS ja KOK)TW10@TD2@¹¹TD0@TW10@TD2@¹TD0@TW10@TD2@¹TD0@TW10@.±üTW10@TW10@Vaikka ryhm„t kuvista p„„tellen n„ytt„v„t olevan hajalla kuinakanat tuulessa, kannattaa silti katsoa, miten hyvin havainnottulevat luokitelluksi "oikeisiin" ryhmiins„.TW20@Hajontaellipsit ovat hieman erikokoisia, joten luokittelu kannattaneeperustaa ryhm„kohtaisiin kovarianssirakenteisiin.TW10@Olisi mahdollista k„ytt„„ samanaikaisesti eri luokitteluperusteita,mutta tyydyt„„n t„ss„ pelkkiin Mahalanobis-et„isyyksiin.TW10@Survossa t„llainen luokittelu tapahtuu CLASSI-operaatiolla.TW10@Ensin muodostetaan luokittelua kuvaava muuttuja, vaikkapa MAHAL:TW10@VAR MAHAL:1=0 TO NUORETTD2@€TD0@TW10@FILE ACT NUORET / Aktivoidaan se merkill„ d:TD2@€d²TD0@TW10@Havainnot luokitellaan mukavimmin perustuen „skeisen /DISCRI-operaationtuottamiin erottelumuuttujien kovarianssirakenteisiin, joiden matriisi-nimet ovat samat kuin alkuper„isten vastaavien, mutta nimen edess„ onD.TW30@CORR=DR_EOS,DR_KOK,DR_VIH / Erottelumuuttujien korrelaatiot ryhmitt„inTW10@MSN=DM_EOS,DM_KOK,DM_VIH  / Vastaavat keskiarvot ja hajonnatTW10@COEFF=DISCRL.M / K„ytet„„n /DISCRI:n antamaa kerroinmatriisia.TW10@CLASSI NUORET / Luokittelu siis Mahalanobis-et„isyyksien mukaanTD2@€TD0@TW10@üTW10@Taulukoidaan luokittelutulos:TW10@TAB NUORET,CUR+4 / VARIABLES=MAHAL,VOTENOWTW10@    MAHAL=0,1(EOS),2(KOK),3(VIH)TW10@    VOTENOW=0,1,2,3(KOK),4,5,6(VIH),7,8,9,10,11,12,13(EOS)TW10@TD2@€TD0@TW10@TW30@TW10@TW10@Osoitetaan "oikein" luokitellut havainnot.TW10@TW10@µµµµ  TW10@TW10@  TW10@TW10@   TW30@TW10@Lasketaan niiden suhteellinen osuus ryhmitt„in (kosketuslaskennalla).TW10@TW10@summa  suht.osuusTW10@TW20@´+++=+/=+++=+/=+++=+/=TW10@Luokittelu onnistui noin 70-prosenttisesti, mutta muistettakoon, ett„se tehtiin havainnoilla, jotka itse m„„r„siv„t luokittelijat.TW10@Todellinen onnistuneisuus j„„ heikommaksi.TW10@/ESITYS98-TULOSTUS Teht„v„ 5: ErotteluanalyysiüTp        Paina ENTER! (tai keskeyt„ napilla .)@TVC600@_.@@GE@Ta1@üGPLOT /DEL ALL€üFILE DEL *.M€FILE DEL *.MAT€FILE DEL EROT*.PS€Ta-1@T!1@C6@TL*-TEHT98@TXE@Tp@Tÿ

















TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €üINIT 1000,100,100€   µµµµ Teht„v„ 6: Ryhmittelyanalyysit Ta-1@TW30@SHOW TEHT.TXT / Etsit„„n kuudes teht„v„!TD2@€L153,160TD0@TW30@Tarkastellaan aluksi aineistoa RYHMAT1.TW10@Piirret„„n kuva:TW10@GPLOT RYHMAT1,X,Y / MODE=VGA WAIT=30ü@!T!1@CRYHM11.PS@T!2@C1200@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@Kuvasta erottunee suhteellisen hyvin 3 pitkulaista ryhm„„.TW10@Katsotaan uudelleen.TW10@TD2@€TD0@TW10@Osoittautuu, ett„ useimmat ryhmittelymenetelm„t eiv„t pysty n„kem„„ntilannetta "aivan oikein".TW10@.±TW10@Kokeillaan eri menetelmi„ aloittamalla Wilksin lambda-kriteeriinperustuvalla (Pekka Korhosen kehitt„m„ll„) askeltavalla tilastollisellaryhmittelyll„ (Survossa CLUSTER-operaatio).TW40@Ryhmittelytuloksia varten tarvitaan lis„muuttuja:TW10@VAR Ryhm„:1=0 TO RYHMAT1TD2@€TD0@TW10@Valitaan ryhmittelyn kohteena olevat muuttujat (A) ja ryhmittely-muuttuja (G).TW10@FILE ACT RYHMAT1TD2@€AAG²TD0@TW10@Nyt ryhmitell„„n (toistaen askeltava menettely per„ti 100 kertaa):TW10@CLUSTER RYHMAT1,CUR+1 / GROUPS=3 TRIALS=100 SEED=1998TD2@€TD0@TW10@TW30@Jokainen 100 yrityksest„ johti siis samaan ratkaisuun.TW20@.±TW10@Katsellaan tulosta kuvasta.TW10@GPLOT RYHMAT1,X,Y / POINT=Ryhm„ MODE=VGA WAIT=30ü@!T!1@CRYHM12.PS@T!2@C1200@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@Koska t„m„ menetelm„ olettaa ryhmien kovarianssirakenteet samoiksi,mutta t„ss„ ryhm„n 2 korrelaatiokerroin on vastakkainen muihin n„hden,tulos ei voi olla paras mahdollinen. Osa ryhmien 2 ja 3 havainnoistasekaantuu ryhm„„n 1.TW50@ Katsotaan uudelleen.TW10@TD2@€TD0@TW30@.±TW10@Kokeillaan seuraavaksi ns. medoidimenetelm„„, joka on sukua k-means-tekniikalle, mutta t„t„ robustimpi.TW20@Medoidiratkaisu syntyy DCLUSTER-operaatiolla oletusarvoisesti.TW10@Ensin tulee kuitenkin laskea kaikkien havaintojen v„linen et„isyys-matriisi, joka t„ss„ tapauksessa on 150x150-kokoinen.TW20@ Matriisilasketaan DIST-operaatiolla ja et„isyydet ovat euklidisia, elleitoisin m„„r„t„ MEASURE-t„smennyksell„.TW20@DIST RYHMAT1,D150 / VARS=X,YTD2@€TD0@TW10@DCLUSTER RYHMAT1,D150,CUR+1 / GROUPS=3 VARS=X(A),Y(A),Ryhm„(G)TD2@€TD0@TW20@TW10@Katsellaan tulosta j„lleen kuvasta.TW10@GPLOT RYHMAT1,X,Y / POINT=Ryhm„ MODE=VGA WAIT=30ü@!T!1@CRYHM13.PS@T!2@C1200@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@Tulos on hieman samanlainen kuin aikaisemmin.TW10@ Lis„ksi yksi ryhm„n 1havainto („„rimm„inen oikealla) on pujahtanut ryhm„„n 2, koska seon l„hemp„n„ sen medoidipistett„.TW20@ Katsotaan uudelleen.TW10@TD2@€TD0@.±Kartoittaaksemme periaatteessa erilaisia ratkaisutapoja katsotaan,miten yksinkertainen l„himm„n "naapurin" menetelm„ (nearest neighbour,single linkage) toimii.TW30@Survossa ko. menetelm„ (muiden hierarkisten ohella) on mukanaHCLUSTER-operaatiossa (Fredrik berg), mutta suurilla aineistoillaon n„pp„r„mpi soveltaa DCLUSTER-operaatiota t„smennyksell„ METHOD=3.TW30@L„ht”kohtana (medoidimenetelm„n tapaan) on et„isyysmatriisi D150.DCLUSTER RYHMAT1,D150,CUR+1 / METHOD=3 GROUPS=3TD2@€TD0@Kuten jo tulostaulukosta (ryhm„koot 148,1 ja 1) n„kyy, t„ss„ k„ytodella huonosti.TW20@ Havainnot kasautuvat kahta "poikkeuksellista"lukuunottamatta yhteen ryhm„„n.TW10@ T„m„ n„kyy kuvasta:TW10@GPLOT RYHMAT1,X,Y / POINT=Ryhm„ MODE=VGA WAIT=30ü@!T!1@CRYHM14.PS@T!2@C1200@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@TW10@L„himm„n naapurin menetelm„n tunnettu heikkous tulee selv„sti esiin.TW10@Ryhmien v„liss„ olevat havainnot synnytt„v„t helposti "siltoja",joilla selv„sti erillisetkin ryhm„t kytkeytyv„t toisiinsa.TW20@.±TW10@TW10@V„hent„„kseni ko. menetelm„n tuota heikkoutta olen liitt„nyt DCLUSTER-operaatioon paino- (WEIGHT) option, jolla pyrit„„n est„m„„n "suurien"ryhmien kiinniliimautuminen.TW20@ P„„ajatus on se, ett„ ryhm„kokojen ollessaN1 ja N2 niiden et„isyytt„ rasitetaan painolla, joka on verrannollinenpienemp„„n luvuista N1,N2.TW30@Kokeillaanpa t„t„ keinoa.TW10@DCLUSTER RYHMAT1,D150,CUR+1 / METHOD=3 WEIGHT=1 GROUPS=3TD2@€TD0@TW10@TW10@Ryhm„koot lupaavat jo hyv„„ ja katsomalla tulosta kuvastaTW10@GPLOT RYHMAT1,X,Y / POINT=Ryhm„ MODE=VGA WAIT=30ü@!T!1@CRYHM15.PS@T!2@C1200@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@TW10@havaitaan, ett„ tulos on "oikea".TW10@.±üTa1@FILE REDUCE RYHMAT2 4€Ta-1@üTW10@Siirryt„„n tarkastelemaan aineistoa RYHMAT2, jossa on 4 muuttujaa.TW10@T„ll”in on hyv„ aloittaa piirt„m„ll„ hajontakuvamatriisi.TW10@GPLOT RYHMAT2 / TYPE=DRAFTS MODE=VGA WAIT=30ü@!T!1@CRYHM21.PS@T!2@C1200@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@Kaikki projektiot n„ytt„v„t hyvin samanlaisilta,mutta kannattaa kiinnitt„„ huomiota siihen, etteiv„t ne ole tasaisen"harmaita", vaan jokaisesta l”ytyy keskelt„ tihe„mm„ntuntuinenpisteparvi.TW20@ Katsotaan uudelleen.TW10@€Kyseess„ on ilmeisesti kaksi "rengasmaista" sis„kk„ist„ ryhm„„.TW10@Nyt ei ole mit„„n toivoa l”yt„„ ratkaisua sellaisilla ryhmittely-menetelmill„, jotka edellytt„v„t ryhmien keskipisteiden (tai medoidien)sijaitsevan selv„sti toisistaan erill„„n.TW10@ T„ss„h„n keskipisteetn„ytt„v„t yhtyv„n.TW30@Osoittautuu, ett„ „sken huonosti menestynyt l„himm„n naapurinmenetelm„ on t„ss„ tilanteessa aivan omaa luokkaansa.TW20@.±TW10@Lasketaan ensin 473x473-et„isyysmatriisi D:TW10@DIST RYHMAT2,DTD2@€TD0@Muodostetaan ryhmittelytulosta kuvaava muuttuja vaikkapa nimelt„„n R:TW10@VAR R:1=0 TO RYHMAT2TD2@€TD0@TW10@Nyt sitten ryhmittelem„„n:TW10@DCLUSTER RYHMAT2,D,CUR+1 / METHOD=3 VARS=X1(A),X2(A),X3(A),X4(A),R(G)üTp        Painamalla nappia "." n„et ryhmittelyn etenemisen.@TD2@€TD0@Tp@TW50@Katsotaan, milt„ t„m„ ryhmitys n„ytt„„ kuvissa.TW10@Ensin kaikki havainnot vihre„ll„:TW10@GPLOT RYHMAT2 / TYPE=DRAFTS VARS=X1,X2,X3,X4 POINT=[GREEN],1,1                MODE=VGA WAIT=30 OUTSCALE=SKAALAT OUTFILE=Bü@!T!1@CRYHM22.PS@T!2@C1200@T!3@C1200@T!4@C0@;*-PSPLOT0@&üTD2@€TD0@.±Sitten pienemm„n ryhm„n (2) havainnot p„„lle punaisella:TW10@GPLOT RYHMAT2 / TYPE=DRAFTS VARS=X1,X2,X3,X4 POINT=[RED],1,1                MODE=VGA WAIT=30 INSCALE=SKAALAT INFILE=B IND=R,2ü@!T!1@CRYHM23.PS@T!2@C1200@T!3@C1200@T!4@C2@;*-PSPLOT0@&üTD2@€TD0@TW10@Ryhm„ 2 koostuu siis todella koko aineiston keskustassa olevistahavainnoista.TW20@.±TW10@Ryhmien selke„„ erottumista voi havainnollistaa viel„ p„„komponentti-analyysilla.TW10@Kopioidaan ensin aineisto tilavampaan paikkaan:TW10@üüüTa1@GPLOT /DEL ALL€BTa-1@üüFILE DEL RYHMAT0€FILE COPY RYHMAT2 TO RYHMAT0 / NEWSPACE=24,6€FILE DEL RYHMAT2€>REN RYHMAT0.SVO RYHMAT2.SVO€TW20@Lasketaan keskiarvot, hajonnat ja korrelaatiot koko aineistosta.TW10@CORR RYHMAT2 / VARS=X1,X2,X3,X4TD2@€TD0@TW10@Lasketaan kaikki 4 p„„komponenttia.TW10@/PCOMPCOV CORR.M,MSN.M,4TD2@€TD0@Tb0@TW30@Lasketaan p„„komponenttipistem„„r„t muuttujiksi P1-P4.TW10@LINCO RYHMAT2,PCOEFF.M(P1,P2,P3,P4)TD2@€TD0@TW10@TW10@Standardoidaan p„„komponenttimuuttujat P1-P4:TW10@TRANSFORM RYHMAT2 BY STD / VARS=P1,P2,P3,P4TD2@€TD0@TW10@TW20@Lasketaan pisteiden (P1,P2,P3,P4) et„isyydet r origosta:TW10@VAR r=sqrt(P1*P1+P2*P2+P3*P3+P4*P4) TO RYHMAT2TD2@€TD0@TW10@.±TW10@Piirret„„n muuttujan r histogramma ryhmitt„in (R=1 tai 2) samaan kuvaan,ryhm„ 1 vihrein ja ryhm„ 2 punaisin pylv„in:TW10@ WAIT=30 MODE=VGAGHISTO RYHMAT2,r / r=0(0.05)3 IND=R,1 FILL=2 OUTFILE=C YSCALE=0(10)60ü@!T!1@CRYHM24.PS@T!2@C1200@T!3@C1200@T!4@C0@;*-PSPLOT0@&üTD2@€TD0@TW10@GHISTO RYHMAT2,r /            IND=R,2 FILL=3 INFILE=Cü@!T!1@CRYHM25.PS@T!2@C1200@T!3@C1200@T!4@C1@;*-PSPLOT0@&üTD2@€TD0@TW10@T„st„ n„htiin, miten selke„sti ryhm„t lopultakin erottuvat.Katsotaan uudelleen.GPLOT FILE CTD2@€TD0@TW10@.±TW10@Žskeinen siirtyminen yksiulotteiseen, origosta laskettuun et„isyyteenr perustuva tarkastelu voidaan Survossa tehd„ viel„ yksinkertaisemminlaskemalla suoraan alkuper„isten muuttujien X1-X4 Mahalanobis-et„isyydet MAHAL-operaatiolla.TW30@Ensin luodaan tarvittava uusi muuttuja r2.TW10@VAR r2:4=0 TO RYHMAT2TD2@€TD0@Sitten pannaan toimeksi MAHAL-komennolla:TW10@MAHAL RYHMAT2 / VARS=X1(A),X2(A),X3(A),X4(A),r2(D)TD2@€TD0@Mahalanobis-et„isyys on itse asiassa neli”llinen suure, joten siit„kannattaa ottaa neli”juuri:TW10@VAR r2=sqrt(r2) TO RYHMAT2TD2@€TD0@Tutkitaan, miten tarkkaan r ja r2 vastaavat toisiaan:TW10@CORR RYHMAT2,CUR+1 / VARS=r,r2TD2@€TD0@TW30@TW10@µMuuttujat r ja r2 ovat samat!TW20@TW10@Aineistoa RYHMAT2 koskevan ryhmittelyongelman yksinkertaisinratkaisu on t„ten laskea Mahalanobis-et„isyydet ja katsoa niist„piirretty„ histogrammaa:TW10@GPLOT FILE C / MODE=VGA WAIT=30TD2@€TD0@TW10@/ESITYS98-TULOSTUS Teht„v„ 6: RyhmittelyanalyysitüTp        Paina ENTER! (tai keskeyt„ napilla .)@TVC600@_.@@GE@Ta1@üGPLOT /DEL ALL€üFILE DEL *.M€FILE DEL *.MAT€FILE DEL RYHM*.PS€Ta-1@T!1@C7@TL*-TEHT98@TXE@Tp@Tÿ




















 Kuvaikkunat suljettava, jotta tiedosto RYHMAT2 vapautuisi
 SURVO MM:ss„ 1.3.2001/SM









TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €üINIT 1000,100,100€   µµµµ Teht„v„ 7: Simulointikoe Ta-1@TW30@SHOW TEHT.TXT / Etsit„„n seitsem„s teht„v„!TD2@€L160,173TD0@TW10@.±TW10@p=100 r=0.3TW10@MAT R=ZER(p,p) / Tehd„„n pxp 0-matriisiTD2@€TD0@TW10@MAT TRANSFORM R BY r^(abs(I#-J#)/(abs(I#-J#)+1)) / Vaadittu rakenneTD2@€TD0@TW10@MAT RLABELS "X" TO R / rivinimiksi X1,X2,...TD2@€TD0@TW10@MAT CLABELS "X" TO R / sarakenimet vastaavastiTD2@€TD0@TW10@Teht„v„n edellytt„m„ R-matriisi on muodostettu.TW10@.±TW10@Generoidaan otos multinormaalijakaumasta, jonka korrelaatiomatriision R.TW10@ Se tapahtuu suoraan MNSIMUL-operaatiolla.TW10@ Otetaan aikaa:TW10@TIMEMNSIMUL R,*,ISODATA,100000,0 / PRIND=0TIMETD2@€TD0@TW10@ü/TDIFFTD2@€TD0@Wi1wµSimulointiin kului siis #1 sekuntia.TW20@.±TW10@Valitaan muuttujat lineaariseen regressiomalliin:TW10@FILE ACT ISODATATD2@€YX²TD0@Lasketaan mallin parametrit ja otetaan siit„ aikaa:TIMELINREG ISODATA,CUR+6 / PRIND=0 RESULTS=0TIME€@!/TDIFFTD2@€TD0@0@&Wi2wµMallin laskeminen kesti #2 sekuntia eli simulointiin jaµregressiomallin estimointiin kului yhteens„ T=3@1@+@2@#3 sekuntia.TW40@TD2@TD0@TW10@Mallin yhteiskorrelaatiokerroin on siis R=€º.TW20@.±TW10@Saatua R:„„ voidaan viel„ verrata suoraan matriisista R saatavaanteoreettiseen yhteiskorrelaatiokertoimeen.TW20@ Se lasketaan esim.k„„nt„m„ll„ RTW10@MAT RI=INV(R)TD2@€TD0@TW10@poimimalla k„„nteismatriisista ensimm„inen l„vist„j„alkioTW10@MAT LOAD RI(1,1),12.1234567890,CUR+1TD2@€TD0@TW10@TW10@a=TW10@TW10@ja ottamalla siit„ muunnos R0=sqrt(1-1/a)TW10@R0=TD2@€TD0@TW10@/ESITYS98-TULOSTUS Teht„v„ 7: SimulointikoeüTp        Paina ENTER! (tai keskeyt„ napilla .)@TVC600@_.@@GE@Ta1@FILE DEL ISODATA.SVO€FILE DEL *.M€FILE DEL *.MAT€Ta-1@T!1@C1@TL*-TEHT98@TXE@Tp@Tÿ


üüüüTa1@BWi1X±1REDIM 1000,120€INSERT CUR+1,END+1€€€€€COUNT CUR+1,END,CUR-1123€üTXA@T!5@C0@TXA2@³$i6xTIA6@C$@GS@@GS@i2wWi3wWi4wBC$BLR1T=5@5@+@C1@TgC1@5@C!@C1@C1@@2,*+100,*Lr1TIN4@C0@@GA2@@T!6@C0@TXA3@T=6@6@+@C1@TIN6@4@@GA4@GA4@TLGA3@TXA4@LR2B(üB%@3üT!6@C0@TXB@B-pictureT=6@6@+@C1@TIN6@5@GB@@@üB)üB-[M]TgC1@C1@C!@C1@C1@¹¹T!6@C1@TXC@TIN6@5@@GD@@T=6@6@+@C1@TLGC@TXD@¹Lr2¹¹¹¹TLGA@TXS@TgC1@C1@C!@C1@C1@= (SURVO 98 -ratkaisu/SM)sivu ##µµµµ                                                                        PRINT CUR+1,END-define [M] [Courier(10)][line_spacing(10)][left_margin(15)]-[M]-header_lines 2,3-[Timesb(15)]=-[M]Ta-1@Tÿ
 def Wots=W1 Wps=W2 Wkork=W3 Wprint=W4
 def Wn=W5 def Wc=W6






üüüüüüüüüüüüüüüTa1@LR5BDEVICE=PS,= SIZE=@2,@3€G/ $ = T=5@3@+@C00@@5 @4Lr5L0Ta-1@Tÿ /PSPLOT <PS_file>,<width>,<height>,<ind>
 makes <PS_file> by altering temporarily GPLOT on current line to PLOT
 and inserting
     DEVICE=PS,<PS_file> SIZE=<width>,<height>                                 ù
 Thereafter the the original GPLOT scheme is restored and a comment
     / $ <PS_file> <height> <ind>
 is added at the end of the GPLOT line.
 /TULOSTUS reads these comments and adds - picture <PS_file>
 to the PRINT list <ind> lines below the current (GPLOT) line.
 If <ind>=0, <PS_file> is used as a background to the next scheme
 with <ind> greater than 0.
 Example:
  {save stack}{W1=RYHM12.PS}{W2=1200}{W3=1200}{W4=1}{call PSPLOT}
  {del stack}{load stack}

TtC1@bTgC1@C1@C!@C1@C1@SCRATCH €üINIT 1000,100€   µµµµ Teht„vien ratkaisut    N„m„ sukrot n„ytt„v„t, miten µSURVO 98µµµµµµµ:lla ratkaistaan teht„v„t,joita k„sitell„„n Helsingin yliopiston tilastotieteen laitoksentilastollisen tietojenk„sittelyn seminaarissa eri tilastollisillaohjelmistoilla kev„„ll„ 1998.   Ensin on k„yt„v„ l„pi teht„v„ 1 (aineistojen siirto), sill„ muutratkaisut perustuvat sen tuloksiin.   Muuten teht„vi„ voi k„sitell„ mielivaltaisessa j„rjestyksess„.Opetusohjelmien tapaan sukrot kehottavat mm. komentoja aktivoitaessak„ytt„j„„ painamaan ESC-nappia tms. Ellei n„in tapahdu, sukro eteneeautomaattisesti 10 sekunnin odotuksen j„lkeen. Tilap„isesti voikeskeytt„„/jatkaa v„lily”nnill„.   Kunkin ratkaisun lopussa on valmis /TULOSTUS-komento, joka siirt„„koko ratkaisutekstin (kuvineen) PostScript-kirjoittimella paperille.   Omistan t„m„n sukrokoosteen „skett„in edesmenneelle Armo Heikkil„lle.Armo vaikutti vuosikymmenten ajan lukuisilla ideoillaan ja aktiivisuu-dellaan siihen, millaiseksi Survo muotoutui. T„st„ l„hemmin mm. Survo jamin„ -kirjassani sivuilla 54 ja 71.7.4.1998 Seppo MustonenüTp        Paina ENTER!@TVC600@_@@T!1@C1@TL*-TEHT98@TXE@Tÿ

