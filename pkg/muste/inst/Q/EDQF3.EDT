SURVO84ED 81 260    81 S20                                                       *SAVE EDQF3                                                                      *LOAD EDQ                                                                        *                                                                                *FINPUT?                                                                         *  1 = FILE SHOW                                                                 *  2 = FILE EDIT                                                                 *  3 = FILE MEDIT                                                                %1=FSHOW 2=FIEDIT? 3=MEDIT?                                                      *@SELECT                                                                         *                                                                                *FSHOW?                                                                          @FILE SHOW <data_file>                                                           *is an overall tool for scanning and editing of Survo data files.                *The file will be shown on the screen so that each record takes one              *line. In the traditional 24 line mode, 21 consecutive records are shown         *simultaneously. When more space is reserved for the main window by              *the RESIZE command, the number of records and cases shown simultaneously        *is correspongingly greater.                                                     *The active fields are displayed as columns.                                     *There are no limitations for number of fields and records.                      *Records (lines) can be scrolled by PgDn, PgUp, ArrowUp, ArrowDn and             *fields (columns) by TAB, END and HOME keys.                                     *To get permission for editing of data values, F3 must be pressed once.          *Most of the keys have the same tasks as in the edit field. However,             *the functions of INSERT, DELETE and ctrl-END (erase) are limited to             *the current field.                                                              *@C                                                                              *Special features of FILE SHOW:                                                  *  1 = Formats and limits of the fields                                          *  2 = Inserting and deleting single records.                                    *  3 = Marking blocks of records for moving, deleting, etc.                      *  4 = Copying records and fields                                                *  5 = Search facilities                                                         *  6 = Sound effects (not available in SURVO MM, but see PLAY? DATA)             *  7 = Other specialities                                                        *  8 = Summary of key codes                                                      *  9 = Predefined options                                                        *  A = Displaying long string fields                                            C*  D = More information on data management                                       %1=FSHOW1 2=FSHOW2 3=FSHOW3 4=FSHOW4 5=FSHOW5 6=FSHOW6                           %7=FSHOW7 8=FSHOWKEY 9=OPTIONS A=SHOWLONG D=FILE?                                *@SELECT                                                                         *                                                                                *FSHOW1?                                                                         *In FILE SHOW, the fields are displayed in formats given in the field            *descriptions in the form (###.##) . To edit these formats, use FILE             *STATUS and FILE UPDATE. If no format is given for a particular field,           *the default format is:                                                          *           ###  for 1 byte numeric field,                                       *        ######  for 2 byte numeric field,                                       *   #######.###  for 4 and 8 byte numeric fields,                                *   entire field width for a string field.                                       *Missing values appear always as empty fields.                                   *If the data value exceeds the limits given by the current format,               *an empty field terminated by '*' will be displayed instead.                     *To see the true value of such a field, touch it by the cursor. Then             *the value will be displayed on the top line.                                    *@C                                                                              *                                                                                *Setting limits for values:                                                      *When editing numerical fields, extra limits may be set by the limit             aspecifications of the form {lower_limit,upper_limit} in the field               *descriptions. These limits can be altered by FILE UPDATE.                       *                                                                                *The values of a string field can be limited to a predetermined set              *by giving the permitted values as a list of the form [value1,value2,...]        *in the field description.                                                       *For example, [A,B,C] tells that 'A','B', and 'C' are the only possible values.  *                                                                                *@G AA                                                                           *AA?                                                                             *  S = More information on FILE SHOW                                             %S=FSHOW                                                                         *                                                                                *FSHOW2?                                                                         *The current record is deleted from the data file by alt-F10 key.                *An empty record is inserted after the current record by the alt-F9 key.         *@C                                                                              *When records are inserted and deleted (or moved by alt-F4), the FILE            *SHOW operation does not change the contents of the data file immediately,       *but creates a special indicator vector for this purpose. If n is the            *number of records, an extra space of 4*(n+1000) bytes is needed in the CPU.     *This space will be automatically reserved by FILE SHOW. In very large           *data files of, say more than 40000 records, allocation of the extra             *space may be impossible. In that case FILE SHOW will give a message             *and operations like FILE EDIT or FILE COPY should be used for the task.         *The maximum number of new records to be inserted between the old ones           *is 1000.                                                                        *When records have been inserted and deleted in the preceding manner,            *and FILE SHOW is terminated (by F8), the pertinent information will be          *copied from the current data file to a new one (SURVO.XXX) on the               *same path on the disk. Then the original file is deleted and SURVO.XXX          *renamed with the true name.                                                     *                                                                                *Please, note that the restrictions above do not apply to new records typed      *at the end of the data. There are no relevant limits for the number of          *old and new records.                                                            *@G AA                                                                           *                                                                                *FSHOW3?                                                                         *In FILE SHOW, a block a consecutive records can be marked by using              Sthe alt-F4 key repeatedly. The marked block is indicated by emphasized          *numbers in the first (order) column.                                            *A marked block is moved to another place in the data file by indicating         *the new position of the first record of the block by the cursor and             *pressing alt-F4. Please, note that the current observation indicated by         *the cursor will be the first after the block. After the move, no block          *is marked.                                                                      *A marked block is deleted by the ctrl-END key.                                  *@G AA                                                                           *                                                                                *FSHOW4?                                                                         *For typing of values occuring in consecutive records or simply for              *copying existing records and fields, keys F4 and F5 are available.              *                                                                                *F4 copies the current field and F5 the entire record. If a marked block         *(by alt-F4) exists, the first record of it is used as the model. If             *there is no marked block, the previous field (or record) just above is          *copied.                                                                         *                                                                                *If the current field is not empty, F4 has no effect.                            *Similarly, if the current record is not empty, F5 has no effect.                *@G AA                                                                           *                                                                                *FSHOW5?                                                                         *Searches are initiated by the alt-F5 (SEARCH) key.                              *The search takes place according to the values of the current field             *or # of the record. Permitted conditions (search keys) are, for example,        *  <100  >=25.5  <>1 (not equal to 1)                                            *In string fields the search key is a sequence of characters and the             *search is succesful when a case starting with this sequence is found.           *In addition, a partial string (in the middle of the field) can be               *searched for, by using a search word of the form *<string>.                     *The search is sequential from the current record onwards. The search            *is stopped when the first succesful record has been found and this              *record will be displayed. The search can then be continued simply by            *pressing ESC. If only number of succesful cases is wanted, press                *PREFIX ESC.                                                                     *The sequential search is replaced in string field by the much faster            *binary search if a specification of the form SORT:<sort_field> appears          *in the general file description (between FILE CREATE and FIELDS lines).         *It is then assumed that the file has been sorted in alphabetic order            *with respect to the field in question. In fact, the FILE SORT operation         *adds this specification automatically to the sorted file.                       *@C                                                                              *In FILE SHOW also fields (variables, columns) can be searched for               *by their names. This is relevant when there are very many active                *fields. To initiate such a search, press PREFIX alt-F5 .                        *@G AA                                                                           *                                                                                *FSHOW6?                                                                         *PREFIX F7 turns on/off the sound effects defined in the SOUND.BIN               *file in the <Survo>\U\SYS directory. (Not yet available in SURVO MM!)           *SOUND.BIN is a binary file of 256 characters. It can be edited by the           *CODES LOAD and CODES SAVE operations.                                           *For each printable character, the SOUND.BIN file gives a value 0 - 255          *which is the pitch of that character on a twelve-tone scale.                    *When the cursor is moved either up or down, each character touched will         *generate the tone defined in SOUND.BIN .                                        *The value for standard pitch ( a = 440 hz) is given as the second byte          *in SOUND.BIN. Default is 65.                                                    *The first byte in SOUND.BIN is the duration of each sound.                      *In the default setting of SOUND.BIN, the letters give the chromatic             *scale starting from A,a=440 hz and digits 0,1,2,3,... ascending C major         *triad tones. This simplifies detecting of outliers in numerical columns.        *Moving over field borders in horizontal direction gives same tones as           *the digits 0,1,2,3,... in vertical direction.                                   *Any column in the FILE SHOW display can also be "played" automatically          *by turning the sound on (by PREFIX F7) and starting by PREFIX (DOWN) .          *The tempo can be adjusted during the play by the '+' and '-' keys.              *The original tempo is given as the third byte in SOUND.BIN .                    *@G AA                                                                           *                                                                                *FSHOW7?                                                                         *FILE SHOW:                                                                      *F7 sets and recalls a reference point in the data file.                         *PREFIX ENTER sets the return column thus simplifying typing data in one         *column.                                                                         *PREFIX (DOWN) moves the cursor primarily to the last line and secondarily       *to the last record in the file. However, if the sound is on, PREFIX (DOWN)      *starts playing of the current column (see Sound effects).                       *                                                                                *The active fields appearing as columns in FILE SHOW display are selected        *by the first mask column of the data file. Another mask column may be           *selected by activating FILE SHOW of the form                                    *FILE SHOW <data_file>,<#_of_the_mask_column> .                                  *                                                                                *To go directly to the line after the last record (line)                         *(instead of the first one), activate                                            *FILE SHOW <data_file>+                                                          *and you can start typing new records at once. This situation is also            *achieved in the FILE SHOW mode by PREFIX (DOWN) PREFIX (DOWN) .                 *Similarly, FILE SHOW <data_file>-                                               *leads straight to the last record (line).                                       *@G AA                                                                           *                                                                                *FSHOWKEY?                                                                       *อออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออ *Key codes in FILE SHOW:                                                         *F1 Help      F2 PREFIX     F3 Permit editing                                    *F4 Copy a field                         alt-F4    Block definition etc.         *F5 Copy a record                        alt-F5    Search for records            *                                 PREFIX alt-F5    Search for fields             *F6 Field description  PREFIX F6 Continuous display of field descriptions        *F7 Set/Recall a reference point         alt-F7    Append field to the tutstack  *F8 Exit                                                                         *F9 Insert mode on/off                   alt-F9    Insert a record (line)        *F10 Delete character or block mode      alt-F10   Delete a record               *                                                                                *PgDn   Next page             PgUp   Previous page                               *TAB    Next field                                                               *END    Last field / Scroll to the right                                         *HOME   First field / Scroll to the left / First page                            *PREFIX ENTER  Set the return column                                             *PREFIX F7 Sound on/off (not yet available in SURVO MM)                          *ctrl-DEL deletes the current field (column) (in current display only)          C*@G AA                                                                           *                                                                                *OPTIONS?                                                                        *Predefined options in FILE SHOW:                                                SSpecification OPTIONS=<string> sets certain options for FILE SHOW.              *OPTIONS=W permits updating of data (without a need to press F3).                *OPTIONS=N displays complete names of fields.                                    *OPTIONS=I sets insert mode.                                                     *OPTIONS=S initiates sound effects.                                              *OPTIONS=T forces pressing TAB when encountering a field limit                   *          when data is typed or edited.                                         *OPTIONS=C writes '.' instead of ',' and vice versa.                            C*Options can be combined. Example: OPTIONS=WS                                    SSpecification RECORD tells the first record to be displayed.                    *RECORD=101  selects record (observation) #101.                                  *RECORD=Country:Finland selects the (first) observation with value `Finland'     *       in field `Country'. The file must be sorted by the field in question.    *RECORD=Popul>100000000 selects the first observation with greater value         *       than 100000000 in variable `Popul'.                                      SSpecification FIELD=<name_of_field> gives the name of the first field           *to be displayed.                                                                *@C                                                                              *Predefined options in FILE SHOW: (continued)                                    *                                                                                *Options are most useful in making sucros for data management.                   *Default options can be defined in SURVO.APU by `file_show'.                     *For example, file_show=NI in SURVO.APU is the same as OPTIONS=NI.               *@G AA                                                                           *                                                                                *SHOWLONG?                                                                       *By selecting a small font (by a FONT command) and a large main window           *(by /WINMAX) very wide string fields may be displayed by FILE SHOW.             *                                                                                *From version 3.36 a too wide string field (exceeding the space allowed          *by the current width of the window) is also shown entirely piecewise            *on several short lines on the right side of the window.                         *The length of these short lines can be set by the SHOWLONG specification.       *Default is SHOWLONG=24.                                                         *The length during the display may be increased by the '+' key and               *decreased by '-'.                                                               *This optional setup is cancelled (and resumed) by the F1 key.                   *@G AA                                                                           *                                                                                *                                                                                Shadows                                                                          f                                                              5555555555          //////////////////////////////////////////////////////////////////            ๆ  ////////////////////////////////////////////////////////////                  ์  /////////////////////////////////////////////////////////////////////         END                                                                              