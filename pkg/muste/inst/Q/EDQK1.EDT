SURVO84ED 81 250    81 S50                                                       *SAVE EDQK1                                                                      *LOAD EDQ                                                                        *                                                                                *LIST?                                                                           *LIST operations are used for processing of long lists and reports.              *Such lists consist of several chapters specified by DEF definitions             *(See DEF?) in different edit files.                                             *                                                                                *  1 = LIST definition                                                           *  2 = Structured LISTs                                                          *  3 = LIST SHOW                                                                 *  4 = LIST REPLACE      Replacing a string by another in the list               *  5 = LIST SORT         List sorting                                            *  6 = LIST SAVE         Saving list fields by cases in a text file              *  7 = LIST MAKE         Creating lists from text files                          *  8 = LIST COUNT        Frequencies of given phrases (strings)                  *                                                                                %1=DLIST 2=STRUCTL? 3=LSHOW 4=LREPL 5=LSORT 6=LSAVE 7=LMAKE 8=LCOUNT             *@SELECT                                                                         *                                                                                *LSORT?                                                                          @LIST SORT <list> BY <sort keys> TO <new list>                                   *sorts a structured list consisting of records of varying length in an order     *given by <sort keys> and saves the sorted list in a series of other edit files  *as <new list>.                                                                  *                                                                                *<sort keys> is a sequence of the form X,Y,Z,...                                 *where X,Y,Z... are defined as fields in a structured <list> definition.         *                                                                                *<new list> gives a common forepart for the new edit files needed for            *the sorted records. For example, if <new list> is D:OLIST, then files           *D:OLIST1.EDT, D:OLIST2.EDT, D:OLIST3.EDT,... will be used for the               *result. The output files will contain DEF definitions which specify             *a new list LIST OLIST: A,OLIST1-xxx END .                                       *The definition file of <new list> has the same structure as <list>.             *                                                                                *By default the sizes of the edit fields in <new list> correspond to             *those of <list>. This is changed by the specification                           *LISTDIM=<#_lines>,<#_columns>,<max_#_shadow_lines>.                             *@C                                                                              *LIST SORT (continued)                                                           *                                                                                *LIST SORT permits records of variable number of lines to be sorted.             *The records are specified in the .LST file defining <list>.                     *                                                                                *The records can be treated conditionally by using the same SELECT               *specification as in conditional processing of Survo data files.                 *                                                                                *By the specification NSORT=n only n first of the sorted cases will be           *saved as a new list.                                                            *                                                                                *As a checking procedure, active cases are displayed as well values of           *selected fields by giving a specification                                       *SHOW=<list_of_fields> .                                                         *@C                                                                              *LIST SORT (continued)                                                           *                                                                                *By the specification FILE=<name_of_a_new_text_file>[,<delimiter>]               *all fields defined in <list> can be saved in a text file in a form              *of a data matrix. The first line in the text file will consist of               *the names of the fields. Each active record (case) is saved as its              *own line thereafter. The fields are separated by character <delimiter>.         *Default is the character | .                                                    *Thus the data in the text file can be copied to a (new) Survo data              *file simply by the command                                                      *FILE SAVE <text_file> TO <data_file> / DELIMITER=|                              *@G LL                                                                           *LL?                                                                             *                                                                                *  L = More information on LIST operations                                       %L=LIST                                                                          *@SELECT                                                                         *                                                                                *DLIST?                                                                          *LIST in Survo is a sequence of text chapters located in different               *edit fields. Each chapter must be defined by a DEF definition in                *its own edit field (see DEF?). The list itself is defined by                    *a text file with the following minimal structure:                               *                                                                                *<chapter_1>,<edit_field_1>                                                      *<chapter_2>,<edit_field_2>                                                      *...                                                                             *END                                                                             *                                                                                *Abbreviations like A,XYZ1-3  (meaning A,XYZ1 A,XYZ2 A,XYZ3) are also            *accepted.                                                                       *The list thus defined is referred to by its file name with .LST as the          *default extension.                                                              *                                                                                *To process a list in a structured form, the LST file must contain some          *additional information.                                                         *@C                                                                              *In LIST SHOW and LIST REPLACE operations the list can also be defined           *locally in the current edit field in the following way:                         *LIST <name_of_the_list>: <chapter_1>,<edit_field_1> <chapter_2>,<edit_field2>,  *                          ...  END                                              *The chapters belonging to the list have to be given by DEF definitions          *in their edit files (See DEF?).                                                 *                                                                                *Example:                                                                        *LIST REPORT1: A,INTRO1 A,INTRO2 A,INTRO3                                        *              A,CH1 A,CH2 A,CH3 A,CH4 A,CH5 *,REF END                           *                                           (* = entire edit file)               *The list above can also be given in an abbreviated form                         *LIST REPORT1: A,INTRO1-3 A,CH1-5 *,REF END                                      *                                                                                *Edit files can given with complete pathnames. A common path for all             *fields is given by PATH=<path>. For example: PATH=D:\REPORT\                    *@G LL                                                                           *                                                                                *LSHOW?                                                                          @LIST SHOW <name_of_list>                                                        *opens a temporary window below the current (LIST SHOW) line and displays        *the contents of the edit fields belonging to the list. The lines (and           *columns) may be scrolled in that window in the same way as the edit             *field is scrolled on the screen. The user sees the text belonging to            *the list as one contiguos stream of lines. The changes of the fields            *are indicated by extra header lines telling the edit file and chapter.          *                                                                                *Various searches of strings over the entire list are initiated by               *the SEARCH (alt-F5) key. More information while staying in LIST SHOW            *is obtained by the HELP (F1) key. The S key tells about search options.         *The search with a previous keyword can be restarted by pressing ESC (twice).   C*                                                                                *LIST SHOW *                                                                     *works with the list used most recently by LIST SHOW.                            *@C                                                                              *In the LIST SHOW mode, the text in the list (edit fields) cannot be             *edited. However, by means of a /LIST sucro, an interplay between                *the LIST SHOW mode and the standard editorial mode can be arranged.             *The sucro command                                                               @/LIST <name_of_list>                                                            *calls the corresponding LIST SHOW operation. On exit from LIST SHOW,            *the last edit field shown by LIST SHOW is loaded automatically and              *the cursor indicates the same place as it was pointing at in LIST SHOW.         *The user can edit the field and save it normally. By activating                 */LIST * (this could be defined as a macro), FILE SHOW is called again           *and it immediately gives the same display as in the previous call.              *In this way, even very long reports are maintained easily.                      *                                                                                *The sucro command                                                               */HLIST                                                                          *lists (through LIST SHOW) all the text belonging to the inquiry (help)          *system of Survo.                                                                *@G LL                                                                           *                                                                                *LREPL?                                                                          @LIST REPLACE <name_of_list>,L1,L2                                               *replaces all the occurrences of the text given on the edit line L1 by           *that given on line L2. Even shadow characters are observed.                     *However, LIST REPLACE is not able to create new shadow lines. Hence,            *cases where L2 has shadows but L1 not are not allowed.                          *@C                                                                              *For cases where trailing spaces should be observed, a generalized               *form is available. Its syntax is                                                @LIST REPLACE <name_of_list>,L1,L2,len1,len2                                     *where len1 is the length of the old string and len2 that of the new one.        *@G LL                                                                           *                                                                                *LSAVE?                                                                          @LIST SAVE <list> TO <text_file>[,<delimiter>]                                   *All fields defined in <list> can be saved in a text file in a form              *of a data matrix. The first line in the text file will consist of               *the names of the fields. Each active record (case) is saved as its              *own line thereafter. The fields are separated by character <delimiter>.         *Default is the character | .                                                    *Example: LIST SAVE LIST1 TO D:DATA1.TXT,char(9) / tab as delimiter              *                                                                                *The data in the text file can be copied to a (new) Survo data file              *simply by the command                                                           *FILE SAVE <text_file> TO <data_file> / DELIMITER=char(9)                        *@G LL                                                                           *                                                                                *LMAKE?                                                                          @LIST MAKE <new_list> OF <text_file>                                             *creates a list from a given text text file as a sequence of edit files.         *For example, if <new_list> is ABC, edit files ABC1,ABC2,ABC3,...                *will be created as well as a text file ABC.LST giving the names of the          *edit files.                                                                     *By default the sizes of the edit fields correspond to REDIM 300,100,100.        *This is changed by the specification                                            *LISTDIM=<#_lines>,<#_columns>,<max_#_shadow_lines>.                             *@C                                                                              @LIST MAKE <new_list> OF #<texts>                                                *                                                                                *#<texts>                                                                        *pathname_of_text_file_1                                                         *pathname_of_text_file_2                                                         *...                                                                             *END                                                                             *                                                                                *does the same job from a series of text files.                                  *@G LL                                                                           *                                                                                *LCOUNT?                                                                         @LIST COUNT,<Survo_list>,<phrases_name>                                          *PHRASES <phrases>:                                                              *<phrase 1>                                                                      *<phrase 2>                                                                      *...                                                                             *                                                                                *counts the frequencies of given phrases (strings) in <Survo_list>               *and writes the results as a column of frequencies after phrases.                *                                                                                *By default LIST COUNT equates upper and lower case letters.                     *To make it work in a case-sensitive way, insert an extra                        *parameter `C' as follows:                                                       *LIST COUNT,<Survo_list>,<phrases_name>,C                                        *@C                                                                              *Hyphenated words (as Fin-                                                       *land) divided into two consecutive lines are connected (as Finland)             *by default (HYPHENS=1). To ignore hyphenating, set HYPHENS=0 .                  *                                                                                *Counting may be restricted to selected columns by the specification             *COLS=C1,C2 .                                                                    *Default is the entire edit line without the control column, i.e. C1=1 .         *For example, by COLS=0,0 only control characters are considered.                *                                                                                *Also keywords, strings, and phrases with shadow characters in specific          *positions are observed.                                                         *@C                                                                              *The following `general' phrases are available:                                  *                       Frequency of                                             *#chapters              chapters in the current Survo list                       *#records               blocks separated by one ore more empty lines             *#lines                 edit lines (empty lines included)                        *#words                 strings separated by ` 's or line ends                   *#integers              integer numbers                                          *#numbers               numbers (integers and decimal numbers)                   *#characters            all characters (trailing spaces not included)            *#spaces                spaces (trailing spaces not included)                    *#digits                digits 0,1,2,3,4,5,6,7,8,9                               *#letters               letters (èéôöÜÑîÅ included)                              *#special characters    #characters-#spaces-#digits-#letters                     *                                                                                *The above features as well as certain other options are illustrated by          *activating /LCDEMO                                                              *                                                                                *@G LL                                                                           *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                END                                                                              