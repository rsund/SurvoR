SURVO 84C SUCROS@  63@START       1161@1           1206@2           1627@3           2231@5           2683@6           3948@7           5331@8           6065@9           6808@10          9215@11         10062@12         13514@13         13593@14         14038@15         14552@16         15578@17         16939@18         17409@19         17996@20         19226@21         20318@22         22633@23         25439@24         29841@25         30324@26         34119@27         35752@28         36295@29         40682@31         42469@32         43834@33         45520@34         47116@35         48078@36         53090@37         54519@38         56190@39         56572@40         59910@41         64063@42         67276@43         70931@44         71867@45         77316@46         83878@48         87537@50         91022@51         92164@52         96729@53         97583@54         98853@55        102149@56        104667@57        106486@58        108275@59        112326@60        117063@61        119397@63        120857@65        122886@67        124613@68        128952@69        133791@TÿTtC0@bBCD <Survo>\U\EX€BLOAD INDEX€TÿTa1@bTgC1@C1@C!@C1@C1@SCRATCH €BCOLX W20€BTtC0@LOAD INDEXBTtC2@ µUsing Survo in Touch mode:TW5@ According to Statistics Finland,TW5@ at the end of year 2004 the number of males was 2562077TW10@ and the number of females 2674534.TW20@ Thus the total population wasTW20@TW5@TD2@´TD0@TW10@TD2@+TD0@TW10@TW5@TD2@+TD0@TW10@TW5@TD2@=TD0@.TÿTa1@bTgC1@C1@C!@C1@C1@SCRATCH €BCOLX W20€BTtC0@LOAD INDEXBTtC2@ µEditorial computing in Survo:TW5@ Let the sides of a triangle be a=13, b=14, and c=15.TW10@ The area of the triangle can be calculated by Heron's formulaTW5@ Area=sqrt(p*(p-a)*(p-b)*(p-c))TW10@ where p equals the half of the perimeter p=(a+b+c)/2TW5@ andTW5@ where sqrt() denotes the square root.TW10@ Hence Area=Tp        Activate!@TW30@€Tp@TW30@üTtC0@TtC2@TW10@cTW10@TW5@cTW10@TtC0@TW10@TtC2@TW10@Tp        Activate!@TW20@€Tp@Tÿ
Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BCOLX W20€BTtC0@BLOAD INDEXTtC2@ µPlotting curves:TW5@ A family of sinus curves for amplitudes a=0(0.5)10TW10@ HEADER=[Arial(25)][RED],Sinus_curvesTW5@  PEN=[Arial(15)]TW10@ WHOME=200,150 WSIZE=440,200  Place and size of the graphTW5@ XSCALE=-pi:-pi,0,pi:pi  pi=3.141592653589793TW5@ GPLOT y(x)=a*sin(x)Tp        Activate!@TW10@€Tp@TW30@ GPLOT /DEL ALLTp        Activate!@TW20@€Tp@TW10@TÿTa1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@LOAD INDEXü   µµµµµµµ Simulating a bivariate normal distribution Correlation matrix R of variables X and Y is given as follows:Let r=0.6 be the correlation coefficient.MATRIX R/// X  YX   1  rY   r  1MAT SAVE R / Saving correlation matrix RTtC2@TD2@€TD0@Ta1@Creating 100000 observations (X,Y) from N(0,R) in data file NORMAL2:MNSIMUL R,*,NORMAL2,100000,0TtC2@TD2@€TD0@Ta1@Plotting a scatter diagram of the sample:TtC2@TW10@TW5@Ta1@POINT=[YELLOW],11 MODE=1024,768COLORS=[/BLACK]HEADER= XLABEL= YLABEL=XDIV=0,1,0 Y=0,1,0WSTYLE=0 FRAME=3GPLOT NORMAL2,X,YLocation of the graph:WIN GETCurrent window: 0 0 652 381w=652 h=381 s=0.70*hWHOME=w-s-4,h-s-20 WSIZE=s,sTtC2@TW10@TD2@€TD0@üTW50@GPLOT /DEL ALLTW10@TtC0@Bµµµµµµµ              €TtC2@TW5@TtC0@BTtC2@TW10@Contour ellipses on variousprobability levels:CONTOUR=[GREEN],0.5,0.9,0.99TW10@üTD2@€TD0@üTW30@Basic statistics:CORR NORMAL2,CUR+1TW20@TtC0@Bµµµµµµµ                  €TtC2@TW5@TtC0@BTtC2@TW10@üTp        End of this demo!@TW30@Tp@Tÿ




 {30}{u22}{5}{act}
Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BCOLX W20€BTtC0@LOAD INDEXBTtC2@üTtC0@ µTable formatting and sorting were amongTW5@ µthe first operations in Survo Editor in late 1970ies. Yearly consumtion of certain beverages per inhabitant in certain European countries in 1972-1976            Coffee  Tea   Beer   Wine    Spirits              (kg)  (kg)  (l)     (l)     (l)A Finland 12.5 0.15 54.7 7.6 2.7 Sweden 12.9 0.30 58.3 7.9 2.9 Norway 9.4 0.19 43.5 3.1 1.8 Denmark 11.8 0.41 113.9 10.4 1.7 England 1.8 3.49 113.7 5.1 1.4 Ireland 0.2 3.73 124.5 3.8 1.9 Holland 9.2 0.58  75.5 9.7 2.7 Switzerland 9.1 0.25 73.5 44.9 2.1 France 5.2 0.10 44.5 104.3 2.5 Italy 3.6 0.06 13.6 106.6 2.0 Spain 2.5 0.03 43.6 73.2 2.7BC Portugal 2.2 0.03 27.5 89.3 0.9 AAAAAAAAAAA 11.1  1.11  111.1  111.1     1.1TtC2@FORM A,B,CTW30@Tp        Formatting lines A-B according to mask line C:@TW20@TD2@€TD0@TW20@Tp        The formatted table is easily sorted according to any column:@TW20@11111Tp        A mask set to point at 'Beer' column:@TW20@SORTTW10@Tp        Sorting lines A-B according to mask line C:@TW20@TD2@€TD0@TW20@Tp        Sorting lines in descending order by -SORT:@TW20@TW5@-TW10@TD2@€TD0@TW20@Tp        Finally sorting countries to alphabetic order:@TW20@AAAAAAAATD2@€TD0@TW20@Tp@Tÿ
Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BTtC0@WIN GET SIZECurrent window: 0 0 652 381w=652 h=381WHOME=w/2-15,h-260 WSIZE=w/2,h-150YSCALE=0(20)100COLX W20€BTtC0@LOAD INDEXBTtC2@üTtC0@ µµµµµµµ Bar chart of population in Nordic countries  Nordic countries: Population in age groups (1980) DATA Nordic Country  0-14 15-24 25-44 45-64   65- Finland   990   780  1420  1015   555 Sweden   1641  1117  2316  1883  1345 Norway    925   617  1041   895   588 Denmark  1102   753  1433  1099   724 Iceland    61    43    59    39    22HEADER=[Arial(20)][RED],Nordic_countriesGPLOT Nordic / TYPE=%AVBARTtC2@TW30@TD2@€TD0@TW30@By default, the graph isdisplayed µoutside this window.TW30@GPLOT /DELL ALL€Tÿ
Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BTtC0@WIN GET SIZEw=652 h=381Current window: 0 0 652 381WHOME=0,0 WSIZE=w,h WSTYLE=0COLX W20€BTtC0@LOAD INDEXBTtC2@üTtC0@Lo µ Curve (created in 1976 by SM) HEADER= FRAME=0 MODE=1024       XDIV=0,1,0 YDIV=0,1,0T=0,2*pi,pi/4000 pi=3.14159265 XSCALE=-3.0,3.0 YSCALE=-1.5,1.5R=cos(78*T)+cos(80*T) A=R*cos(T) B=R*sin(T)s=0.8 u=0.06 LINETYPE=[color(0.1,0.3,1,0.2)]  COLORS=[/BLACK]SLOW=400GPLOT X(T)=A+s*B+u*sin(5*B),Y(T)=B+u*sin(5*A)¶üThis Survo plotting scheme makes a closed curvewhen the GPLOT command above is activated.The original version was made in 1976 on a drum plotterconnected to a Wang 2200 minicomputer.ü¶€TtC2@L0TW50@TtC0@GPLOT /DEL ALL€BºTtC2@TW50@Tÿ


üTa1@bTgC1@C1@C!@C1@C1@SCRATCH €BCOLX W20€BTtC0@LOAD INDEXBLlTtC2@ü    µµµµµµµ An interesting presentation TW10@   The American Mathematical Society had a meeting in New York(October 1903).TW10@ Mr. F.N. Cole had promised to give a "talk" entitled'On The Factorization of Large Numbers'.TW10@ When the chairman asked himto take the podium,TW5@ Mr. Cole - TW5@without saying a wordTW5@ - proceededto write on a blackboard ...TW20@.±            Tp        Mr. Cole writing on the blackboard...@TtC0@SHADOW 32 7€BTtC2@TW20@                           256TW10@     =2^8TW10@256 xTW10@TW5@!AR-MULTTW10@=2^16TW10@65536 xTW10@!AR-MULTTW10@=2^32TW10@                    4294967296 xTW10@!AR-MULTTW10@=2^64TW10@8=2^3xTW10@!AR-MULTTW10@=2^671 -TW10@!AR-SUBTW10@º     =2^67 - 1 = M67TW50@Tp@.±TtC0@SHADOW 32 240€BTtC2@TW5@Tp@   The participants were slightly surprisedTW5@ since Mr. Cole hadcalculated the Mersenne number M67.TW10@ Already in 1644 Marin Mersennehad claimed it to be a prime numberTW5@ - a well-known conjecture amongthe members of the society.TW10@   Still saying no word -TW5@ Mr. Cole continued his calculations...TW10@.±TtC0@SHADOW 32 7€BTtC2@TW10@Tp        Mr. Cole continues...@TW20@                  761838257287     =ATW10@                     193707721 x   =BTW10@TW10@!AR-MULTTW10@= A x BTW10@ = M67TW30@Tp@.±TtC0@SHADOW 32 240€BTtC2@TW5@   The product of those integers was equal to M67.TW10@ Thus - againstthe Mersenne conjectureTW5@ - Mr. Cole had shown by this meticulouscalculationTW5@ that M67 was not a prime number.TW30@   He received a standing ovation.TSAPPLAUSE@TW20@ Nobody made questionsTW5@and Mr. Cole returned silently to his place in the auditorium.TW20@LL   E.T.Bell, who tells this story in his book 'Mathematics:Queen and Servant of Science' (London 1952),TW5@ met Mr. Cole laterand asked how long did it take to find that factorization.TW10@Mr. Cole answered:TW5@ µ"Three years of Sundays".Tÿ 20.9.1990 (24.3.1010 this English version)

Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@LOAD INDEXü   µµµµµµµ Linear regression analysis (data DECA) Predicting the final score (Points) in Decatlon by the fivefirst-day events in data DECA of 48 athletes:TtC2@TW30@Browsing the data file:TW10@FILE SHOW DECATD2@€	²TD0@TW10@üSelecting variables (mask Y for the regressand and X for regressors):TW10@FILE ACTIVATE DECATD2@€YXXXXX²TD0@Tp        Model: Points=constant+a*100m+b*l_jump+c*Shot_put+d*Hi_jump+e*400m+eps@TW20@Computing the results of this linear regression model:TW10@LINREG DECA,CUR+1 / RESULTS=0 (minimum output)Tp@TD2@€TD0@TW30@Tp        Model: Points=constant+a*100m+b*l_jump+c*Shot_put+d*Hi_jump+e*400m+eps@TW20@TW5@Thus 64 per cent of the total variation is explained by the first dayevents.TW10@Tp@Tÿ


Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@üLOAD INDEX /    µ Chernoff faces DATA FOSSILS Species   D1    D2    D3    D4    D5    D6    D7    D8     Label Westafr  -8.09  0.49  0.18  0.75 -0.06 -0.04  0.04  0.03   H1 British  -9.37 -0.68 -0.44 -0.37  0.37  0.02 -0.01  0.05   H2 Austral  -8.87  1.44  0.36 -0.34 -0.29 -0.02 -0.01 -0.05   H3 Gorilla1  6.28  2.89  0.43 -0.03  0.10 -0.14  0.07  0.08   A1 Gorilla2  4.28  1.52  0.71 -0.06  0.25  0.15 -0.07 -0.10   A2 Orang1    5.11  1.61 -0.72  0.04 -0.17  0.13  0.03  0.05   A3 Orang2    3.60  0.28 -1.05  0.01 -0.03 -0.11 -0.11 -0.08   A4 Chimpan1  3.46 -3.37  0.33 -0.32 -0.19 -0.04  0.09  0.09   A5 Chimpan2  3.05 -4.21  0.17  0.28  0.04  0.02 -0.06 -0.06   A6 Pith.Pek -6.73  3.63  1.14  2.11 -1.90  0.24  1.23 -0.55   F1 Pith.P2  -5.90  3.95  0.89  1.58 -1.56  1.10  1.53  0.58   F2 Par.Robu -7.56  6.34  1.66  0.10 -2.23 -1.01  0.68 -0.23   F3 Par.Cras -7.79  4.33  1.42  0.01 -1.80 -0.25  0.04 -0.87   F4 Megantro -8.23  5.03  1.13 -0.02 -1.41 -0.13 -0.28 -0.13   F5 Proc.Afr  1.86 -4.28 -2.14 -1.73  2.06  1.80  2.61  2.48   F6¶TtC2@TW20@H.Chernoff (1973) introduced the idea of using cartoon faces as symbolswith data values coded into various facial features.TW10@ The purpose is toemploy the natural capability of the viewers to recognize similaritiesand differencies of the faces thus presented.TW30@TW10@Chernoff's faces are plotted in Survo by activatingGPLOT FOSSILS / TYPE=FACESTW10@followed by a list of variables and their mappings to various featuresof the face.TW10@ A model for such a list is obtained by activatingthe PLOT operation above without a list:TW20@TW10@€TtC0@üµ                                    üTtC2@TW20@LR1LoTtC0@üWIN GET SIZE€w=652 h=381 PEN=[Arial(15)] COLORS=[background(12)] PALETTE=VGAGRAY.PALWHOME=190,25 WSIZE=w-200,h-70 FSIZE=120Lr1L0TtC2@TW10@  The explanations before the VARIABLES line are unessential.TW10@  Let's remove them!TW10@TW10@TW5@TW10@By activating the PLOT operation with this dummy listwe get a series of similar faces:TW10@TW10@€TW30@üTtC0@GPLOT /DEL ALL€BTtC2@üWe can start selecting variables for different features as follows:TW10@To control the curvature of the mouth (smiling) by the variable D1,we simply edit the list by typing D1 on the corresponding lineTW10@TW10@D1TW10@and activate again:TW10@TW10@€TW30@üTtC0@GPLOT /DEL ALL€BTtC2@üPlease, note that the xmin and xmax columns have been automaticallyupdated by the minimum and maximum values of D1 in the current data.TW30@To identify the observations (here different species), we can adda LABEL specification.TW10@ (We also increase the line width.)TW10@º TW10@LABEL=SpeciesTW5@ LINETYPE=[line_width(2)]TW10@üüü€TW40@üTtC0@GPLOT /DEL ALL€BTtC2@üWe try now to add more variables in such a way that the human racesappear with human-like faces and the apes get monkey faces:TW20@TW10@D1TW5@TW5@*TW5@TW5@ TW5@(The direction of the mapping is reversed.)TW20@TW10@D2D3D1D1D1* D4D5D6D7D8D2D3TW30@TW10@€TW50@ü µThe EndTW50@GPLOT /DEL ALL€Tÿ








{u20}{d2}{r}{wait 30}
{R}
{d38}{u21}



Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@üTLDISTRSUM@Tÿ

Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@LOAD INDEXü   µµµµµµµ Lissajous curve variation GPLOT X(T)=int(M*sin(N*T)+0.5),      Y(T)=int(N*cos(M*T)+0.5)M=29 N=19 T=[line_width(4)],0,2*pi,pi/3100  pi=3.14159HEADER= FRAME=0 XSCALE=-M,M YSCALE=-N,NXDIV=0,1,0 YDIV=0,1,0MODE=652,381 WSIZE=652,381 WHOME=0,0 WSTYLE=0SLOW=300 Slowing by drawing each line segment 300 timesTtC2@TD2@€TD0@TW250@GPLOT /DEL ALL€Tÿ

Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@LOAD INDEXü   µµµµµµµ Histogram Plotting the histogram of variable Height in data DECA (N=48)and fitting to normal distribution:GHISTO DECA,Height,CUR+2 / Height=170.5(2)200.5 FIT=Normalü¶WHOME=0,24 WSIZE=652,381-24 WSTYLE=0XSCALE=170(10)200¶üTtC2@TW40@Tp        Activate!@TW20@€Tp@TW100@µNumerical results:TW5@TW20@µ          TtC0@No significant departure from normal distribution!Tÿ



Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@LOAD INDEXü   µµµµµµµ Factor analysis Making factor analysis about the 10 event variablesin data DECA of 48 athletes:TtC2@TW30@Browsing the data file:TW10@FILE SHOW DECATD2@€		²TD0@TW10@üSelecting variables:TW10@FILE ACTIVATE DECATD2@€--AAAAAAAAAA--²TD0@TW10@Computing correlations:TW10@CORR DECATD2@€TD0@Tp        Correlation matrix saved in matrix file CORR.M@TW20@Maximum Likelihood factorization (3 factors):TW10@FACTA CORR.M,3,CUR+1TD2@€TD0@Tp        Factor matrix saved in matrix file FACT.M@TW20@TW5@TW5@TW5@Varimax factor rotation:TW10@ROTATE FACT.M,3,CUR+1TD2@€TD0@Tp@TW10@Tp        Rotated factor matrix in matrix file AFACT.M@TW20@TW30@TW5@TW5@Displaying the rotated factor matrix according to Lauri Tarkkonen'sstyle simply by activating sucro /LOADFACT (without parameters):TW10@/LOADFACTTW20@TD2@€TD0@Tÿ


Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BTtC2@Ta1@LOAD INDEXü   µ Comparing two samples Example from Conover: Practical Nonparametric Statistics, 2nd EditionThe senior class in a particular high school had 48 boys. Twelve boyslived on farms and the other 36 lived in town. A test was devised to seeif farm boys in general were more physically fit than the town boys.Each boy in the class was given a physical fitness test in which a lowscore indicates poor physical condition. The scores of the farm boysand the town boys are as follows.DATA FARM: 14.8 7.3 5.6 6.3 9.0 4.2 10.6 12.5 12.9 16.1 11.4 2.7 ENDDATA TOWN: 12.7 14.2 12.6 2.1 17.7 11.8 16.9 7.9 16.0 10.6 5.6 5.6           7.6 11.3 8.3 6.7 3.6 1.0 2.4 6.4 9.1 6.7 18.6 3.2           6.2 6.1 15.3 10.6 1.8 5.9 9.9 10.6 14.8 5.0 2.6 4.0 ENDCOMPARE FARM,TOWN,CUR+1TtC2@TW100@TD2@€TD0@TW30@üTW30@TtC0@The COMPARE program of Survo calculated the following test statisticsand their P values:Standard t test (line 22),Mann-Whitney test by normal approximation (line 25),On the lines 26-29, results of two exact tests performed randomizedare given. The first one (Mean) is based on original values andthe latter (R or U) is based on ranks and thus corresponds tothe Mann-Whitney test (without normal approximation).N=100000 resamplings were created.Tÿ


Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüSYSTEM help_window=0€BüCOLX W20€BTtC2@Ta1@LOAD INDEXü   µ Fisher's exact test for contingency tables Let's consult the help system of Survo by activatingTAB?Tp Normally the HELP window does not cover the main window!@TtC2@TW30@TD2@€5+TD0@Tp        The HELP page copied to the edit field by '+'@TW40@Tp@TW20@TW5@TW5@TABTEST TEST,CUR+1TW10@TW5@TW10@TD2@€TD0@Tÿ


Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Miscellaneous conversions Due to .= notation, all these conversions can be done simultaneouslyby activating just one of them:..................440(yard:m).=10(kilogram:pound).=(gallon:liter).=            (gallon:pint).=37.78(Celsius:F).=FFFF(16:10).=          65535(10:hex).=1966(10:Roman).=         LXXII(Roman:10).=3.14159265(12:ratio).=1691546003(10:factors).=4292870399(10:factors).=4294967291(10:factors).=TtC2@TW50@TD2@€TD0@TW30@ºTW5@TW5@(a prime number)Tÿ

Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Computus: calculating the date of EasterTtC2@TW20@üThe following algorithm gives the month and day of the Easter Sunday.TW10@It was published in the journal µµµµµµNatureµµ in 1876.TW10@LR1a=mod(year,19)b=int(year/100)c=mod(year,100)d=int(b/4)e=mod(b,4)f=int((b+8)/25)g=int((b-f+1)/3)h=mod((19*a+b-d-g+15),30)i=int(c/4)k=mod(c,4)l=mod((32+2*e+2*i-h-k),7)m=int((a+11*h+22*l)/451)n=(h+l-7*m+114)month=int(n/31)day=mod(n,31)+1Lr1TW10@TRIM 70TW10@€TW10@INSERTTW10@€TW10@TgC1@CEND+2@C1@TW10@üFor example, if the year=2018,TW10@ the Easter Sunday has month=TW10@€TW10@º and day=TW10@€TW10@º.TW10@üHow about all the Easter Sundays during the next 200 years?TW10@ Let's see!TW10@FILE MAKE EASTERS,1,200,year,2 / create an empty data fileTW10@€üVAR year=ORDER+2010 TO EASTERS / fill it with years 2011,2012,...,2210TW10@€üVAR month:2,day:2 / use the above algorithm for finding the EastersTW10@€üFILE SHOW EASTERSTD2@€²TD0@.................How often does it occur that the Easter Sunday is on 1st of April?TW10@üFILE LOAD -EASTERS / m=month,4 d=day,1 SELECT=m*d VARS=year FORMAT=LISTTW10@€TW10@üTÿ









Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Pascal's triangleüTwo ways are presented for creating the well-known Pascal's triangle  1  1  1  1  2  1  1  3  3  1  1  4  µµµµµµµ64µ  1  1  5 10 µµµµµµµ10µ  5  1  . . .consisting of binomial coefficients C(n,m) defined recursively byformulas C(n,m)=C(n-1,m-1)+C(n-1,m), C(n,0)=C(n,n)=1.TtC2@TW40@Creating the triangle for n=1,2,...,20:TW10@Quick and dirty wayTW5@ by Survo matrix interpreter and function C(n,m):TW20@MAT P=ZER(21,21)TW10@TD2@€TD0@TW10@MAT #TRANSFORM P BY C(I#-1,J#-1)TW10@TD2@€TD0@TW10@MAT LOAD P,(######),CUR+1TW10@TD2@€TD0@TW10@üTW20@TW5@TD2@TD0@TW5@REPLACE " 0 ","",CTW5@ / removing zerosTW5@TD2@€TD0@TW10@üTW5@TW5@DELETETW5@€TW5@€€€€€€€€€€€€€€TW5@TW5@TW5@TW10@TW10@TW10@TW10@TW10@üTW5@Quick and clean wayTW5@ by Touch mode:TW10@ 1 1        1TW5@TW10@TD2@´·P++=R=P+=€TD0@TW30@TW5@TW10@TW10@TW10@TW5@Tÿ





Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Grid lines üLet's study a regular N x N grid of points (here N=4):¶LoGPLOT FILE A44 / d=60 n=4 WSIZE=n*d+24,n*d+24 WHOME=385,97€B¶¶L0TtC2@TW30@üThe task is to enumerate all linesgoing through at least two grid points.TW10@If all ascending lines are drawn,the following graph is obtained:TW10@TtC0@Lo¶GPLOT FILE A44ASC / d=60 n=4 WSIZE=n*d+24,n*d+24 WHOME=385,97€B¶¶L0TtC2@TW30@üThe number of these green lines is 27.TW20@Then the total number of lines goingthrough at least two points isTW10@  2*27+2*4=TW5@€TW5@since the number of descending lines isthe sameTW10@ and number of both verticaland horizontal lines is 4.TW20@TW5@If L(M,N) is the number of such linesin an M x N grid,TW5@ we have L(4,4)=62.TW10@It is easy to see that L(2,2)=6TW5@ andL(3,3)=20.TW20@ü¶TtC0@GPLOT /DEL ALL€B¶¶TtC2@TW10@Now the interesting question is:TW5@What is the general expression for L(n,n)?TW20@üTW5@TW5@TtC0@LoAlthough - at the first sight - the problem seems to be elementary,it turns out that there is no simple expression for L(N,N).The number of lines with a certain slope p/q (p,q integers)depends heavily on the divisibility of p and q.Therefore it is natural to assume that Euler's totient function(totient(n) in Survo) plays an important role.üLOTtC2@TW50@LoTtC0@üIn April 2009, I found a recursive formula for L(N,N) by making someexperimental work with Survo. The following setup where L(N)=L(N,N) andL1(N)=L(N-1,N) works according to that formula:L(N)|=if(N<2)then(0)else(2*L1(N)-L(N-1)+R1(N))L1(N)|=if(N<3)then(1)else(2*L(N-1)-L1(N-1)+R2(N)) R1(N):=4*S(N)S(N):=for(I=2)to(N)sum(totient(I-1)-e(I))e(N):=if(mod(N,2)=0)then(0)else(totient((N-1)/2))R2(N):=if(mod(N,2)=0)then((N-1)*totient(N-1))else(R21(N))R21(N):=if(mod(N,4)=1)then((N-1)*totient(N-1)/2)else(0)üLOTtC2@TW50@üUsing it we have, for example,TW5@L(4)=TD2@€TD0@TW10@L(5)=TD2@€TD0@TW5@L(100)=TD2@€TD0@TW5@L(400)=TD2@€TD0@TW10@TW5@It can be shown that asymptotically L(N) is l(N):=(3/(2*pi)*N^2)^2TW10@where pi=3.141592653589793TW5@ and thusl(400)=TD2@€TD0@TW5@ºTW5@ (4 correct significant digits) µThe EndTÿ










Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Why 0.3-0.2-0.1 is not zero in PC's? TtC2@TW10@üLet's make this simple calculation by editorial computing:TW10@0.3-0.2-0.1=TW10@TD2@€TD0@TW10@Why we are not getting the true answer 0 but an arbitrary looking-2.7755575615629e-017 which is a tiny number less than 0 ?TW20@The 'fault' is not in Survo.TW5@ For example, the Mathematica program(ver.7) gives the same value.TW10@In fact, the result is not quite arbitraryTW5@ since it happens to beexactly the same as-2^(-55)=TW5@TD2@€TD0@TW10@The reasonTtC0@ for this slightly annoying phenomenon is the fact thatcurrent PC's as many other type of computers are using binaryarithmetics. Then many decimal numbers even with a few decimalscannot be represented accurately in the computer since theirbinary expansion is periodically infinite like, for example,2/27=0.07407407407407...has in decimal system.TtC2@TW70@For a more thorough explanation of 0.3-0.2-0.1=-2.7755575615629e-017I made two sucros.TW10@The first one converts decimal numbers into their binary counterpartswith a given number of bits.TW10@ For numbers 0.3, 0.2, and 0.1 we getTW10@/BIN-CONV 0.3,56TW10@TD2@€TD0@TW10@/BIN-CONV 0.2,56TW10@TD2@€TD0@TW10@/BIN-CONV 0.1,56TW10@TD2@€TD0@TW10@As we see immediately,TtC0@ all these numbers have actually an infinitebinary expansion with a constant period of 0011. These expansionshave to be truncated to certain length in the computer and thereforethe numbers as such are not anymore accurate.TtC2@TW50@Let's now make the calculation 0.3-0.2-0.1 with these binary numbersby using another sucro /BIN-SUB:TW10@üTW5@TW5@TD1@±29TD0@TW5@ºTW10@(0.3)TW5@/BIN-SUB TW5@TD1@±31TD0@TW5@ºTW10@(0.2)TW5@TW5@TD2@€TD0@TW10@ºTW5@"0.1"TW5@TW5@TW5@TW5@/BIN-SUB TW5@TD1@±33TD0@TW5@ºTW5@(0.1)TW5@TW5@TD2@€TD0@TW10@TW5@ºTW5@"0"TW10@Thus we get instead of 0 the value "0" = 2^(-55)=€TW30@üTW5@TtC0@In reality, computers are working with floating point numbers whileI made these calculation with fixed point numbers.Anyhow, this experiment explains why the result is not always accurate.TtC2@TW30@Of course these unwanted biases may be avoided simply by roundingthe result, for example, in this way:TW10@round(0.3-0.2-0.1,5)=TW10@TD2@€TD0@TW10@ºTW5@(rounding to 5 decimal places).TW10@TW5@I see noTtC0@ chance that programs could automatically make such roundingssince sometimes 2^(-55) can be a correct result.For example, if a fair coin is tossed 55 times, the probability of getting heads only is 2^(-55)=2.7755575615629e-017, not 0.Tÿ




Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Arrow diagram of a correlation matrix TtC2@TW20@Ta1@üThere are several means for displaying correlation (and other) matricesso that interesting connections between variables are highlighted.Here an arrow diagram is used for such a presentation.The Survo data file DECA of 48 athletes and 12 variables (10 eventscores + Height and Weight of the athlete) is suitable for thispurpose.The main idea is to place variables as points on the circumference ofa circle thus forming a regular 12 sided polygon and to connect them bylines of widths depending on the magnitude of the correlation and colorred for positive and blue for negative correlation.TtC2@TW70@TW5@TtC0@A proper order for variables is set by the specificationMASK=--BCDEFHIJKLAGand the correlation matrix CORR.M is computed by selecting variablesin 'alphabetic' order given in MASK:CORR DECATtC2@TW10@TD2@€TD0@TW5@TtC0@Taking a crude look at correlations:MAT LOAD CORR.M,11.1,CUR+1TtC2@TW10@TD2@€TD0@TW5@TtC0@TtC2@TW30@TW5@TtC0@Now this matrix will be transformed step by step in order to make itsuitable for plotting as an arrow diagram:n=12MAT R=CORR.M  / R is a copy of the original matrixTtC2@TW10@TD2@€TD0@TW5@üTtC0@TtC2@TW20@üTtC0@Removing diagonal elements:MAT R=R-IDN(n,n)TtC2@TW20@€TW5@TtC0@Multiplying correlations by 10 and rounding to the closest integer:MAT TRANSFORM R BY round(10*X#)TtC2@TW20@€TW5@TtC0@Setting color 1 for positive correlations and 2 for negative:MAT #TRANSFORM R BY if(X#>0)then(abs(X#)+0.0001)else(abs(X#)+0.0002)TtC2@TW20@€TW5@TtC0@Setting heads for arrows of 'external' variables Height and Weight:TW5@MAT #TRANSFORM R BY if(I#=1)then(X#+0.01)else(X#)TtC2@TW20@€TW5@TtC0@MAT #TRANSFORM R BY if(I#=7)then(X#+0.01)else(X#)TtC2@TW15@€TW5@TtC0@Setting 'too small' values to zero:MAT #TRANSFORM R BY if(X#<0.1)then(0)else(X#)TtC2@TW10@€TW5@TtC0@Removing heads from arrows between external variables:MAT R(1,7)=R(1,7)-0.01TW5@TtC2@TW20@€TW5@MAT R(7,1)=0TW10@€TW5@TtC0@Converting to negative values (getting filled arrow heads):MAT R=(-1)*RTW5@TtC2@TW20@€TW10@TW5@TtC0@Setting positions of names of variables by defining an auxiliary data:TtC2@TW20@DATA DECA12,A,A+11,N,MTW10@üMNü AAAAAAAA 11.111 11.111   11.111 11.111 Event     X      Y        X'     Y'TtC0@MAT LOAD R(*,1) / getting labels by loading the first column of RTtC2@TW20@€TW10@üTW5@ADELETETW5@€TW5@TtC0@€€€€€€€TtC2@TW5@üBINSERTBTW5@€TW5@üTW5@TtC0@TtC2@TW10@TtC0@üSetting points of variables on the circumference of a circle:VAR X,Y TO DECA12 / calculating coordinates of the pointsX=cos(2*(ORDER-1)/n*pi) / pi=3.141592653589793Y=sin(2*(ORDER-1)/n*pi)BüTW5@TtC2@TW20@TD2@€TD0@TW20@üTW5@TW5@üTtC0@..........R1=1.17 R2=1.1 C=0.1 pi=3.141592653589793 n=12VAR X',Y' TO DECA12 / labels (names of variables) on a suitable ellipseX'=R1*cos(2*(ORDER-1)/n*pi)-C   Y'=R2*sin(2*(ORDER-1)/n*pi)BTtC2@TW20@TD2@€TD0@TW10@üTtC0@TtC2@TW5@..........TW5@TtC0@Plotting the arrow diagram by connceting points (X,Y) in data tableDECA12 by arrows defined in matrix file R:FILL(-1)=0,1,1,0 FILL(-2)=1,1,0,0 colors red and blue    HOME=300,500DEVICE=PS,K1.PS (graph saved in PostScript file K1.PS)      SLOW=3000SIZE=1500,1500 XDIV=0,1,0 YDIV=0,1,0 HEADER= XLABEL= YLABEL= FRAME=0PLOT DECA12,X,Y / POINT=3,20 µARROWS=R,50µµµµµµµ SCALE=-1.5,1.5Tp        Plotting speed slowed down by SLOW=3000@üBTtC2@TW20@TD2@€TD0@TW10@Tp@..........TtC0@Plotting labels (Event) of variables to points (X',Y') of DECA12:PLOT DECA12,X',Y' / POINT=[Swiss(9)],EventDEVICE=PS,K2.PS (graph saved in PostScript file K2.PS)   HOME=300,500SIZE=1500,1500 XDIV=0,1,0 YDIV=0,1,0 XLABEL= YLABEL= FRAME=0üPLOT DECA12,X',Y' / µPOINT=[Swiss(9)],Eventµµµµµµµ SCALE=-1.5,1.5üBTtC2@TW20@TD2@€TD0@..........TtC0@EPS JOIN Connections.PS,K2.PS,K1.PS / Combining PS filesTtC2@TW10@TD2@€TD0@TW5@TtC0@Converting to PDF and displaying by the Ghostscript program:/GS-PDF Connections.PSTtC2@TW10@TD2@€TD0@Tÿ















 HEADER=[Swiss(15)],Connections_in_Decathlon{R}

Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ "Origin of Species" TtC2@TW10@Ta1@üXDIV=0,1,0 YDIV=0,1,0 SIZE=1180,1180 HEADER= FRAME=3 HOME=300,500A=-8,10,1        B=-8,10,1        T=0,2*pi,pi/30 pi=3.14159265XSCALE=-9,11     YSCALE=-9,11     DEVICE=PS,SPECIES.PSPLOT X(T)=A+0.225*SIN(T)+0.139*SIN(A*T)+0.086*SIN(B*T),     Y(T)=B+0.225*COS(T)+0.139*COS(A*T)+0.086*COS(B*T)TtC2@TW50@TD2@€TD0@TW10@/GS-PDF SPECIES.PSTW10@TD2@€TD0@Tÿ


Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Cooling of a coffee cup üThe following data set was collected by Rolf Dahlstr”m and his pupilsin a Finnish secondary school (Pohjoispuiston lukio, Hyvink„„)in late 1980ies.Temperature T (in C) of a coffee cup as a function of time t (in min)DATA CUP:(t,T) 0,69.5 1,65.0 2,62.5 3,60.0 4,58.0 5,56.0 6,54.5 7,53.0 8,51.5 9,50.0 10,48.5 11,47.5 12,46.5 13,45.5 14,44.5 15,43.5 16,43.0 17,42.0 18,41.0 19,40.5 20,39.5 21,39.0 22,38.5 23,38.0 24,37.5 25,36.5 ENDSimple plot of data obtained byüLo¶BWIN GET SIZECurrent window: 0 0 652 381w=652 h=381WHOME=0.53*w,0.51*h WSIZE=0.45*w,0.43*h PEN=[Swiss(25)]XSCALE=0(5)25 YSCALE=30(10)70 POINT=[RED],0,5XLABEL=¶¶LOüGPLOT CUP,t,T€üLo¶BSCRATCH€¶¶LOüTtC2@TW70@üTW5@TW5@TtC0@The cup temperature was thus measured for 25 minutes but not obviouslyuntil it reached the room temperature which is not known.I found some documents where the cooling function was attempted to beestimated for this data but without a success.Then (being unfamiliar with thermal physics) I tried to estimate itassuming that cooling can be analogous to radioactive emission.Therefore I started by fitting the following functionexpressed here as a model for the ESTMATE program of Survo:MODEL CUP1 / Exponential decayT=T0+a*exp(-b*t)TtC2@TW90@üTW5@TW5@T0=24 a=1 b=0.1 / Initial values for unknown parametersTW10@An ESTIMATE command referring to model CUP1 and data CUP is activated:TW5@ESTIMATE CUP,CUP1,CUR+1 / METHOD=M RESULTS=0TW10@üTD2@€TD0@TW50@TtC0@The fit seems to be pretty good according to R^2=0.99788 butthe room temperature T0=32.004is obviously too high for suchin Finland.TtC2@TW50@ü.±TW5@TW5@TW5@TtC0@Since it is plausible to think that the heat is emitted in severalways simultaneously, I generalized the model to formMODEL CUP2T=T0+a*exp(-b*t)+c*exp(-d*t)having two exponential components representing maybe the emission fromthe surface and from the walls of the cup with different coolingintensities (b,d) and proportions (a,c).Then ESTIMATE gives with initial valuesT0=24 a=1 b=0.1 c=1 d=0.01ESTIMATE CUP,CUP2,CUR+1 / METHOD=M RESULTS=0TtC2@TW30@TD2@€TD0@üTW5@The fit is essentially better, butT0=29 is still too high.TW30@TtC0@TtC2@TW5@It would be TtC0@really valuable to know the right value. A good guess couldbe T0=24 and let's estimate the two-component model still once keepingT0 fixed as follows:.±#T0=24 (# means a fixed value) a=1 b=0.1 c=1 d=0.01ESTIMATE CUP,CUP2,CUR+1 / METHOD=M RESULTS=0TtC2@TW10@TD2@€TD0@TW20@TtC0@üThe fit is almost as good as inthe free model.TtC2@TW30@TW5@TW5@I playedTtC0@üLoGPLOT /DEL ALL€BºLOü with this data set and these models in late 1980ies.Then there was neither Internet nor Web. Now when making this demo in2010, I took a look in Wikipedia with a search "Cooling law" (directlyfrom Survo by activating this term by key combination F1 W) and foundeventually 'Newton's law of cooling' which as a solution of adifferential equation gives the same functional representation that wasused in this demo. It seems to be a good approximation for moreaccurate models in heat transfer.In situation like this when the data has a monotonous character,it is always hazardous to select a model by pure guesswork sincethere are so many alternative functional forms.However, finding now that alredy Isaac Newton had presentedthe same function gives some credence to this example.Tÿ






  cup temperature







Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Symbolic derivatives üSurvo 'knows' the rules for finding symbolic derivatives of realfunctions by using the DER command.This feature is useful especially when dealing with nonlinearstatistical models and maximum likelihood estimation done by theESTIMATE program.In teaching DER is useful for learning rules of differentiation.üTtC2@TW40@üIt is easy to use the DER command:TW10@DER f(x) xTW10@TD2@€TD0@TW20@TW5@TW5@Let's try a product of two functions f(x)*g(x):TW10@DER f(x)*g(x) xTW10@€TW20@Thus Survo knows the rule how to differentiate products.TW20@Similarly for a quotient f(x)/g(x)TW5@DER f(x)/g(x) xTW5@€TW20@or for functions of functionsTW5@DER f(g(x)) xTW5@€TW20@Also elementary functions are familiar...TW10@DER sin(x) xTW5@€TW20@DER log(x) xTW5@€TW20@...as well as their combinations:TW5@DER log(sin(x)) xTW5@€TW20@The power function is denoted x^n:TW10@DER x^n xTW5@€TW20@Differentiation can be repeated and with respect to other variables:TW10@DER (x+a)^n xTW5@€TW20@±CUR-2TW5@DERTW5@º aTW5@€TW20@DER is sometimes helpless in simplifying,TW5@ but that is easy by editing:TW10@±CUR-3TW5@TW5@2TW5@TW5@TW5@TW5@DERTW5@ºTW5@ nTW5@€TW20@The last expression is the third derivative of F(x,a,n)=(x+a)^nTW5@after differentiation once for each argument x,a and n.TW20@Tÿ




Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BTtC0@WIN GET SIZEw=652 h=381Current window: 0 0 652 381WHOME=0,0 WSIZE=w,h WSTYLE=0COLX W20€BTtC0@LOAD INDEXBüTtC0@ µ Chords of ellipses (1990 by SM)SIZE=681,381 XDIV=0,1,0 YDIV=0,1,0 MODE=681,381SCALE=0,7 FRAME=0 SLOW=100t=0,50,1 n=0,35,1 r=-1.0,-0.1,0.1GPLOT X(t)=int(n/6)+1+r*cos((-7*r+n)*t),      Y(t)=n+1-6*int(n/6)+r*sin((-7*r+n)*t)COLORS=[/BLACK]COLOR_CHANGE=n-10*r,16ü¶TXA@TtC2@TW20@TD2@€TD0@TW100@üTtC0@LoGPLOT /DEL ALL€B¶L0GPLOT /DEL ALL€üTÿ



Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Linear dependencies in a matrix üPossible linear dependencies of columns in a 8*7 matrix A is studiedby using the matrix interpreter (MAT commands) of Survo.Matrix A with row and column labels is entered as follows:TW10@MATRIX A/// C1 C2 C3 Sum1 C5 C6 Sum2R1   3  4 -1    6  2 -3   -1R2   5  2  3   10  5  5   10Ta1@R3   0 -6  7    1  0  0    0R4   3  3  3    9  3  1    4R5   5 -2  4    7  1  7    8R6   3  0  0    3  2 -6   -4Ta-1@R7   1  2  3    6  3  8   11R8   8  1 -5    4  4  0    4In this case there are two trivial linear dependencies between columns,Sum1=C1+C2+C3 and Sum2=C5+C6. Of course, the matrix interpreteronly carries the labels logically through calculations, but does not`see' that columns `Sum1' and `Sum2' are sums of certain other columns.TtC2@TW100@Then no informationTtC0@ is lost if these two columns were eliminated.Often such dependencies are not so clear but more complicatedand hidden even from keen human eyes. Then we need special tools fordetecting them.TtC2@TW80@TW5@By activating the following line, matrix A is saved in a matrix file:TW5@MAT SAVE ATD2@€TD0@TW10@TtC0@The µSµµµµµµµingular µVµµµµµµµalue µDµµµµµµµecomposition is a good tool for examining anatomyof any matrix. That decomposition of A is computed by the command:TtC2@TW30@MAT µSVDµµµµµµµ OF A TO U,D,VTD2@€TD0@TW10@In this this caseTtC0@ the main interest is in singular valuessaved in a vector D and loaded into the edit field by the command:TtC2@TW30@MAT LOAD D,12.123456789012345,CUR+1TD2@€TD0@TW20@TW5@The factTtC0@ that two last singular values are practically zero impliesthat there are two dependencies between columns. These dependencies areat the same time revealed by the two last columns of matrix V (the lastcomponent in SVD) and these columns are loaded byMAT LOAD V(*,6:7)TtC2@TW20@TD2@€TD0@Tp        Columns of V are vectors of length = 1.@TW50@TW5@For example,TtC0@ the second column has to say that-0.5*C1-0.5*C2-0.5*C3+0.5*Sum1=0 which is the same as C1+C2+C3=Sum1as we knew beforehand. Similarly, the first column says: C5+C6=Sum2.TtC2@TW70@Tp@üAs we can seeTtC0@ on the preceding lines, the SVD composition revealsthe linear dependencies exactly, but it cannot tell anything aboutwhich two columns should be removed from the original matrix A.For example, instead of 'Sum1' and 'Sum2', columns 'C3' and 'C6'could be removed and full information will be still kept in A.However, we may ask, which is the best selection for the remaining5 columns?My solution for this problem (originated already in 1962 in connectionwith the so-called cosine rotation in factor analysis) is to findfrom the given 7 columns those 5 columns which are maximallyindependent or orthogonal. In my approach the measure for orthogonalityis a certain determinant value computed for 5 selected columns.In larger applications, this is a very hard task but in this casewe have only C(7,5)=21 alternatives.TtC2@TW170@üIn orderTtC0@ to find the best subset of columns of A according to thedeterminant criteria, the matrix of cosines between angles of allcolumn vectors is computed byMAT C=MTM(NRM(A))TtC2@TW20@TD2@€TD0@The most TtC0@orthogonal subset of 5 vectors is then found by the specialmatrix program called by a commandMAT #MAXDET(C,5,S)TtC2@TD2@€TD0@ThusTtC0@ 5 maximally orthogonal columns of A is found by using `cosinematrix' C=MTM(NRM(A)) and the result is saved as a column vector S:MAT LOAD STtC2@TW20@TD2@€TD0@TW30@1's TtC0@indicate the columns selected and the reduced form of the originalmatrix is obtained as a submatrixTtC2@TW30@TW5@MAT B!=SUB(A,*,S) / TtC0@selects all rows but columns indicated by STtC2@TD2@€TD0@MAT LOAD BTD2@€TD0@TW40@TtC0@Please note that it is very helpful that matrices in Survocan be labelled with legible row and column names. In thiscase we see immediately that in the best subset the two`extra' columns, `Sum1' and `Sum2', have been eliminatedas shown already in the display of the S vector.Tÿ




Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Temperature in Helsinki üThe air temperature has been recorded continuously in Helsinki(Kaisaniemi close to the center) from year 1829.Also the rainfall has been measured there since 1845.The monthly data of the mean temperature (Cø) and rainfall (mm)are saved in a Survo data file HEL_TR.FILE SHOW HEL_TR / browsing the dataTtC2@TW60@üTD2@€³=1844³=2009²üTD0@TW10@TW10@TtC0@Let's study how the yearly mean temperature has been changed duringyears 1829-2009.A new file of these mean values is created by Survo as follows:TtC2@TW40@TtC0@MASK=--A- / setting 'Temp' as the only active variableFILE AGGRE HEL_TR,HEL_MEAN / AGGRE=Year,MEANTtC2@TW10@TD2@€TD0@TtC0@ü¶LoFILE MASK HEL_MEAN,Year,1,A-A-€B¶¶LOüTtC2@TW10@TtC0@FILE SHOW HEL_MEAN / browsing meansTtC2@TW10@üTD2@€³=1991²TD0@TW10@üTW5@Estimating TtC0@a linear trend:VAR Trend=0 TO HEL_MEAN / creating a new variable 'Trend'€Computing linear regression model and saving 'µPredictionsµµµµµµµ' in 'Trend'LINREG HEL_MEAN,CUR+1 / VARS=Temp(Y),Year(X),µTrend(P)µµµµµµµ RESULTS=0üTtC2@TW50@TD2@€TD0@TW30@TW20@TW5@TtC0@üMaking a graph:Normally this kind of graph is created step by step by inserting morespecifications. Now only the final plotting scheme is presented:YLABEL=[Arial(25)],Yearly_mean_temperature_in_Helsinki_(1829-2009)GPLOT HEL_MEAN,Year,Temp / SIZE=652,381 YDIV=50,291,40XSCALE=1829(20)2009 YSCALE=1.5(0.5)8  TICK=5,1 TICK2=5,1LINE=[WHITE],1 TREND=[BLACK],0 PEN=[BLACK]FILL=[RED],1,1,181,Trend,1 FILL-=[BLUE]XDIV=50,539,50 HEADER=   WHOME=0,0 WSIZE=652-5,381-25üTtC2@TW30@TD2@€TD0@TW50@GPLOT /DEL ALL€Tÿ











Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Fence lines üThe "fence activation" technique is available when working in theedit field so that results of a command do not overlap other commandsor some important text.TtC2@TW50@When we activate the MINSTAT command in the following situation,TW5@MINSTAT DECA,CUR+1 / MASK=-AAATW5@CORR DECA,CUR+1TW5@üTD2@€TD0@TW20@üthese results destroyed the CORR command on line 12.TW20@Such overlays are avoided by setting special µfence linesµµµµµµµ.TW30@Tp        Restoring the original situation in an improved form...@TW15@TW5@TW10@Tp        Setting a fence line *##########@TW10@TW5@##########TW20@TW5@Tp        Inserting # in front of the command...@TW10@#TW30@Tp        Retyping the CORR command in a similar form...@TW10@#CORR DECA,CUR+1TW5@BTW5@##########TW5@Tp        and activating now both commands...@TW10@üTW5@TW5@üTD2@€TD0@TW10@TD2@€TD0@TW20@TW20@üTp        Altering the set of variables and activating again...@TW20@A continuous activation by an /ACTIVATE command:TW20@üTW5@TW5@+TW5@TW5@+TW5@   (now with a single variable)TW10@TW5@TW5@/ACTIVATE +TD2@€TD0@TtC2@TW20@Tÿ








Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Small problem of Ramanujan Srinivasa Ramanujan (1887-1920) was a famous mathematician who,with almost no formal training in pure mathematics made substantialcontributions in various branches of mathematics.In 1911 he posed the following problem in an Indian journal.He simply asked the reader to evaluateüLoGPLOT FILE RAMA1 / WSTYLE=0 WSIZE=214,30 WHOME=100,155€TtC0@LOTtC2@TW5@TtC0@üSince during over six months no reader had offered a solution,Ramanujan supplied it himself.This is a seemingly difficult problem but it becomes trivial if oneknows the answer. At that time, without computers, it was not easyfind even approximate values.One can see immediately that the question is of the value of functionüLoGPLOT FILE RAMA2 / WSTYLE=0 WSIZE=252,27 WHOME=100,280€LOüfor n=2.üTtC2@TW150@TtC0@BüGPLOT /DEL ALL€üTtC2@TW5@üThis recursive function is presented in Survo asTW5@F(n):=if(n=30)then(x)else(sqrt(1+n*F(n+1)))TW30@and by making various guesses about x,TW5@ value of F(30)TW5@ we find thatTW5@for x=1     F(2)=TD2@€TD0@TW10@for x=10    F(2)=TD2@€TD0@TW10@for x=100   F(2)=TD2@€TD0@TW10@and this leads us to assume that the true value is exactly 3.TW20@Now the expression may be regenerated simply by starting from 3:TW20@üTtC0@LoGPLOT FILE RAMA3 / WSTYLE=0 WSIZE=363,30 WHOME=100,208€LOTtC2@TW40@üand the whole idea of the problem is based on the simple identityTW10@üTtC0@LoGPLOT FILE RAMA4 / WSTYLE=0 WSIZE=337,27 WHOME=100,265€LOü.TtC2@Tÿ













Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ July mean temperature and rainfall in Helsinki 1845-2009 The relation between mean temperature (TEMP) and rainfall (RAIN)is studied by making a scatter plot of these variables.A data file Hel_July consisting of only July observations is createdfrom the monthly data file HEL_TR byFILE COPY HEL_TR TO NEW Hel_July / IND=Month,7üTtC2@TW80@TD2@€TD0@TW10@TtC0@üThe following setup for making a scatter plot is developedstep by step. Here only the final form is shown:*GLOBAL* WHOME=0,0 WSIZE=652,381 WSTYLE=0 XDIV=50,552,50 YDIV=40,281,60üB                                                               üHEADER=[Arial(40)],July_temperature_and_rainfall_in_Helsinki_1845-2009FRAME=1 PEN=[BLACK][Swiss(30)]  MODE=1000,600TEXTS=XLAB XLAB=Mean_temperature_(C),640,0 XLABEL=YLABEL=Rainfall_(mm)GPLOT Hel_July,Temp,Rain / POINT=[RED],0,5 µOUTFILE=AüTtC2@TW80@TD2@€TD0@TW60@TtC0@GPLOT /DEL ALL€üTtC2@TW20@ü.±TtC0@The graph is made more legible by setting the years as labels at thepoints. For this purpose a string variable Year2 with values like'__1845' is created. Underscores '_' are hidden in the graph:üTtC2@TW40@TW5@TW10@üTtC0@VAR Year2:S6=MISSING TO Hel_JulyTtC2@TD2@€TD0@TtC0@VAR Year2=Year TO Hel_JulyTtC2@TD2@€TD0@TtC0@VAR str(Year2,1,2)="__" TO Hel_JulyTtC2@TD2@€TD0@TtC0@µINFILE=Aµµµµµµµ / The new plot overlays the previous one.GPLOT Hel_July,Temp,Rain / POINT=[Arial(20)],Year2üTtC2@TW20@TD2@€TD0@TW40@GPLOT /DEL ALL€Tÿ











Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Approximate squaring of a circle It has been shown already in 1882 that it is impossible to constructa square with the same area as a given circle by using onlyfinite number of steps with compass and straight edge.However, it is still challenging to try find simple constructionsgiving good approximation solutions.This is related to a more general problem how to measure accuracy ofa geometric construction when there may occur a random errorin each stage of the process.I have studied this problem in a paper"Statistical accuracy of geometric constructions" (2008)http://www.survo.fi/papers/GeomAccuracy.pdfIn that study certain well-known approximate solutions are presentedand compared to my own constructions which are found by randomsearches among certain classes of constructions.One of these new constructions is the following one:/OPEN CL4G.PDFTtC2@TW50@€Tÿ

Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüREDIM 3000,200€BüCOLX W20€BLOAD INDEXü   µµµµµµµ Symmetric random walk This example originates from William Feller's bookAn Introduction to Probability Theory and Its Applications, Vol.I(2nd Edition 1957) Chapter XIV.7 "Random Walks in the plane and space".The following problem is given on page 337:In a two-dimensional symmetric random walk starting at the originthe probability that the nµµthµµµµµµ step takes the particle to (x,y) isüLoGPLOT FILE ex35_f1 / WSTYLE=0   WSIZE=478,51 WHOME=98,185€BLOüWhen studying statistics and probability in 1959, I wrote an essay onthis subject after founding that I could derive a simpler expressionas a product of two binomial probabilities in the formüLoGPLOT FILE ex35_f2 / WSTYLE=0 WSIZE=274,53 WHOME=100,300TtC2@TW3@TtC0@€BLOüTtC2@TW100@TtC0@GPLOT /DEL ALL€BLOüLet's see how this simpler formula is derived by starting fromone-dimensional random walk.Then the particle moves in states ...,-3,-2,-1,0,1,2,3,... by startingfrom 0. If it is in x, the next step takes it to x+1 with probabilityp and to x-1 with probability q=1-p.Then the probability that the particle is in x after n steps isüLoGPLOT FILE ex35_f3 / WSTYLE=0 WSIZE=323,50 WHOME=100,140€BLOTtC2@TW3@TtC0@üs is the number of steps to the 'right' and n-s the same to the 'left'.In the symmetric random walk p=q=1/2 we haveüLoGPLOT FILE ex35_f4 / WSTYLE=0 WSIZE=168,52 WHOME=100,220€BLOüif n+x is even and P1(n,x)=0 if n+x is odd.üTtC2@TW100@TtC0@LoGPLOT /DEL ALL€BüIn a two-dimensional symmetric random walk the particle moves from (x,y)in one step to one of the four points(x+1,y),(x-1,y),(x,y+1),(x,y-1) with probability 1/4.üGPLOT FILE EX35PS1.EMF  / WSTYLE=0 WHOME=345,195 WSIZE=303,178€BLOTtC2@TW30@üIt is worthwhile TtC0@"to rotate coordinate axes by 45 degrees" and studythe position of the particle on linesx+y=s, s=...-3,-2,-1,0,1,2,3,..., x-y=t, t=...-3,-2,-1,0,1,2,3,...,When it moves to a point (x,y), it moves to (s,t) in the rotatedcoordinates and thus performs simultaneusly two µindependentsymmetric random walks on these lines. Then we have when n+x+y is evenand |x|+|y| is at most nüLoGPLOT FILE ex35_f5 / WSTYLE=0 WSIZE=278,145 WHOME=68,195€BLOüOtherwise this probability is 0.üTtC2@TW120@TtC0@LoGPLOT /DEL ALL€BTtC2@TW5@LOTW5@üFrom this simple expression TtC0@it is easy to derive an asymptotic formulaüLoGPLOT FILE ex35_f6 / WSTYLE=0 WSIZE=271,44 WHOME=100,75€BLOüwhich shows that the probability depends on (x,y) just through theEulidean distance to (0,0) and the limiting distribution is bivariatenormal with a variance n/2 in each direction in the plane.üTtC2@TW50@TtC0@üFor example, points (5,0) and (3,4) have the same distance from (0,0).By definingP2(n,x,y):=C(n,(n+x+y)/2)*C(n,(n+x-y)/2)*4^(-n)and especially the ratio R(n):=P2(n,3,4)/P2(n,5,0) of theirprobabilities in n steps we haveüTtC2@TW30@ü  R(7)=TW10@TtC2@€TW10@  R(9)=TW10@€TW10@TtC0@ R(15)=€ R(25)=€R(101)=€R(201)=€R(301)=€TtC2@TW30@üTa1@LoGPLOT /DEL ALL€BLOüLet's study the situation graphically after 500 and 501 steps.TtC2@TW20@TtC0@A data file XY of lattice points X,Y=-20,-19,...,19,20 is made byfirst applying a COMB operationüCOMB L,CUR+1 / L=LATTICE,2 MIN=-20,-20  MAX=20,20üTtC2@TW30@TD2@€TD0@üTW5{erase@TW5@TW5@ X   YTW5@DATA KTW5@TW3@TW5@FILE COPY TtC0@K TO NEW XY / Lattice points are copied to a data file XY.TtC2@TW20@TD2@€TD0@TW5@TW5@SCRATCH TW5@€TW5@.±Computing TtC0@probabilities after N=500 steps:VAR P500:8 TO XYP500=C(N,(N-abs(X)-abs(Y))/2)*C(N,(N-abs(X)+abs(Y))/2)/4^NüTtC2@TW20@TD2@€TD0@TW5@TtC0@üand their square roots:VAR P500=sqrt(P500) TO XYTtC2@TD2@€TD0@.±Computing TtC0@probabilities after N=501 steps:VAR P501:8 TO XYP501=C(N,(N-abs(X)-abs(Y))/2)*C(N,(N-abs(X)+abs(Y))/2)/4^NüTtC2@TD2@€TD0@TW5@TtC0@üand their square roots:TW10@VAR P501=sqrt(P501) TO XYTtC2@TD2@€TD0@.±üTtC0@The probabilities are now represented as circles so thatthe area of the circle corresponds to the probability.At first the probabilities after 500 steps:SCALE=-20,20 FRAME=0 WHOME=292,24 WSIZE=355,355 WSTYLE=0MODE=1000,1000 XDIV=1,40,1 YDIV=1,40,1 HEADER= XLABEL= YLABEL=GPLOT XY,X,YPOINT=0,10,P500,0.03 OUTFILE=AüTtC2@TW20@TD2@€TD0@TW20@.±üTtC0@LoGPLOT /DEL ALL€BLOüTtC2@TW5@üThen the probabilitiesTtC0@ after 501 steps are inserted as red circles:SCALE=-20,20 FRAME=0 WHOME=292,24 WSIZE=355,355 WSTYLE=0MODE=1000,1000 XDIV=1,40,1 YDIV=1,40,1 HEADER= XLABEL= YLABEL=GPLOT XY,X,YPOINT=[RED],0,10,P501,0.03 INFILE=AüTtC2@TW10@TD2@€TD0@TW10@TtC0@üLoIt can be seen thatalready in this stagethe contour curves of thedistribution are close toorigin-centered circles.LOTtC2@TW50@GPLOT /DEL ALL€Tÿ









































Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü    TtC8@TD1@µGµNµIµSµRµEµVµEµRüµµµµµµµ-´»»=ü-´»»=TD0@TtC2@TW10@Text andTtC0@ other objects in the edit field can be reversed in many ways.The start of this demo was an example of using the µworm modeµµµµµµµ.üTtC2@TW30@üAnother toolTtC0@ for such µµimportantµµµµµµ tasks is the REVERSE command with threeoptions. The following text is pasted from the uncyclopediahttp://uncyclopedia.wikia.com/wiki/EsreveR.emit fo tol a meht devas ti sa lufpleh dna gnisimorp yrev sawtluser ehT .pu kcab ot dediced neht dah snaitpygE eseht tahtderevocsid evah snairotsiH .niaga dimaryp rieht ot teg ot dnuorayaw eht lla og yllautca ot egral oot raf saw htrae eht ecnisnoitisop tluciffid ylsuomrone na desop siht esruoc fO .syawedisdetniop erew sdaeh rieht woh fo esuaceb dimaryp rieht dessap dahyeht taht dezilaer yeht nehw tseb od snaitpygE tahw gniod erewsnaitpygE emos s'cb dnasuoht eerht dim eht ni emit emoSesrever fo yrotsiHüTtC2@TW70@TW5@TW5@üREVERSE TtC0@CUR+1,END,2 / Reversing characters as in Worm mode...üTtC2@TD2@€TD0@TW20@TW5@TW5@TW5@REVERSE TtC0@CUR+1,END,1 / Reversing lines...üTtC2@TD2@€TD0@TW20@üTW5@TW5@üREVERSE TtC0@CUR+1,END   / Reversing words by lines...üTtC2@TD2@€TD0@TW20@ü Once again...TtC2@TD2@€TD0@Tÿ













Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüLOAD <Survo>\U\D\BIRDNAMES€TgC1@C1@C!@C1@C1@üCOLX W20€BLOAD INDEXü   µµµµµµµ Birds (word and phrase completion) üAssume that I am writing about birds seen or heard in our surroundings.Let it be a 'scientific' report including also the Latin names ofspecies to be mentioned, but I do not know all of them. Survo is ableto help me in this task by its word and phrase completing features asfollows:TtC2@TW50@We areTtC0@ living on the countryside in Central Finland.TtC2@TW20@TypicalTtC0@ birds in winter time are, for example, tits likeTtC2@TW20@üGreat TitTD2@J  TD0@TW15@,TW5@Blue TitTD2@J  TD0@TW5@, andTW5@Crested TitTD2@J  TD0@TW5@TW5@TW5@TRIMTD2@€TD0@TW5@TW5@ºTW5@ as well asüCrowTD2@J  TD0@TW5@,TW5@Hooded CrowTD2@J   TD0@TW5@,Black WoodTD2@J  TD0@TW5@, andTW5@BullTD2@J  TD0@TW5@TW5@TW5@TRIM€TW5@ºTW5@ and so on...TW10@How I gotTtC0@ these Latin names while typing the text?TtC2@TW20@These namesTtC0@ were automatically picked from a list which was loadedas an ready-made file (edit field) before I started writing.TtC2@TW30@This listTtC0@ starts from the next page:TtC2@TW15@TD2@TD0@TW10@TW10@TW10@TW10@TW20@üBy usingTtC0@ the key combination F1 J the Survo Editor can completeany word or phrase. For example, the Latin name of 'mandarin duck'is found as follows just by entering a few first letters:TtC2@TW40@MaüTD2@J   TD0@TW10@The firstTtC0@ alternative starting by 'Ma' (Marsh Warbler) was ignored bypressing the DEL key.Tÿ







Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Graphical rotation in factor analysis One of Survo highlights is the possibility to perform µgraphicalrotations in connection with factor analysis.In this demo we shall use a ready-made tutorial found inthe help subsystem of Survo. It is called here directly by activating/HELP-ROT1TtC2@TD2@€TD0@Tÿ

Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Pythagorean points on a green meadow üüüA triple of integers X,Y,Z satisfying the equation X^2+Y^2=Z^2is called a Pythagorean triple.Then a right triangle exists with legs X,Y and hypotenuse Z.Now a scatter diagram of X,Y (X=1,2,...,100, Y=1,2,...,100)will be plotted so that each point will have a color on thecolor scale from red to green depending on how close Z=sqrt(X^2+Y^2)is to an integer.Thus if X,Y,Z is a Pythagorean triple, point (X,Y) is red anddepending on how much Z differs from an integer the colorwill change gradually from red towards green.The plot thus obtained tells much more about Pythagorean triplesthan a standard dichotomic black and white picture.It reveals interesting curved traces between neighbouring points.These relations are studied inhttp://www.survo.fi/papers/pythagorean.pdf.Our graph will now be developed through following steps:üTtC2@TW150@TtC0@.±TtC2@TW5@üµDefiningTtC0@ 21 colors gradually from green to red: FILL(-1)=1.00,0.00,1.0,0   FILL(-11)=0.50,0.50,1.0,0 FILL(-2)=0.95,0.05,1.0,0   FILL(-12)=0.45,0.55,1.0,0 FILL(-3)=0.90,0.10,1.0,0   FILL(-13)=0.40,0.60,1.0,0 FILL(-4)=0.85,0.15,1.0,0   FILL(-14)=0.35,0.65,1.0,0 FILL(-5)=0.80,0.20,1.0,0   FILL(-15)=0.30,0.70,1.0,0 FILL(-6)=0.75,0.25,1.0,0   FILL(-16)=0.25,0.75,1.0,0 FILL(-7)=0.70,0.30,1.0,0   FILL(-17)=0.20,0.80,1.0,0 FILL(-8)=0.65,0.35,1.0,0   FILL(-18)=0.15,0.85,1.0,0 FILL(-9)=0.60,0.40,1.0,0   FILL(-19)=0.10,0.90,1.0,0FILL(-10)=0.55,0.45,1.0,0   FILL(-20)=0.05,0.95,1.0,0                            FILL(-21)=0.00,1.00,1.0,0üTtC2@TW30@TtC0@TtC2@üµCreatingTtC0@ a new data file P_TRIPLE:FILE CREATE P_TRIPLE,64,8FIELDS:1 N 2 X2 N 2 Y3 N 4 ZENDüTtC2@TW10@TD2@€TD0@üTW5@TtC0@M=100FILE INIT P_TRIPLE,10000 / Initialize with 100x100 points.TtC2@TD2@€TD0@üTW5@TtC0@üµCreating TtC0@a grid of points (X,Y):X=int((ORDER-1)/M)+1Y=ORDER-X*M+MVAR X,Y TO P_TRIPLETtC2@TD2@€TD0@µCompTtC0@uting Z values:VAR Z=sqrt(X*X+Y*Y) TO P_TRIPLETtC2@TD2@€TD0@µCompTtC0@uting deviation from the nearest integer:D=min(Z-int(Z),int(Z+1)-Z)VAR D TO P_TRIPLETtC2@TD2@€TD0@üTtC0@TtC2@TW5@üµNon-linearTtC0@ mapping of D values to color indices -20,-19,...,-1:F=-int(20-20*(2*D)^0.2)-1VAR F:2 TO P_TRIPLETtC2@TD2@€TD0@üTtC0@üµMaking the graph:SCALE=0,100 XLABEL= YLABEL= HEADER= FRAME=0 WSTYLE=0MODE=409,409 WSIZE=409,409 WHOME=652-409,0XDIV=0,1,0 YDIV=0,1,0GPLOT P_TRIPLE,X,Y / POINT=6,3 POINT_COLOR=F OUTFILE=AüTtC2@TW20@TD2@€TD0@üTW30@TtC0@See, for example,how neighbouringPythagorean pointsare connected by afamily of hyperbolas.LR1Loü.±SCALE=0,100 XLABEL= YLABEL= HEADER= FRAME=0 WSTYLE=0MODE=409,409 WSIZE=409,409 WHOME=652-409,0XDIV=0,1,0 YDIV=0,1,0C=1(1)30pi=3.141592653589793T=[YELLOW][line_width(2)],0.00001,pi/2,pi/1000OUTFILE=B INFILE=AGPLOT X(T)=C*sqrt(2/tan(T))+2*C-1/4,Y(T)=C*sqrt(2*tan(T))+2*C-1/4€Lr1L0üT!1@C0@TtC2@TXA@TIN1@C4@@GE@@TW20@GPLOT FILE B€TW20@A€BT=1@1@+@C1@TLGA@TXE@GPLOT /DEL ALL€Tÿ


 def Wx=W1 Wy=W2 Wtmp=W8

















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µUnbiased coin-flips with a biased coinJ. von Neumann has presented in 1951 the following small problem:Suppose that you are given a coin for which the probability of HEADS,say p, is unknown. How you can use this coin to generate unbiased (i.e.P[HEADS]=P[TAILS]=1/2) coin-flips?TtC2@TW50@This problemTtC0@ is now studied by using a series of 1200 flips of a biasedcoin as an illustration. Here 0 stands for HEADS and 1 for TAILS:TtC2@TW20@100111110111001111101111011100110100110111110111101101111111011101011TtC0@111011100011111111111110111101111001001110011111100111101111011111111101101110000110010011111111011111010101111101111101110101111110011011111011100100101101101011010100111111111110111101110011001000011001000110110111101101111001110101010110111011011110001111111100101111111110110111111101111011001111100110111111011100110111011111111011111011111111001100101000010111110111111011000100111100101111010011001110111101111101111111011110111100010010011010100001111001111111111110011111011101001011111001111101111110001011101001100110010110110011101111010111101111111011111011011111000100010011011111011110111011100111110011101001111100101110110111111100110000010000101111011011010110100011101110001111110010000001110111010011111111011010111110010100111101011101101111111010111011000101110111011111011010010111111010101011111111011011000011100111001011011100101110001011101101101100110011100100010110111001111111111001010110111101110001011111011111110011111111011110010111101011001101111000111111111110101101111001110111111011111001111111111111010111111111101001110110011111111111001101111111111101101110111011110000111110011111111000011üTtC2@TW30@TtC0@TtC2@TW5@There TtC0@seems to be more 1's than 0's.TtC2@TW10@The numberTtC0@ of 0's is counted simply in this way:TtC2@TW10@REPLACE 0,0TD2@€CTD0@Thus TW5@TtC0@we have 380 0's in 1200 flips indicating that p is about380/1200=TtC2@TD2@€TD0@TW5@TW5@. TheTtC0@ coin is surely biased.TtC2@TW10@üTD2@TD0@TtC0@üüTtC2@TW5@The questionTtC0@ is now, how this series of biased coin-flips can beinterpreted as a result of unbiased coin-flips.TtC2@TW20@The simplestTtC0@ solution is to consider µtwo consecutive flips as one flipµof an unbiased coinµµµµµµµ by letting combination 01 correspond toHEADS and 10 to TAILS since both of them has the same probabilityp*(1-p). If pairs 00 and 11 are discarded, we have P[01]=P[10]=1/2.The pairs are displayed as follows:TtC2@TW50@INSERTTD2@€€TD0@TtC0@€€€€€€€€€€€€€€€€€€€€€€€€€€€€TtC2@TD2@TD0@TW10@REPLACE "00","",C / Removing 00's...üTtC2@TD2@€TD0@1111üTD2@€TD0@010placing 01's by 0's...üTD2@€TD0@101101üTD2@€TD0@üTW5@TW5@/SP_DEL 1 TtC0@/ Removing leading spaces from all lines below...TtC2@TD2@€TD0@TW5@TW5@TRIM 50 TtC0@/ Trimming lines to length 50...TtC2@TD2@€TD0@TW50@üTtC0@TtC2@TW20@Since TtC0@we have 10 lines with 25 flips on each (except the last one 23),the original series of 1200 biased coin-flips is reduced to 248'unbiased' flips.üTtC2@TW30@TtC0@TtC2@TW10@Let'sTtC0@ study the quality of this series by defining it as a data setCOIN.TtC2@TW20@DATA COIN:(X)TW10@TtC0@TtC2@TW10@MINSTAT COIN,CUR+1TD2@€TD0@TW20@üTtC0@TtC2@Luckily TtC0@indeed, we have exactly the same number of HEADS and TAILS.TtC2@TW20@This TtC0@does not necessarily guarantee that the 'coin' is now fair.TtC2@TW20@The randomTtC0@ness of this sequence can be investigated by a specialRUNTEST operation.TtC2@TW10@TtC0@üSIMUMAX=0üTtC2@RUNTEST COIN,X,CUR+1TD2@€TD0@TW30@TtC0@None of the tests speak against the hypothesis that COIN is a randomsequence.TtC2@TW30@Tÿ















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µOmega coin tossingThere are various situations where a dispute or choice betweentwo options should be settled as fairly as possible. A common practiceis to flip a coin and assume that it is unbiased giving HEADS andTAILS with equal probabilities.But how to guarantee that such a routine is really fair?It is essential that the process is transparent so that everybodyis able to check afterwards that no cheating was attempted.In my favourite solution neither coins nor computer programs simulatingcoin-flips by (pseudo)random generators are needed.üTtC2@TW90@TtC0@TtC2@üIn this TtC0@solution the competing partners, say µEVENµµµµµµµ and µµµµµµODDµµ, are actuallyparticipating in the process by selecting both, say, an 8 digit integerwithout knowing the other partner's selection.üTtC2@TW40@üAssume TtC0@that µEVENµµµµµµµ gives µ38542743µµµµµµµ and µµµµµµODDµµ gives µµµµµµ90021196µµ.üTtC2@TW40@üThese TtC0@sequences are then shuffled into a 16 digit integer3980504221714936S1616161616161616S and the unique prime factors of this integerare computed (in Survo) by activating3980504221714936S1616161616161616S(10:factors)=üTtC2@TW50@TD2@€TD0@TW30@üNow TtC0@the crucial thing is whether the number of prime factors(not necessarily distinct) is µEVENµµµµµµµ or µµµµµµODDµµ.TtC2@TW30@ InTtC0@ this case it is 3+1+1+1=6TtC2@TW30@which TtC0@is an even integer and then µEVENµµµµµµµ is the winning partner.TtC2@TW30@A slight TtC0@modification (in the last digit) would lead to3980504221714933S1616161616161616Sü(10:factors)=TtC2@TW50@TD2@€TD0@TW20@andTtC0@ the winner would be µµµµµµODDµµ.TtC2@TW30@It is easyTtC0@ to check that the factorization gives the original number bysetting ACCURACY=30 and calculating11*107*3381906730429=TtC2@TD2@€TD0@TW30@üTtC0@TtC2@TW5@üThereTtC0@ is strong number-theoretic evidence for the fact that for(large) integers the number of prime factors is even or odd withequal probabilities. This is also intuitively obvious.Another important feature is the uniqueness of the prime factorizationof an integer.TtC2@TW50@üTtC0@TtC2@TW5@üThe easiestTtC0@ way to use this procedure as a safe replacement forcoin tossing is to activate a sucro command /COIN with an integerparameter.TtC2@TW30@TtC0@ By stating that even number of factors gives µHEADSµµµµµµµ andodd number of factors gives µµµµµµTAILSµµ we get, for example,TtC2@TW30@TtC0@/COIN 3980504221714936üS      1616161616161616SüTtC2@TW50@TD2@€TD0@TW50@Since Omega(n)TtC0@ is the standard function for the number of prime factors,we could call this procedure "µOmega coin tossingµµµµµµµ".TtC2@TW30@The mostTtC0@ surprising feature in "Omega coin tossing" is thatall information for getting µHEADSµµµµµµµ or µµµµµµTAILSµµ is given by the competingpartners.However, they have no chance to improve their winning probabilitiesby any strategy when selecting their own numbers.There are no other 'probabilistic' elements in this 'lottery'.Tÿ
















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Rational approximations by listening Survo provides two main alternatives for finding a rationalapproximation for a given decimal number.The standard method based on convergents of a continued fraction isavailable as a sucro command /CONTFRAC by multiple precision arithmetic.For example, traditional approximations for pi=3.141592653589793are obtained by/CONTFRAC pi,8 / 8 convergentsüTtC2@TW100@TD2@€TD0@TW50@üTW5@.±TW10@TtC0@TW10@The second alternativeTtC0@ is based on a simple model I derived in 1972 forrecognizing musical intervals when the sound is not pure.Any decimal number (within sensible limits) may be interpreted asa ratio x of two tone frequencies of musical sounds.TtC2@TW50@Assume thatTtC0@ we have an interval of tones with frequencies f and g Hz andthe ratio x=f/g is approximately n/m where m and n are small integers.The impurity of the interval is revealed by a regular pulsation (beat)having the rate of ng - mf Hz. The relative value of the beat withrespect to ng is then (n - mx)/n . Identifying the interval amounts toselection of integers m and n so that beating is not too rapid and theintegers m and n remain as small as possible.This goal is formulated as an optimization problem:For given x and c, minimize the functiondiss(c,x,m,n) = n + 10^c*(mx/n - 1)^2with respect to integers m and n.The constant c describes the accuracy of the ear.In practice c may vary from about 3 (poor) to about 5 (superb).A high c value means that the ear does not tolerate false sounds and,on the other hand, is able to detect very complicated musical intervals(ratios n/m).üTtC2@TW150@TtC0@TtC2@TW10@üHence,TtC0@ in Survo x is converted into a ratio by activating x(c:ratio)=giving x(c:ratio)=n/m (x-n/m) .TtC2@TW20@For example,TtC0@ the neutral third is the geometric mean of minor (6/5)and major third (5/4), i.e. sqrt(6/5*5/4)=sqrt(3/2) .The conversion command of Survo givessqrt(3/2)=TtC2@TW30@€TW10@ º(3:ratio)=TW10@TD2@€TD0@TW30@üTD2@¹¹TD0@TD2@¹TD0@TD2@¹TD0@TW5@5TW10@TD2@€TD0@TW30@A poor TtC0@musical ear hears it as a major third but a good ear recognizesit as a rather pure interval 11/9, although this interval does notbelong to the natural music scale.TtC2@TW40@üTtC0@TtC2@TW10@üThis TtC0@technique gives following rational approximations for pi:TtC2@3.141592653589793(1:ratio)=TD2@€TD0@TW20@3.141592653589793(4:ratio)=TD2@€TD0@TW20@TtC0@3.141592653589793(4.5:ratio)=€3.141592653589793(5:ratio)=€3.141592653589793(10:ratio)=€3.141592653589793(11:ratio)=€3.141592653589793(20:ratio)=€3.141592653589793(21:ratio)=€3.141592653589793(22:ratio)=€3.141592653589793(23:ratio)=€3.141592653589793(25.5:ratio)=€3.141592653589793(26:ratio)=€3.141592653589793(28:ratio)=€üTtC2@TW30@TW5@TW5@TtC0@µ   µµµµµµµ                                 µ    µµµµµµµ           µ       µµµµµµµ        µ       µµµµµµµ              µ            µµµµµµµ   µ            µµµµµµµ  µ            µµµµµµµ µ            µµµµµµµ  µ             µµµµµµµ  üThe ratios appearing also as convergents in the continuous fractionrepresentation are painted µredµµµµµµµ.Tÿ










Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Color changing Technically this is a family of identical curves.Only the color is changing according to a dummy parameter µ0*Aµµµµµµµ.The COLOR_CHANGE specification selects colors A=0,1,2,3,4 modulo 3-1.Thus the colors are 0,1,2,0,1 (0=Black, 1=Gray, 2=Yellow) and defined bySAVEP <Survo>\U\SYS\BGY3.PAL 0    0   0   0  Black 1  600 600 600  Gray 2  900 600   0  Yellow€........................HEADER=  HOME=0,0 WHOME=0,0 WSIZE=652,381 WSTYLE=0 MODE=652,381XSCALE=-14,14 YSCALE=-10,10 FRAME=0SIZE=652,381 XDIV=0,1,0 YDIV=0,1,0a=53 t=0,50*pi,pi/150 pi=3.14159GPLOT X(t)=12*sin(int(0.35*t))+0.8*sin(a*t)*sin(t)+µ0*Aµµµµµµµ,      Y(t)=8*sin(int(0.3*t))+0.8*sin(a*t)*cos(t)A=0(1)4PALETTE=BGY3 COLORS=[background(8)] COLOR_CHANGE=A,3SLOW=100 slowing down the plotting speedTtC2@TW100@TD2@€TD0@TW170@LoGPLOT /DEL ALL€LOüTÿ


Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Permutation test Here are two samples of one variable as Survo data lists:DATA SAMP1: 148 73 56 63 90 42 106 125 129 161 ENDDATA SAMP2: 127 142 126 91 177 118 169 79 160 106 ENDTtC2@TW30@TW5@Some TtC0@basic statistics are computed:MINSTAT SAMP1,CUR+1TtC2@TD2@€TD0@TW30@TW5@MINSTATTtC0@ SAMP2,CUR+1TtC2@TD2@€TD0@TW30@TW5@We want TtC0@to know whether the difference between means 99.3-129.5=-30.2is statistically significant.TtC2@TW30@üTtC0@TtC2@TW5@üInstead ofTtC0@ using routine statistical tests the answer is found bymaking a µpermutation testµµµµµµµ without no special program.In this approach, no previous knowledge about statistical tests isrequired.TtC2@TW50@We make TtC0@an assumption that µboth samples are taken randomly fromµthe same populationµµµµµµµ and try to calculate what is the probability thatin such a situation the mean of the first sample would less or equalto 99.3.It is customary to say, for example, that if that probabilityis less than 0.05 (5 per cent) the difference between means is'almost significant'.TtC2@TW60@üüTW5@If this assumptionTtC0@ of the same population is true, any of the valuesappearing in SAMP1 could be in SAMP2 and vice versa.This observation leads us to make an experiment where samples arejoined together into a set of 20 observations and then all possiblecombinations of 10 are selected in SAMP1 and remaining ones in SAMP2.There are C(20,10)=184756 such selections and each of them is equallyprobable. The crucial question is, what is the proportion of those184756 SAMP1 sets having a mean less than equal 99.3 (the mean of thetrue SAMP1). That proportion is just the probability we want to know.üºTtC2@TW150@TtC0@.±TtC2@TW5@üThe sizeTtC0@ of the edit field is increased to 200000 lines:REDIM 200000,100TtC2@TD2@€TD0@TW10@TW10@Next TtC0@a list of all subsets of size 10 (SAMP1 samples) is madesymbolically by a COMB command:SYMBOLS=A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,TCOMB C10,CUR+2 / C10=SUBSETS,20,10 RESULTS=1TtC2@TD2@€TD0@TW30@ü¶The obserTtC0@vations denoted by letters are in alphabetic order:TtC2@TW20@üTW20@TtC0@The last one  is the 'sample' of 10 last letters.TtC2@TW40@TW5@¶¶TW20@üTtC0@TtC2@TW5@Let's TtC0@pick up the real samples and label the values with letters:TtC2@TW10@ SAMP1Tp        Using F2 J (word continuation) technique!@TW20@J           SAMP2J          Tp@TW20@TW5@A=TW5@TW5@B=TW5@C=D=TtC0@E=F=G=H=I=J=K=L=M=N=O=P=Q=R=S=T=TtC2@TW20@TtC0@TtC2@TW10@Now TtC0@the list of samples is defined and saved as a matrix X:TtC2@TW10@MATTtC0@RIX X ///MAT SAVE XTtC2@TD2@€TD0@TW10@üTtC0@The listTtC0@ is not needed anymore since all 184756 samples are savedin numerical form as a matrix file X.MAT.TtC2@TW20@SCRATCHTD2@€TD0@TW5@TtC0@Restoring the number of lines to 1000:REDIM 1000,100TtC2@TD2@€TD0@TW10@TtC0@TtC2@TW5@The TtC0@samples are now in the matrix file X.MAT in this form.Only 20 first samples are loaded.MAT LOAD X(1:20,*),123,CUR+1TtC2@TD2@€TD0@TW10@TtC0@TtC2@TW30@üTtC0@.±TtC2@TW10@üSample sumsTtC0@ are calculated by Survo matrix interpreter by commandMAT S=SUM(X')'TtC2@TD2@€TD0@TW10@TtC0@Let's see the first twelve sums:MAT LOAD S(1:12,1),12345,CUR+1TtC2@TD2@€TD0@TW10@TtC0@TtC2@TW20@TtC0@ü.±TtC2@TW5@üAt lastTtC0@ the frequency of those samples with sum at most 993 (mean<=99.3)is computed:MINSTAT S.MAT,CUR+1 / IND=Sum,0,993TtC2@TD2@€TD0@TW20@TtC0@Number of such samples is N=€and the sought probability is N/C(20,10)=€µ       µµµµµµµTtC2@TW30@This TtC0@indicates that the observed difference in true samples is'almost significant'.TtC2@TW30@A quickerTtC0@ route to the same result in Survo is provided bythe COMPARE program.COMPARE SAMP1,SAMP2,CUR+1TtC2@TD2@€TD0@TW20@TtC0@üµ       TtC2@TW30@The permutationTtC0@ test (among others) was now performed in randomized form(a million replicates) giving practically the same probability.TtC2@TW30@üTtC0@TtC2@TW5@üA completeTtC0@ permutation test already for a double amount of observationsis an unreasonable task since the amount of samples would beC(40,20)=€º.Although such an endeavour could be speeded up by clever algorithms,it is pointless.The randomized alternative is sufficient in most cases.üTtC2@TW50@üAs a techTtC0@nical evidence, let's double the previous samplesDATA SAMP12: 148 73 56 63 90 42 106 125 129 161             148 73 56 63 90 42 106 125 129 161 ENDDATA SAMP22: 127 142 126 91 177 118 169 79 160 106             127 142 126 21 177 118 169 79 160 106 ENDand activateCOMPARE SAMP12,SAMP22,CUR+1TtC2@TD2@€TD0@TW20@TtC0@TtC2@TW30@TtC0@Thus within a few seconds it is ascertained that the difference of meansis now significant on 2 per cent level (in fact according to all tests).Tÿ




















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ HH - HT game (analysis)Players 'A' and 'B' are flipping a coin repetitively. 'A' wins if twosuccessive heads HH occur before the pair HT (heads-tails). 'B' wins ifHT occurs before HH.If only one coin is flipped, the game is fair since it stops as soon asthe first H is encountered. If the next flip gives H, 'A' wins, and ifit gives T, 'B' wins.But what happens if both players are flipping their own coinssimultaneously? The playing scheme changes since the game may now alsolead to a tie. Is it anymore fair by giving the same probability ofwinning for both players?üTtC2@TW100@TtC0@TtC2@TW5@üTo solveTtC0@  the problem we start by denoting the probability that 'A' winsby w. Let the probability of heads be p and for tails q=1-p. This makesnext considerations easier to follow.The alternatives in the first pair of flips are    HH with probablility p^2,    HT with probablility p*q,    TH with probablility q*p,    TT with probablility q^2and the conditional probabilities for the win of 'A' are denoted    X[HH] = P['A' wins on the condition HH],    X[HT] = P['A' wins on the condition HT],    X[TH] = P['A' wins on the condition TH],    X[TT] = P['A' wins on the condition TT].Then we have w = X[TT], since after the flip-pair TT the game actuallystarts again (neither of players have achieved a favourable status H).üTtC2@TW100@TtC0@TtC2@TW5@üEach of theTtC0@ probabilities X[HH],X[HT],X[TH],X[TT] can now be presentedas a weighted sum of probabilities on the condition what happens in thesecond pair of flips as follows. For X[HH] we haveX[HH] = P(HH)*1   + P(HT)*0  + P(TH)*X[TH]    + P(TT)*0        'A' won     Tie        game continues   'B' won                               from state TH      = p^2       + 0        + p*q*X[TH]      + 0 .üTtC2@TW100@TtC0@TtC2@TW5@üBy a similarTtC0@ reasoning the following equations are obtained:X[HH] = p^2 + p*q*X[TH],X[HT] = p^2 + p*q + p*q*X[TH] + q^2*X[TT],X[TH] = p^2*X[HH] + 0 + p*q*X[TH] + 0,X[TT] = p^2*X[HH] + p*q*X[HT] + p*q*X[TH] + q^2*X[TT].This is a system of linear equations and it can be written in the form   1*X[HH]    +0*X[HT]      -p*q*X[TH]        +0*X[TT] = p^2,   0*X[HH]    +1*X[HT]      -p*q*X[TH]      -q^2*X[TT] = p^2+p*q = p,-p^2*X[HH]    +0*X[HT]  +(1-p*q)*X[TH]        +0*X[TT] = 0,-p^2*X[HH]  -p*q*X[HT]      -p*q*X[TH]  +(1-q^2)*X[TT] = 0.where matrix A of coefficients (written in Survo style) isMATRIX A///  HH    HT      TH     TTHH    1     0    -p*q      0HT    0     1    -p*q   -q^2TH -p^2     0   1-p*q      0TT -p^2  -p*q    -p*q  1-q^2üTtC2@TW100@üandTtC0@ the vector of constant terms isMATRIX B///  constHH   p^2HT   pTH   0TT   0üTtC2@TW50@ü.±TtC0@TtC2@By usingTtC0@ values p=1/2, q=1-p the matrices A and B are saved in matrixfiles byMAT SAVE ATtC2@TD2@€TD0@TW5@MAT SAVE BTtC2@TD2@€TD0@TW5@and thenTtC0@ the system of equations A*X=B is solved byMAT SOLVE X FROM A*X=BTtC2@TD2@€TD0@TW5@givingTtC0@MAT LOAD X,1.123456789012345,CUR+1TtC2@TD2@€TD0@TW40@TtC0@TtC2@TW5@üThe TtC0@winning probability w=X[TT] of 'A' is MAT_X(TT)=TtC2@TW5@€TW5@whichTtC0@ is an approximate value of a ratio found by 0.322314049586777(15:ratio)=TtC2@TW5@€TW5@Thus TtC0@the accurate µwinning probability for 'A' is 39/121µµµµµµµ since itmust be a rational number.TtC2@TW30@TtC0@TtC2@TW5@üThereafterTtC0@ the probability of a tie in the game is calculated byassuming (temporarily) that also a tie is a win for 'A'. Then the firstof the equationsX[HH] = P(HH)*1   + P(HT)*0  + P(TH)*X[TH]    + P(TT)*0        'A' won     Tie        game continues   'B' won                               from state THtakes the formX[HH] = P(HH)*1   + P(HT)*µ1µµµµµµµ  + P(TH)*X[TH]    + P(TT)*0        'A' won     µ'A' wonµµµµµµµ    game continues   'B' won                               from state THüTtC2@TW90@üand TtC0@in the system of equations this changes the first constant termfrom p^2 to p^2+p*q=p.TtC2@TW30@üTtC0@TtC2@TW5@üThenTtC0@ the vector B is replaced by B2 and the system A*Y=B2 is solved byMAT B2=BTtC2@TW10@TD2@€TD0@TW5@MATTtC0@ B2(1,1)=p / fixing the the first elementTtC2@TD2@€TD0@TW5@MAT SOLVE Y FROM A*Y=B2TD2@€TtC0@TW5@Now TtC0@the winning probability for 'A' + probability of a tie would beMAT_Y(TT,1)=TtC2@TD2@€TD0@TW5@or TtC0@accurately 0.46280991735537(15:ratio)=TtC2@TD2@€TD0@TW5@so thatTtC0@ the µprobability of a tie is µµµµµµµ 56/121-39/121=µ17/121and the µwinning probability for 'B'µµµµµµµ is 1-17/121-39/121=µ65/121=0.53719008264463TtC2@TW30@Thus TtC0@the game is not fair but more favourable for 'B' in the ratio of65/39=5/3.TtC2@TW30@It may beTtC0@ a aurprise that the game is more advantageous for 'B' even ifties would be accounted to 'A'.TtC2@TW30@TtC0@                         * * *TtC2@TW5@TtC0@TtC2@TW5@What isTtC0@ the mean amount of flips needed for 'A' and 'B'?TtC2@TW30@Let X beTtC0@ a random variable getting the value i if HH appears for thefirst time in the flip i. For example, in the series THTTHH... X=6.TtC2@TW30@So,TtC0@ what is the expected value E(X)?TtC2@TW30@E(X)=xTtC0@ can be expressed as a weighted sum of conditional expectationsE(X|H)=y and E(X|T)=x+1 and we haveE(X)=x=p*y+q*(x+1)and similarlyE(X|H)=y=p*2+q*(x+2).From these two linear equations we get x=(1+p)/p^2 which is 6 for p=1/2.TtC2@TW100@TtC0@TtC2@TW5@üLet then YTtC0@ be a random variable getting the value i if HT appears forthe first time in the flip i. For example, in the series TTHHT... Y=5.Also E(Y)=x can be expressed as a weighted sum of conditionalexpectations E(X|H)=y and E(X|T)=x+1 and we haveE(Y)=x=p*y+q*(x+1)but nowE(Y|H)=y=p*(y+1)+q*2.Now from these equations we get y=1/(p*q) which is 4 for p=q=1/2.TtC2@TW80@Thus 'A'TtC0@ needs on the average 6 while 'B' needs on the averageonly 4 flips for winning the game. This is also surprising sincemany people would consider the expectations equal at the first sight.TtC2@TW40@TtC0@TtC2@TW5@TheTtC0@ HH - TT game is studied numerically by simulation in anotherdemo µ"HH - TT game (simulation)"µµµµµµµ.Tÿ


















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ HH - HT game (simulation) Players 'A' and 'B' are flipping a coin repetitively. 'A' wins if twosuccessive heads HH occur before the pair HT (heads-tails). 'B' wins ifHT occurs before HH.If only one coin is flipped, the game is fair since it stops as soon asthe first H is encountered. If the next flip gives H, 'A' wins, and ifit gives T, 'B' wins.But what happens if both players are flipping their own coinssimultaneously? The playing scheme changes since the game may now alsolead to a tie.The game is not anymore fair since it is shown in another demoµ"HH - HT game (analysis)"µµµµµµµ that 'B' wins more frequently than 'A'.The winning probability for 'B' is 65/121=0.537... but for 'A' only39/121=0.322...  the probability of a tie being 17/121=0.140...'B' also needs on the average only 4 flips for achieving HT while'A' needs 6 flips for achieving HH.Now these results are to be confirmed by a simulation experiment.üTtC2@TW140@TtC0@TtC2@TW5@üA sequenceTtC0@ of 100 coin flips is repeated by two 'coins' 10'000 times.Coin of 'A' player:FILE MAKE A,100,10000,F,1TtC2@TD2@€TD0@TW5@.±SampleTtC0@ of 100*10000 flips (0=Heads, 1=Tails):TRANSFORM A BY #UNIFORM(0,2) / RND=rand(1998)TtC2@TD2@€TD0@TW5@.±In eachTtC0@ series the occurrence of first HH (0,0) is found byVARSTAT A,HH:2,FIRST,L / L=0,0TtC2@TD2@€TD0@TW5@.±Let's seeTtC0@ the beginnings of seven first sequences and appearance of 0 0:VARS=F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,HH IND=ORDER,1,7FILE LOAD A,CUR+1TtC2@TD2@€TD0@TW10@üTtC0@TtC2@TW5@HH TtC0@here gives the order of the flip starting the first 0 0 -sequence.TtC2@TW20@.±BasicTtC0@ statistics for HH:STAT A,CUR+1 / VARS=HH  RESULTS=0TtC2@TD2@€TD0@TW20@üTtC0@TtC2@TW20@mean+1=€TW5@º isTtC0@ very close to the theoretical mean 6.TtC2@TW20@.±CoinTtC0@ of 'B' player:FILE MAKE B,100,10000,F,1TtC2@TD2@€TD0@TW5@.±SampleTtC0@ of 100*10000 flips by another coin (different seed value):TRANSFORM B BY #UNIFORM(0,2) / RND=rand(1999)TtC2@TD2@€TD0@TW5@.±In eachTtC0@ series the occurrence of first HT (0,1) is found byVARSTAT B,HT:2,FIRST,L / L=0,1TtC2@TD2@€TD0@TW5@.±BasicTtC0@ statistics:STAT B,CUR+1 / VARS=HT  RESULTS=0TtC2@TD2@€TD0@TW10@üTtC0@TtC2@TW20@ümean+1=TW5@€TW5@º alsoTtC0@ in this case is almost the same as the theoreticalvalue 4.TtC2@TW20@.±A newTtC0@ file is created for comparison of the results:FILE CREATE AB,8,4FIELDS:1 N 2 HH2 N 2 HT3 N 2 DiffENDTtC2@TD2@€TD0@TW5@.±TtC0@TtC2@TW5@VariableTtC0@ HH copied from file A to file AB:FILE COPY A TO AB / VARS=HHTtC2@TD2@€TD0@TW5@.±VariableTtC0@ HT copied from file B to file AB (paired according to order):FILE COPY B TO AB / VARS=HT MATCH=#TtC2@TD2@€TD0@TW10@.±TheTtC0@ difference Diff telling the winner isVAR Diff=HH-HT TO ABTtC2@TD2@€TD0@TW5@.±andTtC0@ its values are tabulated according to the sign:VARIABLES=Diff   Diff=-100,-1('A'),0(Tie),100('B')TAB AB,CUR+1 / LABELS=0TtC2@TD2@€TD0@TW10@üTtC0@TtC2@TW30@üThe resultsTtC0@ seem to be reasonably close to the theoretical frequencies39/121*N=3223.140495867817/121*N=1404.95867768665/121*N=5371.9008264463since the common Chi-square statistics is(3256-3223)^2/3223+(1442-1405)^2/1405+(5302-5372)^2/5372=2.224...i.e. almost equal to degrees of freedom =2.Tÿ









Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Lines going through 3 points in a 9 x 9 grid.I have shown inhttp://www.survo.fi/papers/LinesInGrid2.pdfthat the number of lines L(n,j) going through j points in an n x n gridof points can be computed efficiently by recursive formulas.These formulas presented as a computation scheme in the Survo editfield areL(n,j):=(F(n,j+1)-2*F(n,j)+F(n,j-1))/2F(n,j)|=if(n<=j)then(0)else(2*F1(n,j)-F(n-1,j)+R1(n,j))F1(n,j)|=if(n<=j)then(0)else(2*F(n-1,j)-F1(n-1,j)+R2(n,j))R1(n,j):=if(n<=j)then(0)else(R1(n-1,j)+8*S(n,j))R2(n,j):=2*(n-1)*S(n,j)S(n,j):=if(mod(n-1,j)=0)then(totient((n-1)/j))else(0)For example, L(2,2)=6, L(3,2)=12, L(3,3)=8, L(100,3)=2738116.Let's now draw a graph of all L(9,3)=204 lines going through 3 pointsin a 9 x 9 grid.üTtC2@TW100@TtC0@TtC2@TW5@Since those formulasTtC0@ tell only the number of lines, I made an extraSurvo program module GRIDP for creating a list of those L(n,j) lines.In that list each line is presented by four integers.They are coordinates for the end points (X1,Y1),(X2,Y2) of the linesegments connecting j points.    (X1,Y1)           (X2,Y2)      o--------o--------oTtC2@TW70@GRID m,n,jmakes TtC0@that list for an m x n grid. So in the case m=n=9, j=3 we obtainGRIDP 9,9,3TtC2@TW20@TD2@€TD0@TW20@ü¶TW20@TW10@TW5@TW20@¶¶TW20@üTtC0@TtC2@TW5@This listTtC0@ is now defined as a Survo data set and saved in a data file:TtC2@TW20@DATA PointsTW10@X1 Y1 X2 Y2TW10@TW5@FILE TtC0@COPY Points TO EndpointsTtC2@TW5@TD2@€TD0@TW10@üSCRATCH TW5@€TW5@FILE SHOW EndpointsTW20@TtC5@TD1@€²TD0@TW10@Another TtC0@data file is needed for the 9*9=€grid points:TtC2@TW5@TW5@FILE TtC0@CREATE GPFIELDS:1 N 1 X2 N 1 YENDüTtC2@TD2@€TD0@TW10@TW5@üFILETtC0@ INIT GP 81TtC2@TW5@TD2@€TD0@TW10@TtC0@n=9VAR X,Y TO GPX=mod(ORDER-1,n) Y=int((ORDER-1)/n)üTtC2@TW30@TD2@€TD0@TW10@üTtC0@FILE SHOW GPTtC2@TW20@TtC5@TD1@€ü²TD0@TW10@TtC0@TtC2@üThe graphTtC0@ is created as PostScript file from four component graphs.TtC0@TW20@µPlottingTtC0@ the line segments in yellow:*GLOBAL*SCALE=-0.1,0(1)8,8.1 FRAME=0 XDIV=0,1,0 YDIV=0,1,0 XLABEL= YLABEL=SIZE=1200,1200 HEADER=T=[color(0,0.3,0.9,0)][line_width(0.48)],0,1PLOT X(T)=X1+T*(X2-X1),Y(T)=Y1+T*(Y2-Y1) / DEVICE=PS,GL.PSX1=DATA:Endpoints,X1X2=DATA:Endpoints,X2Y1=DATA:Endpoints,Y1Y2=DATA:Endpoints,Y2üTtC2@TW30@TD2@€TD0@TW10@üµGrid pointsTtC0@ as small circles painted white:PLOT GP,X,Y / POINT=0,10 DEVICE=PS,GL1.PS LINETYPE=[color(0,0,0,0)]TtC2@TW20@TD2@€TD0@TW10@µGridTtC0@ points as small black circles (around white points):PLOT GP,X,Y / POINT=3,10 DEVICE=PS,GL2.PS LINETYPE=[color(1,1,1,1)]TtC2@TW20@TD2@€TD0@TW10@µBlackTtC0@ background:PLOT /FRAME / DEVICE=PS,GL0.PSFRAMES=F F=0,0,1200,1200,-1 FILL(-1)=1,1,1,1TtC2@TW20@TD2@€TD0@TtC0@TtC2@TW5@µCombiningTtC0@ PostScript file to GL9.PS:EPS JOIN GL9,GL0,GL,GL1,GL2TtC2@TW30@TD2@€TD0@The typical wayTtC0@ for showing PostScript files in Survo is to usethe sucro command/GS-PDF GL9.PS€It converts the file into PDF format by using the Ghostscript programand displays then the PDF file by using Adobe Acrobat program.Tÿ













Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µ Prime numbers listed by a sucro Survo macros, µsucrosµµµµµµµ are typically used for making applicationsconsisting of many consecutive and (conditional) Survo commands andoperations. Sucros can also created for quite general purposes.The following sucro PRIMES makes a list of prime numbers less than N.TtC2@TW60@Writing the sucro program:TW20@TtC0@¶/**+-*+-*-*+¶¶ def WN=W1 Wnumber=W2 Wdivisor=W3 Wremainder=W4 Wi=W5 Wj=W6 Wsquare=W7{tempo 0}{R}SCRATCH {act}{home}2 3 5{Wnumber=5}{Wi=2} A: {Wnumber=Wnumber+Wi} if Wnumber > WN then goto E{Wi=6-Wi}{Wdivisor=1}{Wj=4} B: {Wdivisor=Wdivisor+Wj}{Wj=6-Wj}{Wremainder=Wnumber%Wdivisor} if Wremainder = 0 then goto A{Wsquare=Wdivisor*Wdivisor} if Wsquare < Wnumber then goto B {write Wnumber}{goto A} E: {end}üTtC2@TW70@üTW5@ºTW5@ and saving it:TW10@TUTSAVE PRIMESTD2@€TD0@TW10@TtC0@TtC2@ComputingTtC0@ and listing prime numbers less than 5000:TtC2@TW10@/PRIMES 5000TD2@€üTtC2@TD2@TD0@TW30@TD2@üTD0@TtC2@TW10@TtC0@ºTÿ





Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüFILE DEL ULAM€BüCOLX W20€BLOAD INDEXü   µµµµµµµ Ulam spiral in color The Ulam spiral is a visualization of integers according to the rule              17__16__15__14__13               |              |              18   5___4___3  12               |   |       |  |              19   6   1___2  11               :   |          |               :   7___8___9__10In this two-dimensional setup the prime numbers tend to line up alonghorizontal, vertical and diagonal lines.The spiral will now also be plotted so that points corresponding tonumbers 1,2,...,n,... will have various colors depending on the value ofOmega(n). This function gives the number of (not necessarily distinct)prime factors of n. Then, for example, Omega(n)=1 for all primes, andOmega(6)=2, Omega(8)=3.üTtC2@TW100@TtC0@Lo¶TgC1@C1@C!@C1@C1@*GLOBAL* WSIZE=400,400 WHOME=652-404,4 HEADER= XDIV=0,1,0 YDIV=0,1,0         XLABEL= YLABEL= FRAME=0 WSTYLE=0 MODE=400,400¶¶LOLOTtC2@TW5@üThe graphTtC0@ is made for n<=200^2=40000 as a scatter diagram of variablesx,y in a Survo data file Ulam.FILE CREATE Ulam / Creating the data fileFIELDS:1 N  8 n         n   (#######)2 N  8 n1        n-1 (#######)3 N  2 x4 N  2 y5 N  2 Omega     Omega(n)ENDüTtC2@TW40@TD2@€TD0@üTW5@FILETtC0@ INIT Ulam,40000 / Initializing with empty observationsTtC2@TW5@TD2@€TD0@VAR TtC0@n,n1,Omega TO Ulam / Computing values of variables n,n1,Omegan=ORDER n1=ORDER-1 Omega=omega(n)BüTtC2@TD2@€TD0@TW10@TD0@.±SettingTtC0@ coordinates (0,0) of n=1:VAR x,y TO Ulam / IND=ORDER,1,1  x=0 y=0üTtC2@TW5@TD2@€TD0@TW5@TtC0@.±Computing coordinates (x,y) stepwise for other n values:VAR x,y TO Ulam / IND=ORDER,2,160000x=x[-1]+sin(mod(int(sqrt(4*(n-2)+1)),4)*pi/2)  pi=3.141592653589793üSü        11116666111166666          1  6     1üSBüy=y[-1]-cos(mod(int(sqrt(4*(n-2)+1)),4)*pi/2)These formulas are explained in the notes of this demo.üTtC2@TW5@TD2@€TD0@TW10@TW5@TtC0@ü.±Testing the formulas by plotting the 900 first values:GPLOT Ulam,x,y / POINT=[Arial(11)][RED],n IND=ORDER,1,900 SCALE=-14.5,16üTtC2@TD2@€TD0@TW40@TtC0@LoGPLOT /DEL ALL€BLOüTtC2@TW5@ThenTtC0@ only primes:GPLOT Ulam,x,y / SELECT=A*Primes A=ORDER,1,900 Primes=Omega,1TtC2@TD2@€TD0@TW40@LoGPLOT /DEL ALL€BLOü.±TtC0@TtC2@TW5@UlamTtC0@ spiral for n=1,2,...,40000 with primes as black dots:POINT=6,1 SCALE=-100(100)100GPLOT Ulam,x,y / IND=OmegaüTtC2@TW30@TD2@€TD0@TW5@TtC0@µSee how a great dealµof points are locatedµespecially onµdiagonal lines.TtC2@TW50@TtC0@LoSCRATCH €GPLOT /DEL ALL€LO.±TtC2@TW5@MakingTtC0@ a graph where points are mapped to various colorsaccording to Omega(n) values:TtC2@TW20@VAR TtC0@Color:2 TO Ulam    Color=if(Omega<6)then(-Omega)else(-5)TW10@TD2@€TD0@TW5@..........TtC0@Omega 1  - black       FILL(-1)=1,1,1,0Omega 2  - yellow      FILL(-2)=0,0,1,0Omega 3  - red         FILL(-3)=0,0.3,0.3,0Omega 4  - blue        FILL(-4)=0.3,0.3,0,0Omega >4 - white       FILL(-5)=0,0,0,0POINT=6,1 SCALE=-100(100)100 µPOINT_COLOR=ColorGPLOT Ulam,x,yTtC2@TW30@TD2@€TD0@TW30@TtC0@üµSee how the pointsµrelated to givenµOmega valuesµproduce moreµdiagonal zones.TtC2@TW50@TtC0@LoGPLOT /DEL ALL€LO..........üTtC2@TW5@For example,TtC0@ points(higly composite n)with Omega>4 areIND=Omega,5 POINT=6,1 SCALE=-100(100)100GPLOT Ulam,x,y / IND=Omega,5TtC2@TW30@TD2@€TD0@TW30@TtC0@GPLOT /DEL ALL€...........TtC2@TW5@µPointsTtC0@ withµodd Omega valuesVAR L:1=mod(Omega,2) TO Ulam€IND=L POINT=6,1 SCALE=-100(100)100GPLOT Ulam,x,y / µOUTFILE=ODD_OMEGATtC2@TW10@€TtC0@µseem to be randomlyµscattered.µHowever, note thatµthere is a whiteµ'diagonal' due toµn values k^2.TtC2@TW50@TtC0@GPLOT /DEL ALL€LO..........TtC2@TW10@ThisTtC0@ may be comparedto a random plotVAR R:1=if(rand(2010)<0.5)then(1)else(0) TO Ulam€IND=R POINT=6,1 SCALE=-100(100)100GPLOT Ulam,x,y / µOUTFILE=RANDOM€TtC2@TW30@TtC0@GPLOT /DEL ALL€LO..........TtC2@TW10@ComparingTtC0@ graphs ODD_OMEGA and RANDOM:TtC2@TW30@TtC0@T!1@C0@TXA@T=1@1@+@C1@TIN1@C5@@GE@@µGPLOT FILE ODD_OMEGA€TtC2@TW10@TtC0@µGPLOT FILE RANDOM€TtC2@TW10@TtC0@TLGA@TXE@TgC1@C1@C!@C1@C1@GPLOT /DEL ALL€BLOAD INDEXTÿ




















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Testing the correlation coefficient The sample correlation coefficient is r and the sample size n.To test the hypothesis that in the population the unknowncorrelation coefficient rho is r0 against the alternative rho>r0,we form the test statisticU=sqrt(n-3)*(Fisher(r)-Fisher(r0))whereFisher(r):=0.5*log((1+r)/(1-r))is Fisher's transformation of the correlation coefficient.If the null hypothesis is true, U is approximately N(0,1).Hence we reject the hypothesis, if P=1-N.F(0,1,U)is less than the risk level (say 0.05).üTtC2@TW100@TW5@Assume now that n=50TW5@, r=0.81TW5@ and r0=0.7TW20@TW5@Then U.=                 P.=TW5@Tp        Simultaneous activation@TD2@€TD0@TW30@Tp@ThusTtC0@ the hypothesis rho=0.7 is rejected on the risk level 0.05.Tÿ


Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €Bü¶*GLOBAL* WHOME=0,0 WSIZE=650,379 WSTYLE=0¶¶üCOLX W20€BLOAD INDEXü   µµµµµµµ Age pyramid (Finland 2009) This data table presents the population of Finland in age groups.DATA AgesFin   Age   Males Females  _0-_4 152197  145917  _5-_9 147367  140419  10-14 154256  148167  15-19 170583  164053  20-24 165988  158484  25-29 177022  167612  30-34 173572  164398  35-39 158921  151847  40-44 182143  176611  45-49 191110  187231  50-54 189311  188726  55-59 192402  195763  60-64 194857  202029  65-69 122578  135741  70-74 101250  123793  75-79  74193  105478¶  80-84  49230   89487  85-89  21357   55583  90-     6730   25021ü¶TtC2@TW100@The µage pyramidTtC0@µµµµµµµ based on this data set is plotted as follows:HEADER=[Arial(20)],Population_of_Finland_in_age_groups_(2009)GPLOT AgesFin / µTYPE=PYRAMIDVARS=Age(L),Females(A),Males(B)Variables to be stacked to the right indicated by masks 'A'Variables to be stacked to the left  indicated by masks 'B'SHADING=1,3 / Colors 'red' and 'blue'LEGEND=- TEXTS=M,F M=Males,250,310 F=Females,400,310 PEN=[Arial(15)]SCALE=-250000:_,-200000(100000)200000,250000:_TtC2@TW50@TD2@€TD0@TW50@GPLOT /DEL ALL€Tÿ



Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüREDIM 3000,1000€BüCOLX W20€BLOAD INDEXü   µµµµµµµ Letter frequencies in Shakespeare's Sonnets On the websiteµhttp://www.shakespeares-sonnets.com/allsonn.htmall 154 Shakespeare's Sonnets are available.The letter frequencies in that corpus will be computed by means ofSurvo.At first the Sonnets are loaded into the current edit field bysaving them in the clipboard from the source and then pasting themby the PASTE command:TtC2@TW60@üTW5@PASTETW5@BTW10@üTtC0@µµµµµµµPASTETtC2@TW5@LoTtC0@LOADP SHAKES_CORPUS.TXT€BLOTtC2@TW30@¶Tp        Browsing...@üTD2@TD0@TW20@TW20@TW20@TtC0@TtC2@TW20@(Roman:10)=TD2@€TD0@TW5@.TW5@¶¶Tp@TW5@üTW5@TtC0@TtC2@TW5@üTheTtC0@ empty lines and the Roman numerals have to be removed:TtC2@TW15@TtC0@TtC2@TW10@ATW5@TW5@TtC0@LINEDEL A+1,END,EMPTYTtC2@TW10@TD2@€TD0@Tp        Browsing...@¶TW10@TW10@TW10@TW10@¶¶Tp@TW10@AfterTtC0@ empty lines have been deleted there are END-A=TtC2@TD2@€TD0@TW10@ºlines leftTtC0@154 of them being Roman headers.TtC2@TW20@üTtC0@TtC2@TW5@TtC0@TtC2@TW10@TW5@A typical sonnetTtC0@ has 14 lines. If this were true for them all, theheaders could be deleted by the command LINEDEL A+1,END,STEP,15but there are a few exceptions and therefore another methods should beadopted for removing headers. The following LINEDEL commands do that:LINEDEL A+1,END,"I."LINEDEL A+1,END,"V."LINEDEL A+1,END,"X."LINEDEL A+1,END,"L."LINEDEL A+1,END,"C."üTtC2@TW50@Tp     Continuous activation by F2 ESC@TW20@€Tp        Browsing...@¶TW10@TW10@TW10@TW10@¶¶Tp@TW10@üChecking: Now END-A=TD2@€TD0@TW5@TtC0@º and equal to 2310-154=2156.TtC2@TW20@üSavingTtC0@ the lines in a text file SHAKES.TXT*SAVEP CUR+1,END SHAKES.TXTTtC2@TW20@TD2@€TD0@TW5@üTW5@TW5@TW5@SCRATCHTW5@€TW5@TtC0@TtC2@TW5@CreatingTtC0@ a Survo data file SHAKES.SVO for all characters in Sonnets:TtC2@TW20@FILE CREATETtC0@ SHAKES,1,1Shakespeare's SonnetsFIELDS:   1 SA_   1 CharENDüTtC2@TW20@TD2@€TD0@SavingTtC0@ text by characters in SHAKES.SVO:TtC2@TW15@FILETtC0@ SAVE SHAKES.TXT SHAKES / FORMAT=CHAR,CharTtC2@TW20@TD2@€TD0@TW10@TtC0@Tp        Browsing the data file...@FILE SHOW SHAKES TtC2@TW15@TtC8@€²TtC2@TW5@Tp@TW10@üConvertingTtC0@ capital letters to lower case:FILE CONVERT SHAKES,LOWCASE.BINTtC2@TW20@TD2@€TD0@TW10@TtC0@TtC2@TW5@RemovingTtC0@ punctuation characters and saving only letters to SHAKES2.SVO:CASES=Char:a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,zFILE COPY SHAKES TO NEW SHAKES2TtC2@TW30@TD2@€TD0@TW20@CountingTtC0@ letter frequencies:STAT SHAKES2,CUR+1TtC2@TW30@TD2@€TD0@TW10@üTW10@TW30@TW20@TtC0@TtC2@TW5@-SORT CUR+2,END,CUR+1TW10@11111TW10@TtC0@ / Sorting in descending order...TtC2@TW20@TD2@€TD0@TW40@TtC0@TtC2@TW60@TW30@Tÿ















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüREDIM 3000,100€BüCOLX W20€BLOAD INDEXü   µµµµµµµ Shakespeare's Sonnets as a Markov chain In another demoµ"Letter frequencies in Shakespeare's Sonnets"154 Sonnets were imported from the websiteµhttp://www.shakespeares-sonnets.com/allsonn.htmand saved in a text file SHAKES.TXT after editing them (by removingempty lines and headers).Now we shall play with this text by emulating it as a Markov chainaccording to the idea presented by Claude Shannon in his remarkablepaper "A Mathematical Theory of Communication" (1948).For example, the given text is emulated according to Markov chain ofdegree 2 by taking the two first letters ("Fr" in this case) andseeking the next occurrence of "Fr" in the text which is "Fro", thenlooking for the next "ro" which is "rov", then next "ov" which is "ove",then next "ve" which is "ve ", then next "e " which is "e l", all thisleading to sequence "Frove love: Sundeet by of so mor grin," etc.When the end of the original text is encountered, the search continuesfrom the begin.üTtC2@TW120@TW10@üThese experimentsTtC0@ with degrees 0,1,2,... can be performed easily inSurvo. At first the original text SHAKES.TXT is loaded into the editfield byLOADP SHAKES.TXTTtC2@TW10@TD2@€TD0@üüTtC0@LoromºLOTtC2@üTW30@Tp        Labelling the first and the last line...@TW10@üTW5@TW5@ATW5@TW5@TW5@BTW5@Tp@TW10@The simulationsTtC0@ are done by a MARKOV command by using various values ofa DEGREE specification. By starting from degree 0 we obtainMARKOV A,B,CUR+1,CUR+10 / DEGREE=0 SEED=20108TtC2@TW30@TD2@€TD0@TW30@üTtC0@TtC2@This isTtC0@ simply a random sample of characters appearing in the originaltext with probabilities of their occurrence without any dependenciesbetween consecutive characters.TtC2@TW30@üSelTtC0@ecting degree 1 (ordinary Markov chain):MARKOV A,B,CUR+1,CUR+10 / DEGREE=1TtC2@TW10@TD2@€TD0@TW20@TtC2@TW40@ApproachingTtC0@ 'Shakespearean English' by increasing the degree:TW10@TtC0@MARKOV A,B,CUR+1,CUR+10 / DEGREE=2TtC2@TW15@€TW20@TtC0@TtC2@TW40@TtC0@MARKOV A,B,CUR+1,CUR+10 / DEGREE=3TtC2@TW10@€TW20@TtC0@TtC2@TW40@TtC0@MARKOV A,B,CUR+1,CUR+10 / DEGREE=4TtC2@TW10@€TW20@TtC0@TtC2@TW20@By furtherTtC0@ increases it is futile to expect new sonnets to arise.TtC2@Tÿ





 FROM -> From




Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Linear regression analysis by orthogonalization Although linear regression analysis is simplest to perform by commandslike LINREG or REGDIAG, the computational process can be made moretransparent by using the matrix interpreter. This is useful particularlyin teaching situations.In this demo the regression coefficients of the model Points = b1 +b2*100m +b3*L_jump +b4*Shot_put +b5*Hi_jump +b6*400m +epswill be computed from the Survo data file DECA.At first data values of variables in concern are copied in a matrix file(The regressand 'Points' must be the first numeric variable):VARS=Name,Points,100m,L_jump,Shot_put,Hi_jump,400mMAT SAVE DATA DECA TO ZüTtC2@TW100@TD2@€TD0@TW10@BrowsingTtC0@ the matrix file Z.MAT:/MATSHOW ZüTtC2@TW10@TD2@€TtC2@€TD0@TtC2@TW10@üThe followingTtC0@ sequence is valid as a template for computing regressioncoefficients for any matrix file Z.MAT:TtC2@TW30@TtC0@TtC2@TW10@MAT DIM ZTW5@TtC0@MAT X=CON(rowZ,colZ)MAT X(0,1)="Constant"MAT C=Z(*,2:colZ)MAT X(1,2)=CMAT NAME X AS XMAT Y!=Z(*,1)MAT GRAM-SCHMIDT DECOMPOSITION OF X TO U,RMAT C=U'*YMAT SOLVE B FROM R*B=CMAT NAME B AS Regression_coefficientsMAT LOAD B,END+2üTtC2@TW30@Tp        Continuous activation by F2 ESC...@TW20@TD2@€TD0@Tp@TW10@üTW30@TtC0@TtC2@TW10@TtC0@See how the matrix interpreter has automaticallylabelled matrix rows and columns by legible names.TtC2@TW30@üTtC0@TtC2@It is alsoTtC0@ easy to continue calculation by using matrices obtained:MAT E=U'*U / Checking orthogonality of UüTtC2@TW20@TD2@€TD0@TtC0@üTtC2@TW5@MAT LOAD ETD2@€TD0@Tÿ









Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüREDIM 7000,100€BüCOLX W20€BLOAD INDEXü   µµµµµµµ Most common words in Shakespeare's Sonnets In another demoµ"Letter frequencies in Shakespeare's Sonnets"154 Sonnets were imported from the websiteµhttp://www.shakespeares-sonnets.com/allsonn.htmand saved in a text file SHAKES.TXT after editing them (by removingempty lines and headers).The word frequencies in this text file will now be computed.LOADP SHAKES.TXTTtC2@TW50@TD2@€TD0@TW20@üTW5@TW5@ATW5@TW5@TW5@TW5@BTW5@TW5@üThe textTtC0@ is saved in another text file WSHAKES.TXT by wordsby the following WORDS commandSAVE=WSHAKES.TXT FILTER=LETTERS.BINWORDS A,BüTtC2@TW30@TD2@€TD0@TW20@üTW5@The numbersTtC0@ of words and characters are seen immediately.TtC2@TW20@TtC0@TtC2@SHOW WSHAKES.TXTüTp        Browsing the text file WSHAKES.TXT...@üTW10@TD2@€EL10TD0@Tp@TW10@TW5@BesidesTtC0@ the words also their lengths are saved in the text file.TtC2@TW15@.±SavingTtC0@ the text file in a Survo data file WSHAKES.SVO:FILE SAVE WSHAKES.TXT TO NEW WSHAKES / NAMES=1 FIRST=2üTtC2@TW20@TD2@€TD0@TW10@üTtC0@FILE SHOW WSHAKESüTtC2@TW10@Tp        Browsing WSHAKES.SVO...@TD2@€²TD0@Tp@TW10@.±The wordTtC0@ frequencies are computed by using the STAT command:STAT WSHAKES,CUR+3 / VARS=word CLASSMAX=4000TtC2@TW20@TD2@€TD0@TW20@üFinallyTtC0@ the words are sorted by their frequencies:TtC2@TW20@TW5@TW5@-SORT a,b,CUR+1¶TW5@TW5@111TW5@TW5@TW5@aTW5@TW5@TW5@TW5@bTW5@¶üTW10@TD2@€TD0@TW20@TtC0@I€µThe most common words in Sonnets are:TtC2@TW10@TW10@Tÿ













Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ Discriminant analysis of Iris flower data set A famous data set introduced by R.A.Fisher (1936) is studied.The data and related information is available, for example, inhttp://en.wikipedia.org/wiki/Iris_flower_data_setThe dataset consists of 50 samples from each of three species of Irisflowers (Iris setosa, Iris versicolor and Iris virginica). Four featureswere measured from each sample. They are the length and the width ofsepal and petal, in centimeters.This data set was used by Fisher as an example of discriminant analysis.Now we also determine linear discriminant functions that separate thespecies as efficiently as possible.The data set when pasted into the edit field from the clipboard is here:üLoLOADP IRISDATA.TXT€LOüTtC2@TW120@Tp         Browsing...@ü¶TW20@TW15@TW20@¶¶TW5@Tp@TW10@TtC0@TtC2@TW10@TtC0@TtC2@TW5@Editing...TtC0@REPLACE setosa,1,CREPLACE versicolor,2,CREPLACE virginica,3,C/ Replacing names by numbers 1,2,3üTtC2@TW20@Tp        Continuous activation by F2 ESC...@ü€TtC2@TW10@Tp@TW5@_TW5@TtC0@___TtC2@TW10@TW5@DATATtC0@ Iris0FILE COPY Iris0 TO NEW Iris / Saving data in Survo data file Iris.SVOTtC2@TW10@TD2@€TD0@TW10@TW5@TW5@SCRATCH TW5@€TW10@üFor makingTtC0@ dicriminant analysis, the covariance structures for eachof the three samples are needed. They are represented by correlationmatrices CORR.M and vectors of means and standard deviations MSN.Mcomputed as follows:TtC2@TW50@MASK=AAAATtC0@ / specification for selecting four first variablesCORR Iris / IND=Species,1MAT R1=CORR.MMAT M1=MSN.MCORR Iris / IND=Species,2MAT R2=CORR.MMAT M2=MSN.MCORR Iris / IND=Species,3MAT R3=CORR.MMAT M3=MSN.MüTtC2@TW40@Tp        Continuous activation by F2 ESC...@TW15@€TW10@Tp@TW10@üTtC0@TtC2@TW10@ComputingTtC0@ discriminant coefficients etc.:CORR=R1,R2,R3MSN=M1,M2,M3/DISCRITtC2@TW30@TD2@€TD0@TW30@TtC0@TtC2@TW30@üTwo discriminators are obtained.TW10@.±ComputingTtC0@ values of the linear discriminant functions for eachobservation as new variables D1,D2:LINCO Iris,DISCRL.M(D1,D2)üTtC2@TW30@TD2@€TD0@TW10@üTtC0@TtC2@TW10@PlottingTtC0@ the observations in the discriminant space:TtC2@TW10@POINT_COLORTtC0@=SpeciesCOLOR(1)=1,0,1,0   Green for SetosaCOLOR(2)=0,1,1,0   Red for VersicolorCOLOR(3)=1,1,0,0   Blue for VirginicaGPLOT Iris,D1,D2 / POINT=0,3LR1üLoMODE=381,381 WSIZE=381,381 WHOME=271,0  WSTYLE=0  XDIV=40,301,40XLABEL= YLABEL=                                   YDIV=40,301,40Lr1LOüTtC2@TW25@TD2@€TD0@TW80@TtC0@LoGPLOT /DEL ALL€LOTtC2@TW10@TtC0@TtC2@TW10@üTheTtC0@ results could be studied in many ways.TtC2@TW20@HereTtC0@ we merely reclassify the observations according to theirMahalanobis distances to sample means in the two-dimensionaldiscriminant space.TtC2@TW40@üFILETtC0@ UPDATE IrisFIELDS:   8 ND-   1 Mahal    New variable activated by D for reclassificationENDüTtC2@TW10@TD2@€TD0@TW10@TtC0@TtC2@TW5@.±CORRTtC0@=DR1,DR2,DR3 / correlations of discriminant functionsMSN=DM1,DM2,DM3  / their means and standard deviationsCOEFF=DISCRL.M   / discriminant coefficientsCLASSI Iris      / Reclassification according to Mahalanobis distanceüTtC2@TW30@TD2@€TD0@TW10@.±TabulatingTtC0@ reclassification (Mahal) against the true Species:VARIABLES=Mahal,Species Mahal=1(1)3 Species=1(1)3TAB Iris,CUR+1üTtC2@TW20@TD2@€TD0@TW20@üTtC0@LoLOThere are only 3 misclassifications. It is shown in another demoµCluster analysis of the Iris flower data setthat the same result can be achieved even by cluster analysiswithout knowing anything about how the data is divided into species.Tÿ




















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüREDIM 2000,100€BüCOLX W20€BLOAD INDEXü   µµµµµµµ Cluster analysis of Iris flower data set A famous data set introduced by R.A.Fisher (1936) is studied.The data and related information is available, for example, inhttp://en.wikipedia.org/wiki/Iris_flower_data_setThe dataset consists of 50 samples from each of three species of Irisflowers (Iris setosa, Iris virginica and Iris versicolor). Four featureswere measured from each sample. They are the length and the width ofsepal and petal, in centimeters.The entire data is now classified according to the four features inthree groups by using a statistical clustering method based on Wilks'Lambda criterion.It is interesting to see how close this classification comes to realspecies of flowers.The data set when pasted into the edit field from the clipboard is here:üLoLOADP IRISDATA.TXT€LOüTtC2@TW120@Tp         Browsing...@ü¶TW20@TW15@TW20@¶¶TW5@Tp@TW10@TtC0@TtC2@TW10@TtC0@TtC2@TW5@Editing...TtC0@REPLACE setosa,1,CREPLACE versicolor,2,CREPLACE virginica,3,C/ Replacing names by numbers 1,2,3üTtC2@TW20@Tp        Continuous activation by F2 ESC...@ü€TtC2@TW10@Tp@TW5@_TW5@TtC0@___TtC2@TW10@TW5@DATATtC0@ Iris0FILE COPY Iris0 TO NEW Iris / Saving data in Survo data file Iris.SVOTtC2@TW10@TD2@€TD0@TW10@TW5@TW5@SCRATCH TW5@€TW10@¶The dimensionalityTtC0@ of the data spanned by the four features of flowersis studied by computing principal components:TtC2@TW30@MASK=AAAATW5@CORRTtC0@ Iris / Correlations, means and standard deviationsTtC2@TD2@€TD0@TW10@/PCOMPCOV CORR.M,MSN.M,4TW5@TD2@€TD0@TW20@üTtC0@TtC2@TW30@TD2@€TD0@TW20@Almost 98 per centTtC0@ of the total variation is covered by the two firstprincipal components. Thus the entire data set can be presentedadequately in a graph spanned by the two first principal components.TtC2@TW40@ComputingTtC0@ values of principal components for each observation:LINCO Iris,PCOEFF.M(Pcomp1,Pcomp2)TtC2@TD2@€TD0@TW10@TtC0@TtC2@TW5@.±TW5@MakingTtC0@ a graph of observations in Pcomp1-Pcomp2 space:TtC2@TW10@POINT_COLORTtC0@=SpeciesCOLOR(1)=1,0,1,0   Green for SetosaCOLOR(2)=0,1,1,0   Red for VersicolorCOLOR(3)=1,1,0,0   Blue for VirginicaGPLOT Iris,Pcomp1,Pcomp2 / POINT=0,3LR1üTtC0@LoMODE=381,381 WSIZE=381,381 WHOME=271,0  WSTYLE=0  XDIV=40,301,40XLABEL= YLABEL=                                   YDIV=40,301,40Lr1LOTtC2@TW30@TD2@€TD0@TW60@TtC0@LoGPLOT /DEL ALL€LOTtC2@.±üTtC0@TtC2@TW5@ClusteringTtC0@ data by Wilks' Lambda criterion in three groups:VAR Group:1=MISSING TO Iris / New variable for group labels 1,2,3TtC2@TW20@TD2@€TD0@TW10@MASK=TtC0@AAAA---G      / Selecting variables and the group variableCLUSTER Iris,CUR+1 / GROUPS=3 SEED=2010 TRIALS=500 (500 random starts)üTtC2@TW30@TD2@€TD0@TW40@TtC0@TtC2@TW5@.±TW5@CorrespondenceTtC0@ between the true groups (Species) and the clusters (G)obtained merely on the four features of flowers will be seen by a TABcommand:TAB Iris,CUR+1 / VARIABLES=Species,Group Species=1(1)3 Group=1(1)3üTtC2@TW30@TD2@€TD0@TW40@TtC0@There are only 3 misclassifications (obviously the same as in multiplelinear discriminant analysis performed in another demo).TtC2@TW20@üTtC0@TtC2@TW10@TW5@Let'sTtC0@ plot them by whitened colors 4 and 5 in the graph:TtC2@TW20@.±TW5@TW5@TtC0@VAR Color:1 TO Iris / New variable Color conditionally on groupingColor=if(Species=1)then(1)else(S)S=if(Species=2)then(S2)else(S3)S2=if(Group=2)then(2)else(4)S3=if(Group=3)then(3)else(5)üTtC2@TW20@TD2@€TD0@TW10@TW5@POINTTtC0@_COLOR=ColorCOLOR(1)=1,0,1,0COLOR(2)=0,1,1,0COLOR(3)=1,1,0,0COLOR(4)=0,0.3,0.3,0 / Light redCOLOR(5)=0.3,0.3,0,0 / Light blueGPLOT Iris,Pcomp1,Pcomp2 / POINT=0,3LR1 OUTFILE=ALOMODE=381,381 WSIZE=381,381 WHOME=271,0  WSTYLE=0  XDIV=40,301,40XLABEL= YLABEL=                                   YDIV=40,301,40Lr1LOTtC2@TW30@TD2@€TD0@üTtC0@LOºB0,0,0,00,0,0,0TtC2@TW5@€TW5@TtC0@LODisplayingmiscassifiedobservations:GPLOT FILE A€TtC2@GPLOT FILE BTW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@€TW7@GPLOT /DEL ALL€TXE@Tÿ















Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ F1 connections Even for the most active Survo users, Survo as such is not the onlysoftware they need, although they prefer doing 'everything' by Survo.Hence it is valuable that Survo can be used as a friendly frontend toInternet and to other programs. For example, if I want to check varioussayings in the text I typed, I may let Google to help me in this way:TtC2@TW60@üTtC0@TtC2@TW20@Tp        Press F1 (HELP)@TW15@Tp@TW5@Tp        Press G@TW30@Tp@TW50@TW50@When I movedTtC0@ the cursor to point at the gap between words"friendly frontend" and pressed keys F1 G, Survo called Google toshow hits about this phrase and it told that about 56900 results werefound. Thus I got assured that am using a valid saying.üTtC2@TW60@Similarly,TtC0@ if the exact meaning of a particular word is needed, thatword is activated by keys F1 D and then the Free Dictionary (by Farlex)in the web will immediately explain this word.Or if one needs to know what Wikipedia has to say about a specificname or term, pressing just F1 W gives the answer.üTtC2@TW60@F1 actsTtC0@ as a prefix for many more activities thus extending capabilitiesof Survo in various directions. Information is obtained by activatingF1?TtC2@TW30@TtC0@TW10@üOriginallyTtC0@ F1 was used in Survo only for calling its internal helpsystem. Currently F1 F1 does that. Usually the help system is invokedby activating keywords ending with ?.TtC2@TW30@TW5@The "F1 connections"TtC0@ are only a part of devices for cooperationbetween Survo and other programs. For example, ready-made Survomacros (sucros) are available for calling other programs to performa task defined in the edit field and importing results automaticallyto the same edit field, a text file or a picture file.Typical such programs are R (statistical software), Ghostscript,ImageMagic, Maple and Mathematica.TtC2@TW50@Text blocksTtC0@ are transferred to and from Survo by the clipboard andstatistical data sets normally in a tab-delimited form.TtC2@TW30@VersatilityTtC0@ of Survo is strongly emphasized by the property thatµany part of text in the edit field may serve as a linkµµµµµµµ to the web orto other programs.Tÿ





Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü   µµµµµµµ "Rotated arrowheads" üIt is shown how points in a scatter diagram may be presented byarrowheads with directions depending on a given variable.A "clock face" is plotted so that red arrows locating on a circleare pointing at "hours".The ingredients for plotting are provided by the following data set.TtC2@TW80@TtC0@TtC2@DATA CLOCKTtC0@,A,B,N,MüNMAüHour  X    Y       A       B11 11.111 11.111  111.11  111.11 1 2 3 4 5 6 7 8 91011B12A=(Hour-1)*360/12                  / angles of hours in degreesa=A/360*2*pi pi=3.141592653589793  / angles of hours in radiansB=A+7                              / angle of the arrowheadX=-sin(a) Y=cos(a)                 / coordinates of tips of arrowsLR1VAR A,X,Y,B TO CLOCKTtC2@TW40@TD2@€TD0@TW20@üTtC0@TtC2@TW10@üPlottingTtC0@ the arrows:SCALE=-1.2:_,0:_,1.2:_  SIZE=1340,1340 HEADER= FRAME=0XLABEL= YLABEL= GRID=XY XDIV=0,1,0 YDIV=0,1,0µPOINT=[rotate(B)][RED],22,50 ARROWLEN=3  (point type 22)PLOT CLOCK,X,Y / DEVICE=PS,P1.PSTtC2@TW50@TD2@€TD0@TW10@PlottingTtC0@ a circle:T=0(pi/30)2*piPLOT X(T)=cos(T),Y(T)=sin(T) / DEVICE=PS,P2.PSTtC2@TW20@TD2@€TD0@TW10@EPSTtC0@ JOIN Clock1,P1,P2 / Combining the PostScript plots P1,P2TtC2@TW10@€TW10@/GS-PDFTtC0@ Clock1.PS     / DisplayingTtC2@TW10@€Tÿ






Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BLoGPLOT /DEL ALL€üCOLX W20€BLOAD INDEXü  µµµµµµµ Colored texts in bar/pie charts It is shown how texts set by LABELSand VALUES specifications can beset individually in bar/pie charts.ü¶üGPLOT C / TYPE=%PIEµSHADING=1/4,2/5,3/6,4/1,5/2,6/3Full color:COLOR(1)=0,1,1,0 redCOLOR(2)=1,1,0,0 blueCOLOR(3)=1,0,1,0 greenLight color:COLOR(4)=0,0.40,0.40,0 redCOLOR(5)=0.40,0.40,0,0 blueCOLOR(6)=0.30,0,0.30,0 greenLABELS=[ArialB(30)],6.5DATA CColor Red  Blue Green Red Blue Green_     1    1    1     1   1    1LEGEND=-  HEADER=  FRAME=1 WSTYLE=0S=290 SIZE=S,S MODE=S,SWSIZE=S,S WHOME=652-S-5,40XDIV=1,S-2,1 YDIV=1,S-2,1¶LOüTtC2@TW30@TD2@€TD0@TW20@TtC0@TXA@555555€TtC2@TW10@TtC0@505050504040€TtC2@TW10@TtC0@555555€TtC2@TW10@TtC0@606060605050€TtC2@TW10@TtC0@555555€TtC2@TW10@TtC0@656565655555€TtC2@TW10@TtC0@000000€TtC2@TW10@TtC0@555555554545€TtC2@TW10@TtC0@000000€TtC2@TW10@TtC0@454545453535€TtC2@TW10@TtC0@000000€TtC2@TW10@TtC0@353535352525€TtC2@TW10@TtC0@000000€TtC2@TW10@TtC0@353535352525€TtC2@TW10@TtC0@404040403030€TtC2@TW10@TtC0@üTgC1@C1@C!@C1@C1@GPLOT /DEL ALL€LOAD INDEXTÿ





Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BLoüSOFTKEYS€BFONT 14TtC2@TW5@€Ta1@BüSYSTEM kb_mouse_start=õ€BüüBLOAD INDEXLOü  µµµµµµµ Virtual keyboard Below the main window of Survo one or more rows of soft buttons areusually displayed. The appearance and the functions of these buttons canbe defined by the user. The default setting of soft buttons providesmany useful tasks encountered in standard usage of Survo.In order to show the power of this technique, also a virtual keyboardis available as a set of soft buttons - a 'useful' option when thereal keyboard for some reasons stops working.It is now shown how the virtual keyboard becomes available and how itis used. Everything takes place by mouse clicks:TtC2@TW70@üõG455|198|5TW2@üõG425|378|5TW2@ü;SOFT-SYSTEMüõG255|410|5TW2@ü;SOFT-KBOARDüõG150|410|5TW2@ü;KEYBOARD-1üõG288|436|5TW2@ü;VK-ENTERTW2@ü;VK-ENTERTW2@üõG120|451|5TW2@üT!1@CD@;VK-KEYüõG115|436|5TW2@üT!1@CE@;VK-KEYüõG130|436|5TW2@üT!1@CR@;VK-KEYüõG180|481|5TW2@ü;VK-SPACEüõG35|471|5TW2@üTpLower case letters@TW10@ü;KEYBOARD-2üõG215|451|5TW2@üT!1@Cl@;VK-KEYüõG210|436|5TW2@üT!1@Co@;VK-KEYüõG155|451|5TW2@üT!1@Cg@;VK-KEYüõG395|426|5TW2@üT!1@C(@;VK-KEYüõG105|451|5TW2@üT!1@Cs@;VK-KEYüõG195|436|5TW2@üT!1@Ci@;VK-KEYüõG180|466|5TW2@üT!1@Cn@;VK-KEYüõG395|426|5TW2@üT!1@C(@;VK-KEYüõG115|466|5TW2@üT!1@Cx@;VK-KEYüõG410|426|5TW2@üT!1@C)@;VK-KEYüõG410|426|5TW2@üT!1@C)@;VK-KEYüõG215|476|5TW2@ü;VK-SPACEüõG115|466|5TW2@üT!1@Cx@;VK-KEYüõG219|226|5TW20@ü;VK-ACTüõG364|378|5TW20@ü;SOFT-STARTüLoTtC0@LR1BSYSTEM kb_mouse_start=-€BLr1LOTÿ


COLX W20{act}





















































Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü  µµµµµµµ Prime factors of numbers m^n-1                                                             ACCURACY=16When testing functions of Survo, I have always liked playing withnumbers, especially with integers, although I have rather limitedknowledge about Number Theory.Sometimes such haphazard experiments reveal patterns that may beindications of certain general properties of numbers. Usuallysuch regularities prove to be well-known results in algebra ornumber theory.TtC2@TW50@My latestTtC0@ adventure with integers started from the observation thatnumbers of type m^n-1 (m to n'th power minus 1) like 2^50-1have factorizations of a certain regular type.TtC2@TW40@ By means of Survo we haveTW5@ü2^50-1=TW10@TD2@€TD0@TW10@ TW5@ºTW5@(10:factors)=TW10@TD2@€TD0@TW10@üand it isTtC0@ noticed that all factors except the first one (3) areending with 1TtC2@TW30@ and ifTtC0@ 1 is subtracted, the numbers will be 10, 30, 250,600, 1800, 4050 so that they are not only divisible by 10 but thefour greatest are divisible even by 50, the exponent in the originalnumber 2^50-1.TtC2@TW60@ Such an observationTtC0@ motivates to test other exponentslike 47 and we obtain2^47-1 140737488355327(10:factors)=2351*4513*13264529                                  =(50*47+1)*(96*47+1)*(282224*47+1)TtC2@TW50@üTW10@üThus in TtC0@this case all three factors have the form c*47+1.TtC2@TW20@Numbers 2^n-1TtC0@ are called Mersenne numbers and it is known that ifn is a prime number (like 47), all prime factors of 2^n-1 are of theform c*n+1.TtC2@TW40@TW10@The next questionTtC0@ could be: Are there similar regularities in numbersof type m^n-1 when m is greater than 2 ?TtC2@TW30@TW10@In this caseTtC0@ it is known that m^n-1 is always divisible by m-1.It is therefore more essential to study numbers (m^n-1)/(m-1)=1+m+m^2+m^3+...+m^(n-1).TtC2@TW40@üTtC0@TtC2@üI made TtC0@the following simple sucro for computing prime factors ofnumbers (m^3-1)/(m-1) for m=2,3,...,20:TUTSAVE A{W1=1}ü+-ü A: {R}{W1=W1+1}({print W1}^3-1)/({print W1}-1)={act}{l} {line end}(10:factors)={act} if W1 < 20 then goto A{end}üTtC2@TW50@üTD2@€TD0@TW10@TtC0@üTtC0@/ATtC2@TW10@TD2@€TD0@ü¶µ      ¶TtC2@üTW30@üIt can be seenTtC0@ immediately that every third of these numbers seems tohave 3 as the smallest factor. However, all other factors are of theform c*3+1.TtC2@TW40@üTtC0@TtC2@TW5@üTo indicateTtC0@ this I made a more advanced sucro MPN so that the command/MPN mmax,nlists all prime factors of numbers (m^n-1)/(m-1) for m=2,3,...,mmax,whenever possible, in the form c*n+1.Thus in case n=3 we have/MPN 20,3TtC2@TW50@TD2@€TD0@üTtC2@TW30@TtC0@TtC2@TW5@üThus whenTtC0@ m-1 is not divisible by 3, all factors of (m^n-1)/(m-1)are of the form c*3+1, and if m-1 is divisible by 3, the smallest factoris just 3 and others are of the form c*3+1.TtC2@TW30@After my experimentsTtC0@ I know now that a corresponding statement seems toapply to all prime numbers n.TtC2@TW30@üTtC0@TtC2@üThusTtC0@ for n=5 we obtain/MPN 20,5TtC2@TW30@TD2@€TD0@TtC2@TW30@üTtC0@TtC2@üSee alsoTtC0@ what happens for n=13:/MPN 15,13TtC2@TD2@€TD0@TtC2@TW30@üTtC0@TtC2@TW5@üMy experimentsTtC0@ indicate that in general, if n is a prime >2,the prime factors of (m^n-1)/(m-1) are all of the form c*n+1 exceptwhen n-1 is divisible by m and then the smallest factors is n, butall others are of the form c*n+1.Although multiple precision arithmetics is possible in Survo,it is not capable for factorising integers greater than 2^63. ThereforeI also wrote a Mathematica code which confirms the above statementfor numbers (m^n-1)/(m-1) when n is any prime <10000 and m^n<10^50.However, no numerical experiment is a substitute for a formalmathematical proof. I am pretty sure that somebody has done it.So if you have a strict proof, let me know.Tÿ

























üTtC2@Ta1@bLoBINIT 1000 100€RESIZE€üCOLX W20€LOAD INDEXü Some properties of Magic Squares S7±174S  /  K.Vehkalahti 6.1.2011ü"A µmagic squareµµµµµµµ of order n is an arrangement of n^2 numbers, usually distinct integers, such that the n numbers in all rows, all columns, and both diagonals sum to the same constant."                          µµµhttp://en.wikipedia.org/wiki/Magic_squareLOTtC2@TW50@LoTtC0@üLet us work with a magic square using the matrix interpreter of Survo.(This demo is partially based on an |EXAMPLE| sucro by S.Mustonen.)LOTtC2@MAT M=#MAGIC(6)TW5@ / This will create a magic square of order 6...TD2@€TD0@MAT LOAD M ### CUR+1€ü´++++++++++++++++++++++++++++++++++++=üTW10@üLoTtC0@M is a 'normal' magic square: it contains the integers from 1 to n^2.Here, n=6 and hence n^2=€º. Let us compute, say, the row sums:MAT S=SUM(M')LOTtC2@TD2@€TD0@MAT LOAD S€TW20@üLoTtC0@LOADM M (8) CUR+1 / with SUMS=1 displays the row and column sums:LOTtC2@TD2@€TD0@TW30@üLoTtC0@Some 'magic statistics' follow:LOTtC2@TW10@TtC0@MAT S=SUM(S') / total sum (a famous number!)TtC2@TD2@€TD0@TtC0@MAT LOAD S€TtC2@TW10@TtC0@MAT A=MAX(M) / row vector of the column maximaTtC2@TD2@€TD0@TtC0@MAT LOAD A€TtC2@TW10@üTtC0@MAT B=MAX_IJ(M) / maximum element with corresponding labelsTtC2@TD2@€TD0@TtC0@MAT LOAD B€TtC2@TW30@üLoTtC0@In a magic square, also both diagonals must sum to the same constant,often called 'magic sum' and defined by magic_sum=n*(n^2+1)/2.LOTtC2@TW30@Here, magic_sum=TD2@€TD0@TW10@º. SoTtC0@ let us take a look at the diagonals of M.TtC2@TW10@TtC0@üThe sum of the main diagonal is given briefly by the trace:MAT TRACE MTtC2@TD2@€TD0@TW5@TtC0@MAT S=VD(M) / or: 'manually' extract the diagonal to a column vector STtC2@TD2@€TD0@TtC0@MAT LOAD S' / (display S here, temporarily transposed)...€MAT T=SUM(S) / ...and compute the sum of the (column) vector S.€TtC2@TW10@TtC0@The elements of matrices can be referred to in editorial computing,that is, we can take the (only) value of T by: MAT_T(1,1)=TtC2@TD2@€TD0@TW10@TtC0@or, if we want to use the literal labels, MAT_T(Sum,diag)=TtC2@TD2@€TD0@TW20@TtC0@üNow, let us also check the µskewµµµµµµµ diagonal sum of M.TtC2@TW20@üLoTtC0@üMAT TRANSFORM S BY 6+1-I# / change the former S to a permutation vectorLOTtC2@TD2@€TD0@TtC0@MAT LOAD S'  / (above, I# refers to the row indices 1,2,...,6 of S)€üMAT MP=PERM(M,S) / make a permutation of M according to STtC2@TD2@€TD0@TtC0@MAT LOAD MP      / µnote the row labels€üµ  µ  µ  µ  µ  µ  üTtC2@TW30@TtC0@The skew diagonal of M is the same as the diagonal of MP, so:MAT TRACE MPTtC2@TW10@€TW30@TtC0@üLoTtC0@üM can be re-ordered in many other ways by using a 'flip matrix'that is a suitable permutation of an identity matrix.üLOTtC2@TW20@LoTtC0@üMAT I=IDN(6,6)           / create a  6x6 identity matrix I€MAT CLABELS FROM M TO I  / copy  the  column labels from M€MAT RLABELS FROM M TO I  / copy  the  row    labels from M€MAT S=CUM(I)             / cumulative sums of columns of I€MAT LOAD S / (lower triangular matrix, by MAT S=TRI(6,6,1)' as well)LOTtC2@TD2@€TD0@TW50@üLoTtC0@LOüMAT S=SUM(S) / sums of those columns make up the permutation vector S€MAT LOAD S€MAT J=PERM(I,S) / a µflip matrixµµµµµµµ is a permutation of ITtC2@TD2@€TD0@TtC0@MAT LOAD J      / µnote the column labels€S1±   STtC2@TW30@üüTW20@TtC0@MAT J=J'    / transpose the (symmetric) flip matrix€MAT LOAD J  / µonly the labels reveal the difference!€üµ  µ  µ  µ  µ  µ  üTtC2@TW40@TtC0@LoüMAT MP=J*M / a permutation of M using the flip matrixLOTtC2@TD2@€TD0@TtC0@MAT LOAD MP€TtC2@TW40@üTtC0@LoMAT J=J'      / transpose J again to change the labels€MAT MP=J*M'*J / another flip by multiplying M' from both sidesLOTtC2@TD2@€TD0@TtC0@MAT LOAD MP€TtC2@TW30@üµµµµµMagic Squares will return in another demo...µµµTÿ KV 23.1.2011 (25.1.2011)

                                      174(10:ascii)=®





























Ta1@bTgC1@C1@C!@C1@C1@SCRATCH €BüCOLX W20€BLOAD INDEXü  µµµµµµµ Solving linear equations On the line A+1 (hidden by ? in the control column) is an arbitrarysequence of digits 1,2,3,4.LoA?11322444114422222333124444122133433333233444343422211221442üLOüOur task is to determine the number of occurrences of each digit bymaking inquiries of the type"What is the total number of digits x and y ?"It is shown how the answer is found by 4 questions.üTtC2@TW90@A commandTtC0@ CHARS is used for this purpose as follows:CHARS A+1,A+1,12TtC2@TW5@TD2@€TD0@TW30@CHARS A+1,A+1,23TW10@€TW20@CHARS A+1,A+1,34TW10@€TW10@CHARS A+1,A+1,13TW10@€TW20@üIf the numberTtC0@ of digit d is denoted by Xd, we have four linear equations(1) X1+X2=27(2) X2+X3=32(3) X3+X4=32(4) X1+X3=25üTtC2@TW60@TtC0@TtC2@TW5@These TtC0@equations are solved readily as follows:TtC2@TW10@From (1) we have X1=27-X2.TW20@Substituting X2=32-X3 from (2) we getTW5@X1=27-(32-X3)=-5+X3TW20@and similarly X3=25-X1 from (4)TW5@X1=-5+(25-X1)=20-X1TW20@thus giving X1=20-X1TW10@ or 2*X1=20 and X1=10.TW30@üTtC0@TtC2@üNow it is easy to solve X2=17 from (1),TW10@ X3=15 from (4),TW10@ X4=17 from (3).TW10@This resultTtC0@ is checked simply by copying the hidden lineü¶TtC2@TW20@TD2@±A+1TD0@TW15@ü¶TW10@ (and counting:)TW20@The mainTtC0@ purpose of this demo is to show how the same system of fourlinear equations is solved routinely by the matrix interpreter.TtC2@TW20@The TtC0@equations are written in a more systematic form:TtC2@TW15@    1*X1 + 1*X2 + 0*X3 + 0*X4 = 27TW10@TtC0@    0*X1 + 1*X2 + 1*X3 + 0*X4 = 32    0*X1 + 0*X2 + 1*X3 + 1*X4 = 32    1*X1 + 0*X2 + 1*X3 + 0*X4 = 25üTtC2@TW30@TtC0@TtC2@TW5@The coefficientsTtC0@ of the X's are represented as a matrix AMATRIX A///  X1 X2 X3 X4r12   1  1  0  0r23   0  1  1  0r34   0  0  1  1r13   1  0  1  0üTtC2@TW30@and similarlyTtC0@ the matrix (vector) of the right-hand constants as BMATRIX B/// freqr12   27r23   32r34   32r13   25TtC2@TW30@TW5@üReasonableTtC0@ row and column labels have been given to these matrices.The entire problem can now be represented as a matrix equation A*X=Band it is solved by the MAT commands:TtC2@TW40@TtC0@TtC2@TW10@MAT SAVE A / saving A to a matrix file A.MATTtC2@TW5@TD2@€TD0@TtC0@MAT SAVE B / saving B to a matrix file B.MATTtC2@TW5@€TW5@TtC0@MAT SOLVE X FROM A*X=B / the solution goes to a matrix file X.MATTtC2@TW15@€TW5@TtC0@MAT LOAD X / loading X.MAT to the edit field:TtC2@TW10@€TW20@TW10@See howTtC0@ proper usage of row and column labels made the resultvery legible.Tÿ













