¸¸¸¸Ta1@bTIA1@CRETURN@@GEnd1@@@!T!1@CSURVOHRG@;SUR-SAVETb0@0@&TIA1@C?@GA@@GA@¸¸¸TXH@TgC1@C1@C!@C1@C1@SCRATCHÄThe sucro is used as follows:                                                                                           RESTRICTIONS                                                equation1                                                   equation2                                                        |                                                      equationN                                                                                                               /RESTREG <data>                                                                                                         The variables (of the datafile) to be used in the regression     analysis must be marked with Y and X . The MASK specification    has no effect on this sucro.                                                                                                        µµµµ#7Tp       More help by ? Load lines + otherwise Press ENTER!@TVC600@_?+@@GHELP@GLOAD@Tp@TLGEnd1@TXLOAD@Tp@πππTLGEnd2@TXHELP@Sucro for linear regression analysis with linear restrictions.                                                               The restriction equations must be given below the keyword      RESTRICTIONS and each of them in the form:                     a1*Var1Òa2*Var2...ÒaN*VarN=c1                                  where Var's are names of variables appearing in the data.      The constant term is referred to with the word Constant .      Lines for equations must be written without spaces.            The RESTRICTIONS paragraph ends with an empty line.                                                                           When the sucro is run, the data and restrictions are saved in  matrix files RESTR_X.M RESTR_Y.M RESTR_R.M and RESTR_C.M .     You can edit these (and give other names) and run the sucro    with these matrices. (This saves time if the sucro is to be    run many times with the same data.) Use it this way:           /RESTREG MATRICES,<regr mat>,<resp vec>,<restr mat>,<restr vec>Note that MATRICES is a keyword to the sucro.                  If /RESTREG MATRICES is activated without name of matrices     the matrices RESTR_X.M RESTR_Y.M RESTR_R.M RESTR_C.M are used  by default.                                                    Tp       Press ENTER!@TVC1200@_@@Tp@TLGEnd1@¸¸¸¸¸¸TXH1@Name of data not given!i7XTLGH@TXH2@Both names not found!i7XTLGH@TXH3@Restrictive matrix and/or vector not given!i7XTLGH@¸¸¸¸TXA@i6TKC~CONSTANT@TIA1@CMATRICES@@GCOMPUTE@@TIA1@Cmatrices@@GCOMPUTE@@TIA1@C(empty)@@GH1@@TXV2@i9L1i:L2TIN9@C1@@GD@@i8wTIA8@CRESTRICTIONS@GV2@@GV2@TLGE@TXD@TgC1@C1@C!@C1@C1@≥RESTRICTIONSi8L1i9L2TIN8@C1@@GH3@@TXE@i8L1i9L2i:XTIA10@C@@GH3@@ππTXK@i9wTIA9@C @GK@@GK@πi:L1i9L2T=11@10@-@8@T=11@11@-@C1@¸¸¸i8dTgC1@C2@C!@C1@C1@SCRATCHÄREDIM 314,159ÄCHECK @8=.SVOÄi8wTIA8@COK@@GE2@@ Data file = not found!i7XTLGH@TXE2@TgC1@C1@C!@C1@C1@SCRATCHÄµ/RESTREG RETURN / Restores the original edit field.T!2@CRESTR_X.M@T!3@CRESTR_Y.M@MASK=#1(XY)                                             MAT SAVE DATA = TO &XY                Ä AMAT DIM &XY                                  ¸TIA6@C0@@GI@@MAT @2=CON(row&XY,col&XY)                    MAT &Q=&XY(*,1:col&XY-1)                                MAT @2(1,2)=&Q                               MAT @2(0,1)=Constant                         TLGJ@TXI@MAT @2=&XY(*,1:col&XY-1)                 TXJ@MAT NAME @2 AS X                         MAT @3=&XY(*,col&XY:col&XY)                  MAT NAME @3 AS Y                             TgC1@CA@C!@C1@C1@Ä¸¸¸TgC1@C2@C!@C1@C1@SCRATCHÄAT!4@CRESTR_R.M@T!5@CRESTR_C.M@TgC1@CA@C!@C1@C1@SCRATCHÄTgC1@CA@C!@C1@C1@MAT &X=@2MAT DIM &XMAT &A=ZER(@;,col&X)MAT CLABELS FROM &X TO &AMAT RLABELS "Eq" TO &AMAT DIM &AMAT &C=ZER(row&A,1)MAT RLABELS "Eq" TO &CMAT &C(0,1)="Value"MAT NAME &C AS ResVecMAT NAME &A AS ResMatMAT @5=&CMAT @4=&ATgC1@CA@C!@C1@C1@Ä¸¸TgC1@C2@C!@C1@C1@SCRATCHÄMAT &DAT=@2'ÄMAT &RMT=@4ÄMAT &RVC=@5ÄTgC20@C20@C1@ππππTgC120@C120@C1@MAT LOAD &DAT(*,0),##############,CUR+1ÄTXA2@i8xTIA8@C/@GA2@@GA2@ππTXK2@i9wTIA9@C @GK2@@GK2@πTgC120@C120@C!@C1@C1@πSCRATCHÄTgC120@C120@C!@C1@C1@ππππTgC1@C20@C!@C1@C1@TXK3@i9wTIA9@C @GK3@@GK3@i8L1i9L2T=11@8@-@C19@TgC20@C20@C!@C1@C1@T!10@C1@TXA3@≥= iCw+TgC1@C15@C!@C1@C1@MAT &RVC(@:,1)=@CÄT=10@10@+@C1@TIN10@11@GA3@GA3@@TgC1@C20@C!@C1@C1@T!10@C1@T!13@C1@T!18@C1@TXA4@iCxTIA19@C+@@GPL@@TIA19@C-@@GMI@@TIA19@C*@@GMU@@TIA19@C @@GSP@@TLGA4@TXPL@ iCwi?L1i@L2TLGMA@TXMI@ i?L1i@L2TIN16@C2@@GMI2@@iCwi?L1i@L2T!18@C-1@TLGMA@TXMI2@T!13@C-1@TLGA4@TXMU@ iAwT=13@13@*@17@TLGA4@TXMA@TgC119@C119@C!@C1@C1@FIND @CÄi8L1i9L2TIN8@C119@@GERR@@T=9@8@-@C119@TgC1@C15@C!@C1@C1@MAT &RMT(@:,@9)=@=ÄT!13@18@T!18@C1@TgC1@15@C!@16@C1@TLGA4@TXSP@i?L1i@L2T=15@15@+@C1@T=10@10@+@C1@TgC1@15@C!@C1@C1@TIN10@11@@@GEND@TLGA4@TXERR@TgC1@C10@C!@C1@C1@Error, couldn't find variable in matrixTXEND@MAT @4=&RMTÄMAT @5=&RVCÄ¸TXCOMPUTE@¸¸¸¸¸¸TIA2@C@GB@@GB@T!2@CRESTR_X.M@T!3@CRESTR_Y.M@T!4@CRESTR_R.M@T!5@CRESTR_C.M@TXB@i8dTgC1@C2@C!@C1@C1@AREDIM 314,159ÄSCRATCHÄCHECK @8@4Äi9wTIA9@COK@@GQ1@@TLGP1@TXQ1@CHECK @8@5Äi9wTIA9@COK@@GQ5@@TXP1@CHECK @8@4.MATÄi9wTIA9@COK@@GQ2@@TLGP2@TXQ2@CHECK @8@5.MATÄi9wTIA9@COK@@GQ5@@TXP2@Restrictive matrix/vector not found!i7XTLGPEND@TXQ5@TgC1@CA@C1@SCRATCHÄCHECK @8@2.MATÄi9wTIA9@COK@@GQ3@@TLGP3@TXQ3@CHECK @8@3.MATÄi9wTIA9@COK@@GPEND@@TXP3@CHECK @8@2Äi9wTIA9@COK@@GQ4@@TLGP4@TXQ4@CHECK @8@3Äi9wTIA9@COK@@GPEND@@TXP4@Data matrix/vector not found! (or diffrent extensions)i7XTXPEND@TIA7@C@GH@@GH@¸¸¸TgC1@C2@C!@C1@C1@SCRATCHÄATgC1@CA@C!@C1@C1@MAT &X=@2ÄMAT DIM &XÄMAT DIM @4Äq=row@4    kerroin=1/(row&X-col&X)MAT &Y=@3MAT REM **********SUM OF SQUERES TOTAL:MAT &SST=CENTER(&Y)MAT &SSTT=&SST'MAT &SST=&SSTT*&SSTMAT REM **********Ordinary least squere:MAT &Q1=MTM(&X)MAT &Q1=INV(&Q1)MAT &XT=&X'MAT &Q2=&Q1*&XTMAT &B=&Q2*&Y¸MAT NAME &B AS BMAT REM *****LSE under res B-INV(X'X)R'*INV(R*INV(X'X)R')*(R*B-C)MAT REM **********H0: &R*BETA is &CMAT &R=@4MAT &C=@5MAT &RT=&R'MAT &L1=&Q1*&RTMAT &L2=&R*&Q1MAT &L2=&L2*&RTMAT &L2=INV(&L2)MAT &L3=&R*&BMAT &L3=&L3-&CMAT &BH=&L1*&L2MAT &BH=&BH*&L3¸MAT &BH=&B-&BHMAT REMMAT REM *********RSS AND RSSH:MAT REMMAT DIM &RMAT DIM &XMAT &E=&X*&BMAT &E=&Y-&EMAT &ET=&E'MAT &RSS=&ET*&EMAT &EH=&X*&BHMAT &EH=&Y-&EHMAT &EHT=&EH'MAT &RSSH=&EHT*&EHMAT &S2=&RSSMAT &S2=kerroin*&S2MAT s2=&S2(1,1)MAT REMMAT &S2R=(1/(1/kerroin+q))*&RSSHMAT s2r=&S2R(1,1)MAT REM **********F-Test:MAT REMMAT &F=&RSSH-&RSSMAT TRANSFORM &F BY &RSS AND X#/Y#MAT TRANSFORM &F BY X#/qMAT TRANSFORM &F BY X#/(kerroin)MAT REM **********Explanation R2 and RH2MAT &R2=&RSSMAT TRANSFORM &R2 BY &SST AND 1-X#/Y#MAT REM &R2=1-&R2MAT &RH2=&RSSHMAT TRANSFORM &RH2 BY &SST AND 1-X#/Y#MAT REM &RH2=1-&RH2MAT REM ***********DEVIATION SQRT(DIAG(s2*INV(X'X))  MAT &COV=&Q1MAT TRANSFORM &COV BY s2*X#MAT &DEV=VD(&COV)MAT TRANSFORM &DEV BY SQRT(X#)MAT REM ***********RCOV s2*(D-DR'INV(RDR')RD) where D is INV(X'X) MAT REM ***********DEVIATION SQRT(DIAG(RCOV))  MAT &RCOV=&L2*&RMAT &RCOV=&RCOV*&Q1MAT &RCOV=&RT*&RCOVMAT &RCOV=&Q1*&RCOVMAT &RCOV=&Q1-&RCOVMAT TRANSFORM &RCOV BY s2r*X#MAT &RDEV=VD(&RCOV)MAT TRANSFORM &RDEV BY SQRT(X#)ATgC1@CA@C!@C1@C1@Ä¸¸¸¸TgC1@CA@C!@C1@C1@SCRATCHÄ¸TgC1@C210@C!@C1@C1@BMAT LOAD &B,CUR+2ÄTgC1@CB@C!@C1@C1@≥///ππTXK4@i9wTIA9@C @GK4@@GK4@π¸TgC1@CA@C!@C1@C1@Ordinary estimators:                       Name      Value             Std. deviation             π¸TXK5@i9wTIA9@C @GK5@@GK5@MAT LOAD &R2,CUR+1ÄB}Wi9wExplanation R^2: @9TgC1@CB@C!@C1@C1@SCRATCHÄMAT LOAD &BH,CUR+2ÄTgC1@CB@C!@C1@C1@≥///ππTXK6@i9wTIA9@C @GK6@@GK6@π¸TgC1@CA@C!@C1@C1@TXK7@i9wTIA9@C @GK7@@GK7@Estimators for model with restrictions:Name      Value             Std. deviation                  π¸TXK8@i9wTIA9@C @GK8@@GK8@MAT LOAD &RH2,CUR+1ÄB}Wi9wExplanation R^2: @9TgC1@CB@C!@C1@C1@SCRATCHÄMAT LOAD &F,CUR+2ÄTgC1@CB@C!@C1@C1@≥///TXW@i8xTIA8@C @@GW@@TXU@i8xTIA8@C @@GV@@TLGU@TXV@TXQ@i8xTIA8@C @@GQ@@i8wMAT DIM &XÄMAT DIM &RÄ1-F.F(row&R,row&X-col&X,@8)=Äi:XTgC1@CB@C!@C1@C1@≥row&X= iCwTgC1@CA@C!@C1@C1@TXK9@i9wTIA9@C @GK9@@GK9@F-statistic:@8  P: @:TgC1@CA@C!@C1@C1@≥s:(N=@C)TgC1@CB@C!@C1@C1@SCRATCHÄMAT LOAD &DEV,,CUR+1Ä≥///ππTXK10@i9wTIA9@C @GK10@@GK10@πTgC1@CA@C!@C1@C1@≥Std.πTgC1@CB@C!@C1@C1@SCRATCHÄMAT LOAD &RDEV,,CUR+1Ä≥///ππTXK11@i9wTIA9@C @GK11@@GK11@πTgC1@CA@C!@C1@C1@≥Std.≥Std.πTgC1@CA@C1@ππTXK12@i9wTIA9@C @GK12@@GK12@πTgC1@CA@C!@C1@C1@πMAT KILL &*Ä¸TXEnd2@T!1@CSURVOHRG@;SUR-RESTOREBSCRATCH ÄππππTLGEnd@TXEnd1@MAT KILL &*ÄT!1@CSURVOHRG@;SUR-RESTORETXEnd@Ta-1@Tˇ----------------------------------------------------------------
 Linear regression with linear restrictions
   made by Fredrik èberg 94-95   ( e-mail: faberg@helsinki.fi )
----------------------------------------------------------------
 ---------------------------------------------------------------
 Below is the help (and error) text.
 ---------------------------------------------------------------

 def Wdata=W1  Wxmat=W2  Wyvec=W3  Wcons=W6  Wresmat=W4
 def Wresvec=W5  Werrtxt=W7  Wtemp=W8  Wtemp2=W9 Wtemp3=W10
 def Wresrows=W11  Wfl=W12 Wmul=W13 Wvarnum=W14 Wrow=W15 Wcol=W16
 def Wm=W17 Wnxtmul=W18 Wtemp4=W19

----------------------------------------------------------------
First the matrices X and Y are made. They are saved in the current
directory as RESTR_X.M and RESTR_Y.M
----------------------------------------------------------------
--------------------------------------------------------
Checks if the data file exists.
--------------------------------------------------------
-------- if CONSTANT specification 0 then no constant term
----------------------------------------------------------------
Making restricting matrice and vector.
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
--------------------- Done!
----------------------------------------------------------------
 Linear regression with linear restrictions
----------------------------------------------------------------

 Checking matrices

----------------------------------------------------------------
Below starts the computing of estimates by activating a matrix chain
----------------------------------------------------------------
********************** &B is the ordinary LSE of beta
****************&BH is LSE subject to restrictions
----------------------------------------------------------------
----------------------------------------------------------------
-------------- Arranging results in a 'copy BOX' from line 'A'
-------------- From line 'B' 'temporary area'.
------




--------------------- Done!
