üüüüüüüTtC2@Ta1@b@!T!1@CTABUL8@;SUR-SAVE0@&Tb0@üTIA5@C@@GHelp@@BLR1=,@2,@3,@4,@5,@6,@7,@8,@9,@:,@;B0REPLACE ",BY,",",BY,",N / LINES=CUR+1€BTIN1@C1@GHelp@@GHelp@REPLACE ",TO,",",TO,",N / LINES=CUR+1€BTIN2@C1@GHelp@@GHelp@REPLACE ",,,","",C / LINES=CUR+1€BREPLACE ",,","",C / LINES=CUR+1€BREPLACE ", ","",C / LINES=CUR+1€BT!1@C0@TXpar1@i2xTIA2@C @@Gpar3@@TIA2@C,@Gpar1@@Gpar1@TXpar2@T=1@1@+@C1@ TLGpar1@TXpar3@T=1@1@+@C1@BT!2@C BY @Tw2@T=1@1@-@C1@BT!2@C TO @Tw2@BT=1@1@-@C1@üüüüT!3@1@ºi2wT=3@3@-@C1@TXpar4@i5xTIA5@C @Gpar4@@Gpar4@Büüüüüi1wT=3@3@-@C1@T!4@C0@TZ6@TXpar5@T=4@4@+@C1@TIN4@3@@@Gpar6@@~wTLGpar5@TXpar6@BüüüüüüüüüiGhT!4@C0@T!25@C1@COPY 1,1 TO @GTABUL@I.TMP€FILE DEL @GTABUL@I.TMP€TLGCV1@üTXCV0@BTXCV1@T=4@4@+@C1@TUTSAVE @GTABULTMPTJ4@1@2@3@4@5@6@7@@GCW1@GCW2@GCW3@GCW4@GCW5@GCW6@GCW7@@TXCW1@T!37@6@TLGCW0@TXCW2@T!37@7@TLGCW0@TXCW3@T!37@8@TLGCW0@TXCW4@T!37@9@TLGCW0@TXCW5@T!37@10@TLGCW0@TXCW6@T!37@11@TLGCW0@TXCW7@T!37@12@TLGCW0@TXCW0@{save spec @U W1}{end}B€@!/@GTABULTMP€T>CTABULTMP.STK@0@&INIT 100 996 10€T<CTABULTMP.STK@ü=0@&Bi5xTIA5@C @Gs00@@Gs00@T!5@C        Classification of @T=5@5@&@37@T=5@5@&@C missing! @T=5@5@&@CPress ENTER!@Tq5@T!1@CTABUL8@;SUR-RESTORETVC600@_@@Tp@TLGEnd@üTXs00@BREPLACE ","," ",C€TRIM 60€#U=BTXs0a@º#BTXs0b@i5xTIA5@C#@@Gs0c@@TIA5@C @Gs0b@@Gs0b@,TLGs0b@TXs0c@i5xTIA5@C @@Gs0x@@º,&TLGs0a@TXs0x@TgC1@C1@C!@C1@C1@COPY CUR+1,END TO @GTABUL@I.TMP€@!T!1@CTABUL8@;SUR-RESTORE0@&Tb0@TIN4@3@GCV0@@@üiATKC~CLASSMAX@TIA17@C@Gs1@@Gs1@T!17@C30@TXs1@i@TKC~LISTDIM@TIA16@C@Gs3@@Gs3@T!16@C300,150,50@TXs3@iFTKC~COMMANDS@iETKC~TABLES@TIA22@C@Gs5@@Gs5@iFhT=22@22@&@CTABULATE.CMD@TXs5@TIA21@C@Gs6@@Gs6@iEhT=21@21@&@CTABULATE.OUT@TXs6@iM%eoutT!19@CfrctexmFEXRCTM@i?TKC~MASK@BINIT 100 100 30€üTIA15@C@@GV2@@MASK=¶@?¶¶i5xBTIA5@C#@GV2@@GV2@TwC(@i5xTIA5@C(@GV3@@GV3@TLGV3@TXV2@MASK=#1TXV3@BTwC=@ i?wüMASK=@? #MASK=@CSTAT =,CUR+1,STATUS€iOTKC~#obs@@CBTXV4@#i5xTIA5@C @@GV5@@+TLGV4@TXV5@=€ iKwTIN27@C0@@@GV6@T!5@C        No variables activated with @T=5@5@&@19@T=5@5@&@C! @T=5@5@&@CPress ENTER!@Tq5@TVC600@_@@Tp@TLGEnd1@üTXV6@BT!24@C2@T!26@C3@üOUTPUT @GTABUL@J.TMP€FILE DEL @GTABUL@J.TMP€INIT 10000,200,1000€üMASK=@?(@C)STAT =CLASSMAX=@A PRIND=0€FILE STATUS =€FIND FIELDS:€B¶CLEAR CUR+1,ENDWWWW€¶TgC1@CEND-1@C1@i5wTIA5@CEND@GV7@@GV7@üSCRATCH€TXV7@¶¶SAVEP @GTABUL@H.TMP€INIT 1000 500 1000€T!15@C@T!19@C@üiYdCOPY 1,1 TO @E€COPY 1,1 TO @F€FILE DEL @E€FILE DEL @F€OUTPUT @E€üTgC1@C1@C!@C1@C1@SCRATCH€These commands were generated by the sucro command/TABULATE = BY @6 TO @2onDATE€B..........................................................COPY 1,CUR-1 TO @F€TgC1@C1@C!@C1@C1@SCRATCH€üT!4@C0@TXLoop@T=4@4@+@C1@TIN4@27@@@GEndLoop@LOADP @GTABUL@H.TMP,@4,@4,CUR+1€WWiLxiDxWWiTwüSCRATCH€TUTSAVE @GTABULTMP{save spec @T W1}{end}B€@!T!1@CTABUL8@;SUR-RESTORE0@&Tb0@B/@GTABULTMP€BINIT 200 200 30€TIA1@C@@GClass@@=B0@&TLGk3@üTXClass@0@&FILES=@GTABUL@J.TMP SEARCH=FIRST RUN=1 SHOW=2SEARCH Variable: @T€TwC,@ iVwT=39@38@+@17@T=39@39@+@C20@TgC1@C1@C!@C1@C1@SCRATCH€LOADP @GTABUL@J.TMP @V,@W,CUR+1€¶üWTXll@ºiXL1i5L2BTIN5@C1@@@Gll@SCRATCH€¶¶BüiNTKC~min@iPTKC~N(missing)@iQTKC~mean@iRTKC~stddev@@T@!0Bi1wREPLACE "up.limit ","up.limit ",N€REPLACE "Constant= ","Constant= ",N€REPLACE "Cannot be classified","Cannot be classified",N€REPLACE "Values not equidistant!","Values not equidistant!",N€REPLACE "= ","= ",N€@2 @3 @4 @5 @6B0@&iVwWiWwWiXwWiYwWiUwBTIN31@32@@GErr1@@TIN40@C1@@GErr2@@TIN39@C1@@GErr3@@TIN37@C1@Gk2@Gk1@Gk2@üTXErr1@T!5@CAll observations missing in variable @T=5@5@&@36@TLGErrX@TXErr2@T!5@CVariable @T=5@5@&@36@T=5@5@&@C can not be classified@TLGErrX@TXErr3@T!5@CVariable @T=5@5@&@36@T=5@5@&@C is constant@TLGErrX@TXErrX@T=5@5@&@C!@TgC1@C1@C!@C1@C1@SCRATCH€COPY CUR+1,END TO @F@5..........................................................€SCRATCH€TLGLoop@üTXk1@T!5@36@üTIN38@C1@GErrX@@GErrX@LR1FIND up.limit€üTXk1a@WWiXwTIA40@C @@Gk1b@@TIN40@C0@Gk1a@@Gk1a@TLGk1a@üTXk1b@Lr1€CLEAR CUR+1,ENDWTXk1e@i5xTIA5@C @Gk1e@@Gk1e@€TIA33@C@@Gk1e01@@ACCURACY=-2 mean=@Q mean=€ 0iSwTLGk1e02@TXk1e01@T!35@C @TXk1e02@int(@N)=€ iVwLR1TXk1e1@ºiXL1i5L2BTIN5@C1@@Gk1e3@@TXk1e2@i5xTIA5@C @Gk1e1@@Gk1e1@TLGk1e2@TXk1e3@Lr1@VBTRIM 60€TLGk3@üTXk2@FIND "@T "€CLEAR CUR+1,ENDTIA30@C@@Gk2S@@üWTLGk1e@üTXk2S@€INSERTB€/SET CUR+2,END,CUR+1€TRIM 60€TLGk3@üTXk3@LR1#T=TXk3a@º#BTXk3b@i5xTIA5@C#@@Gk3c@@TIA5@C @Gk3b@@Gk3b@,TLGk3b@TXk3c@i5xTIA5@C @@Gk4@@º,&TLGk3a@üTXk4@LOADP @GTABUL@I.TMP,CUR€TgC1@CEND+1@C1@TAB = / VARIABLES=@6TIN3@C1@@Gk5@@,@7TIN3@C2@@Gk5@@,@8TIN3@C3@@Gk5@@,@9TIN3@C4@@Gk5@@,@:TIN3@C5@@Gk5@@,@;TIN3@C6@@Gk5@@,@<TXk5@,@TBPRIND=0 RESULTS=RSUMS,CSUMSüTJ20@f@r@c@t@e@x@m@F@E@X@R@C@T@M@@Gmf@Gmr@Gmc@Gmt@Gme@Gmx@Gmm@GmF@GmE@GmX@GmR@GmC@GmT@GmM@@üTXmf@TLGm#@TXmr@,R%TLGm#@TXmc@,C%TLGm#@TXmt@,T%TLGm#@üTXme@TXmx@TXmX@TIN3@C1@@Gmex1@@Expected frequencies and contributions to Chi-square can be computedonly for 2-way frequency tables!üTLGmf@TXmex1@ ('e', 'x' and 'X' by /TABULATE)BTwCVARIABLES@END+2 OUTPUT -€€FIND "TABLE "€iVL1i5L2üT!41@C0@ºTXmex1a@i5wTIA5@C @@Gmex1b@@TIN5@C0@@@Gmex1a@T!41@C1@TLGmex1e@TXmex1b@º #BWTXmex1c@@~i5wTIA5@C#@@Gmex1d@@TIN5@C0@@@Gmex1c@T!41@C1@TwC#@TLGmex1e@TXmex1d@TXmex1e@TgC1@CEND+2@C1@TABTEST =1 / SIMUMAX=0 MATRIX=&T€BD¶üMAT &C=SUM(&T)MAT DIM &TMAT &R=&T(*,col&T)MAT &N=SUM(&R)MAT &E1=&R*&CMAT TRACE &NMAT &E1=(1/tr&N)*&E1MAT &E=ZER(row&T+1,col&T)MAT &E(1,1)=&E1MAT &E(row&T+1,1)=&CMAT NAME &E AS &EMAT &E(row&T+1,0)="sum"TIN41@C1@@Gmex1k@@MAT &D=&T-&E1MAT TRANSFORM &D BY X#*X#MAT TRANSFORM &D BY &E1 AND X#/Y#MAT &X=ZER(row&T+1,col&T)MAT &X(1,1)=&DMAT &S1=SUM(&D)MAT &S2T=SUM(&D')'MAT &S=SUM(&S1')MAT &X(row&T+1,1)=&S1MAT &XX=&XMAT &XX(row&T+1,0)="sum"MAT RLABELS "X" TO &XMAT CLABELS "X" TO &XMAT &X(1,col&T)=&S2TMAT &X(row&T+1,col&T)=&SMAT NAME &X AS &XMAT RLABELS "X" TO &XMAT CLABELS "X" TO &XMAT &X(row&T+1,0)="sum"MAT &X(0,col&T)="sum"MAT RLABELS FROM &XX TO &XMAT CLABELS FROM &XX TO &XTXmex1k@¶€üiWTKC~tr&N@T=39@39@&@C.0@iUTKC~Chi_square@¶¶SCRATCH€TgC1@CEND+2@C1@üTIA20@Cx@@Gmex2@@TABS =1,1,CUR€BWWC,D,Expected_frequenciesWWLR2TgC1@CEND+2@C1@MAT LOAD &E,@W,CUR+1€W¹¹º¹ºLR3Lr2¹¹¹¹ºLR2TgC1@CEND@C1@W¹¹Lr3¹BSCRATCH€Lr2¹¹¹¹LR2TgC1@CEND@C1@WsumLr2ºi5L1iWL2ºi5L1iXL2üT=5@39@-@40@TIN5@C0@@Gmex1q@@ºLR2254TIN5@C0@Gmex1m@Gmex1n@Gmex1n@TXmex1m@T=5@C-1@*@5@INSERTTLGmex1o@TXmex1n@DELETETLGmex1o@TXmex1o@ @5Lr2€TXmex1q@TIA20@Ce@@Gmex3@@TXmex2@TgC1@CEND+2@C1@üTIN41@C1@@Gmex2x@@TABS =1,1,CUR€BWWE,F,Contributions_to_Chi-squareWWLR2TgC1@CEND+2@C1@MAT LOAD &X,@U,CUR+1€W¹¹º¹ºLR3Lr2¹¹¹¹ºLR2TgC1@CEND@C1@W¹¹Lr3¹BSCRATCH€Lr2¹¹¹¹LR2TgC1@CEND@C1@WsumLr2ºi5L1iWL2ºi5L1iXL2üT=5@39@-@40@TIN5@C0@@Gmex1u@@ºLR2254TIN5@C0@Gmex1r@Gmex1s@Gmex1s@TXmex1r@T=5@C-1@*@5@INSERTTLGmex1t@TXmex1s@DELETETLGmex1t@TXmex1t@ @5Lr2€TXmex1u@TLGmex3@TXmex2x@Table of contributions to Chi-square could not be computed:at least one row or column sum equals zero!TXmex3@TgC1@CEND+2@C1@MAT KILL &*€COPY @V,CUR-1 TO @E€OUTPUT @E€Lr1FIND "FIND "TABLE "€SCRATCH€..........................................................Lr1TLGC@üTXmm@ CELL=@T,@S ('m' by /TABULATE)BTwCVARIABLES@END+2 / VARIABLES=@6,@6OUTPUT -€€FIND "TABLE "€iVL1i5L2 WW°LR2BLr2° Wi5wTIA5@C @@Gmmx@@WTXmm1@LR2ºiXL1i5L2Lr2TIN5@C1@@Gmmx@@¹¹@~¹LR3TXmm2@i5xTIA5@C @@Gmm2@@¹¹¹¹Lr3TLGmm1@TXmmx@Büº LR2@SLr2 B@S@RFORM CUR-1,CUR-1,CUR-2€¹¹º¹Lr2¹BREPLACE ".","0",C / LINES=CUR-1€BT=5@31@-@32@@5€¹¹º¹Lr2¹ºlatoTBSCRATCH€üCOPY @V,CUR-1 TO @E€OUTPUT @E€Lr1FIND "FIND "TABLE "€SCRATCH€..........................................................Lr1TLGC@TXmF@,R%,C%,T%TLGm#@TXmE@TLGm!@TXmR@TLGm!@TXmC@TLGm!@TXmT@TLGm!@TXmM@TLGm!@üTXm!@ '@D' not implementedTXm#@..........................................................€TXC@Lr1BCOPY CUR+1,END TO @F€TgC1@C1@C!@C1@C1@SCRATCH€TLGLoop@üTXEndLoop@TgC1@C1@C!@C1@C1@SCRATCH€FILE DEL @GTABUL@H.TMP€FILE DEL @GTABUL@J.TMP€FILE DEL @GTABUL@I.TMP€FILE DEL @GTABULTMP.TUT€FILE DEL @GTABULTMP.STK€OUTPUT @M€üLISTDIM=@@LIST MAKE @2 OF @E€LOADP @2.LST€REPLACE "@2"," ",C€REPLACE "-"," ",C€ºiVwT!4@C0@üTXL1a@T=4@4@+@C1@TIN4@38@@@GL1z@BLOAD @2@4€TgC1@CEND@C1@iWL1i5L2TgC1@C4@C1@TXL1c@(TXL1d@LoºiUL1i5L2BL0TIN5@C1@@@GL1d@)TIN37@39@@GL1x@GL1x@TLGL1c@TXL1x@TgC1@C1@C!@C1@C1@€TLGL1a@TXL1z@TLGEnd1@üTXHelp@B/TABULATE?Q€qTLGEnd2@TXEnd1@T!1@CTABUL8@;SUR-RESTORETLGEnd@TXEnd2@T!1@CTABUL8@;SUR-RESTOREB/TABULATE <data> BY <var1>[,<var2>,...] TO <list>TXEnd@Tb0@L0Ta-1@Tÿ TABULATE.TUT makes cross tabulations of the given variable in <data>.
 K.Vehkalahti 16.6.97 (19.6)(23.6)(24.6)(25.6)(26.6)(28.6)(1.7)(2.7)
 (4.7)---(4.9)(9.9)(12.9)(15.9) [driven by the Nokia project & Lotta]
 Modifications for SURVO MM: (2.10.2000)
 - survotype removed


 handle given parameters:

 def Wlist=W2 Wg=W3      Wi=W4 Wx=W5

 Wg gives the number of real parameters

 def Wdata=W1
 def Wvar1=W6 Wvar2=W7 Wvar3=W8 Wvar4=W9 Wvar5=W10 Wvar6=W11 Wvar7=W12

 Wg gives the number of tabulating variables

 def WMASK=W15 WLISTDIM=W16 WCLASSMAX=W17
 def Wmaskchars=W19 Wmaskchar=W20 Wtabout=W21 Wcmdout=W22 Wtmpd=W23
 def Wvarfile=W24 Wclassfile=W25 Wstatfile=W26
 def Wvarcount=W27 Wvartype=W28 Weout=W29
 def Wmin=W30 Wobs=W31 Wmissing=W32 Wmean=W33 Wstddev=W34
 def Wformat=W35 Wvar0=W36
 def Wy=W37 Wa=W38 Wb=W39 Wc=W40 Wd=W41

 ********* Handle the given classification(s) of tabulating variable(s)
 ****************************** Check if classification is given at all
 *************  Edit the classification and save it to a temporary file
 ********************************** Continue in the original edit field


 ***************************** Create a huge edit field for FILE STATUS



 ************************************************* Prepare output files


 ********** Check the original edit field for self given classification
 ************** Find classification for variable by information of STAT
 erase variable comment: (it might include the varname, too!)

 ***************************** Errorneous situations, generate warnings
 ************************** Variable is numeric; classification by STAT

 ************************************** Remove classes of 0-frequencies
 ******************* No 0-frequencies, use classification given by STAT
 ****************************************** Numeric or string variable
 ************************************************************* Numeric
 ************************************************************* String

 ******************* Write classification of tabulating variables + TAB

 ********************** Adjust RESULTS etc. according to mask character
 expected frequencies, chi-square contributions
 do freq's anyway
 check zero-sums
 always compute both (if possible)





 means, stddev's and frequencies
 add Total column (total mean is included in the format...)

 **********************************************************************
 ************************** End of the tabulating loop; do some cleanup
*************** Save the output tables to a LIST for further processing

 **********************************************************************
