SURVO84ED 81 200    81 S20                                                       *SAVE EDQMR1                                                                     *LOAD EDQ                                                                        *                                                                                *MATRUN?                                                                         *A MAT chain can also be saved on disk as text file (by SAVEP, for               *example) and activated by a MATRUN command.                                     *For example,                                                                    *MATRUN PCOMP,X,3                                                                *executes a PCOMP chain with parameters X (name of data matrix) and              *3 (number of principal components). PCOMP refers here to a text file            *PCOMP.MTX which by default is located in the <Survo>\U\M subdirectory of        *Survo. In the PCOMP file notations %1,%2,... are used for parameters.           *In the preceding example %1 will be replaced by X and %2 by 3.                  *                                                                                *You may get information on a particular MATRUN chain by activating              *MATRUN PCOMP?                                                                   *The INDEX field in the <Survo>\U\M subdirectory lists all standard MATRUN       *chains. Many tasks related to multivariate statistical analysis and             *linear models may be carried out by these MATRUN chains.                        *@C                                                                              *In many cases, programming of MAT chains is not anymore the best way to         *make sequences of matrix operations.                                            *The same tasks are accomplished simpler by sucros using MAT operations          *(see SUCRO?)                                                                    *                                                                                *  M = More information on matrix operations                                     *  S = More information on multivariate statistical operations                   %M=MAT? S=MULTI? @                                                               *                                                                                *GROUP?                                                                          *  1 = Grouping of observations by cluster analysis                              *  2 = Aggregating observations (FILE AGGRE)                                     *  3 = Grouping observations in bar charts (GROUPING specification)             C%1=CLUSTER 2=AGGRE? 3=GROUP2?                                                    *                                                                                *CLUSTER?                                                                        *Cluster analysis                                                                *                                                                                *  1 = Statistical clustering by the Wilks' lambda criterion (CLUSTER)           *  2 = Hierarchical methods (small data, dendrograms) (HCLUSTER)                 *  3 = Clustering by using medoids (DCLUSTER)                                    *  4 = (Generalized) single linkage (large data) (DCLUSTER)                      *                                                                                *  M = More information on multivariate statistical operations                   %1=CLUSTER1 2=HCLUSTER? 3=DCLUSTER 4=DCLUSTER M=MULTI?                           *                                                                                *CLUSTER1?                                                                       *CLUSTER <data_file>,L                                                           *performs cluster analysis on the selected variables and observations            *of the Survo <data_file>.                                                       *The clustering criterion is Wilks' lambda and the stepwise procedure            *for efficient computation of lambda values is based on the algorithm            *presented by Pekka Korhonen in his doctoral dissertation "A stepwise            *procedure for multivariate clustering", Computing Centre, University            *of Helsinki, Research Reports N:o 7, Helsinki 1979.                             *In the CLUSTER module, the dual procedure of Korhonen's stepwise                *method is applied.                                                              *For general information on cluster analysis, see e.g.                           *M.R.Anderberg: "Cluster Analysis for Applications", Academic Press,             *New York and London, 1973.                                                      *                                                                                *The active observations of <data_file> are defined by IND and CASES             *specifications.                                                                 *The variables used in the analysis are all active variables in                  *<data_file>, except those activated by 'G' or 'I'.                              *@C                                                                              *The stepwise clustering procedure is always based on some initial               *grouping of observations. The user has to give the number (g) of clusters       *by the GROUPS=g specification. GROUPS=2 is the default.                         *The initial grouping is given by a variable activated by 'I' and the            *values of this variable must be integers 1,2,..,g. If the initial               *grouping of observations is not given (no mask 'I' exists), a random            *initial grouping based on uniform distribution over 1,2,...,g is applied        *automatically.                                                                  *The initial grouping (defined by the 'I' mask variable) can also be             *incomplete (with missing values or values outside the permitted ones            *1,2,...,g). In this case it is assumed that the user has indicated              *at least one observation in each group. Then, the initial grouping              *will be selected on this basis by using the "nearest neighbour"                 *principle in the standardized data matrix X (with the property X'X=I).          *@C                                                                              *The main result of CLUSTER is the optimal clustering based on                   *the Wilk's lambda criterion and it is saved in the first variable               *of <data_file> activated by 'G'.                                                *If more 'G' variables exist, the CLUSTER module will save as many of the        *best solutions found, provided that a specification TRIALS=n where n is         *>1 is given.                                                                    *The possibility for several trials is important in more complicated             *cases where different initial groupings may lead to different solutions.        *@C                                                                              *Other options in CLUSTER:                                                       *There are no limits for the size of the data file. The highest number           *of variables and groups depends on the available memory space.                  *However, it is seldom reasonable to use more than 10-20 variables in one        *cluster analysis.                                                               *To speed up the iterative process where the data values are scanned             *several times, CLUSTER saves the active part of the data set in a               *special file SURVO.CLU on the path of the temporary files (defined              *by the line tempdisk in SURVO.APU).                                             *This file (path) can be replaced by another (on a RAM disk, for example)        *by giving a specification TEMPFILE=<filename>.                                  *In randomizations for initial groupings, the seed number of                     *the random number generator is selected according to current time.              *To use a fixed generator (in order to have the possibility to repeat            *an experiment), a specification of the form SEED=<integer> can be               *given.                                                                          *@C                                                                              *Example:                                                                        *  Two samples from bivariate normal distribution with different means           *  but same covariance matrix are generated:                                     *................................................................................SFILE CREATE N2,32,10,64,7,100                                                   *FIELDS:                                                                         *1 N 4 X                                                                         *2 N 4 Y                                                                         *END                                                                             *                                                                                SVAR X,Y TO N2                                                                   *X=if(ORDER<51)then(X1)else(X2) Y=if(ORDER<51)then(Y1)else(Y2)                   *X1=Z1     Y1=r*Z1+s*Z2      r=0.8 s=sqrt(1-r*r)                                 *X2=Z1+2   Y2=r*Z1+s*Z2-2                                                        *Z1=probit(rnd(2)) Z2=probit(rnd(2))                                             *................................................................................SVAR G1:1,G2:1,G3:1 TO N2                                                        *  G1=0 G2=0 G3=0                                                                *................................................................................*(Continued on next page)                                                        *@C                                                                              *(Example continued)                                                             *  The CLUSTER operation with 10 trials, 2 groups, and random number             *  generator 2 gives two different solutions:                                    *                                                                                *MASK=AAGGG    TRIALS=10  GROUPS=2 SEED=2                                        SCLUSTER N2,CUR+1                                                                *Stepwise cluster analysis by Wilks' Lambda criterion                            *Data N2  N=100                                                                  *Variables: X, Y                                                                 *Best clusterings found in 10 trials are saved as follows:                       * Lambda     freq  Grouping var                                                  * 0.04496      6   G1                                                            * 0.14945      4   G2                                                            *                                                                                *................................................................................*The result can be checked by plotting the graph:                                SGPLOT N2,X,Y / HEADER=Samples_from_bivariate_normal_distributions               *POINT=G1  (G2 gives the inferior clustering)                                    *................................................................................*@GOTO M                                                                         *M?                                                                              *  C = More information on cluster analysis                                      *  M = More information on multivariate analysis                                 %C=CLUSTER M=MULTI?                                                              *@SELECT                                                                         *                                                                                *DCLUSTER?                                                                       *DCLUSTER <data>,<distance_matrix>,L                                             *performs cluster analysis by different methods.                                 *By default it is done by means of `medoids'.                                    *This technique is presented by Kaufman and Rousseeuw in 1987.                   *See their book `Finding Groups in Data' (Wiley 1990).                           *It seems to be more robust than the standard k-means method.                    *                                                                                *The computations in DCLUSTER are based entirely on a ready-computed             *<distance_matrix> (obtained in Survo by the DIST operation, for                 *example) from Survo <data>.                                                     *The number of clusters is given by specification GROUPS.                        *Default is GROUPS=2. The group indices 1,2,... are saved in <data>              *as a variable given by mask `G' and the (optional) `silhouette'                 *as values of variable with mask `S'.                                            *The greatest possible number N of observations depends on the size of           *the central memory of the computer (NxN distance matrix has to be               *present). For example, in a 64MB memory N is about 2500.                        *However, to large data (say, more than 1000 observations) the medoid            *method can be applied by taking random samples. This technique is               *supplied by the /CLARA sucro.                                                   *@C                                                                              *DCLUSTER <data>,<distance_matrix>,L                                             *with specification METHOD=3 makes cluster analysis                              *by the single linkage (nearest neighbour) method.                               *The setup is otherwise similar as described above.                              *To avoid certain weaknesses of this method like                                 *the chaining effect the distance between two groups                             *of sizes n1 and n2 is multiplied by                                             *1+weight*[log2(min(n1,n2)+1)-1]  (suggestion of S.M. 1998)                      *by using the specification WEIGHT=weight. Default is WEIGHT=0                   *(i.e. standard single linkage) but WEIGHT=1 is recommended.                     *                                                                                *In METHOD=3 an initial grouping 1,2,... (obtained by methoids)                  *can be given by (another) grouping variable given by                            *INIT=<name_of_variable>.                                                        *In practice, when the expected number of cluster is, say, 2 or 3                *one may start by creating the medoid solution with, say, 10 groups              *and then the final solution is found by METHOD=3 with WEIGHT=1                  *on the basis of this preliminary 10 group solution.                             *@GOTO M                                                                         *                                                                                *                                                                                *                                                                                *                                                                                *                                                                                Shadows                                                                          p  77777777777777777777777777777                                                 v  7777777777777                                                                 |  777777777777777777777777                                                      †  7777777777777777                                                              ‘  777777777777                                                                  END                                                                              